/* Shield UI 1.7.27 Trial Version | Copyright 2013-2016 Shield UI Ltd. | http://www.shieldui.com/eula */
!function(b,a,s,c){function f(a){return d(a)&&!q(a)&&"undefined"!==a}var j,g,h=a.ui.Widget,r=(a.Class,a.DataSource),n=(Math.min,Math.max,b.proxy),p=b.each,o=b.map,m=a.error,e=a.format,d=a.is.defined,q=a.is["null"],i=a.to["int"],l="change",k="click";j={cls:c,width:c,height:c,dataSource:c,readDataSource:!0,title:c,textTemplate:"{text}",hrefTemplate:"{href}",targetTemplate:"{target}",frequencyTemplate:"{frequency}",minSize:90,maxSize:250,events:{}},g=h.extend({init:function(){h.fn.init.apply(this,arguments);var f,a=this,e=b(a.element),c=a.options,g=c.title,i=c.dieOnError,j=c.dataSource,k=c.cls;return"div"!==e.prop("tagName").toLowerCase()?void m("shieldTagCloud: Underlying element is not DIV.",i):(f=a._eventNS=".shieldTagCloud"+a.getInstanceId(),e.empty(),g&&e.append('<div class="sui-tagcloud-title">'+g+"</div>"),a._contentEl=b('<div class="sui-tagcloud-content">').appendTo(e),e.addClass("sui-tagcloud"+(k?" "+k:"")),d(c.width)&&e.css("width",c.width),d(c.height)&&e.css("height",c.height),j?(a.dataSource=r.create(j),a.dataSource.on(l+f,n(a._dsChange,a)),void(c.readDataSource&&a.dataSource.read())):(a.destroy(),void m("shieldTagCloud: No dataSource or underlying UL element found.",i)))},_dsChange:function(){this._render()},_render:function(){var a=this,d=a._contentEl,b=a.dataSource.view||[],c=a._getMinMax(b);d.empty().append(o(b,function(b){return a._createItem(b,c[0],c[1])}))},_createItem:function(c,l,s){var g,q,p,o,m,j=this,a=j.options,r=a.minSize,t=a.maxSize,d=b('<div class="sui-tagcloud-item" />'),h=e(a.textTemplate,c);return f(h)&&(g=e(a.hrefTemplate,c),f(g)?(o=b('<a href="'+g+'" class="sui-tagcloud-link">'+h+"</a>").appendTo(d),m=e(a.targetTemplate,c),f(m)&&o.attr("target",m)):d.html(h)),p=i(e(a.frequencyTemplate,c)),q=s>l?(p-l)*(t-r)/(s-l)+r:100,d.css("font-size",q+"%").on(k,n(j._itemClick,j,c)),d},_itemClick:function(b,a){var c=this,d=c.trigger(k,{item:b});d.isDefaultPrevented()&&a&&a.preventDefault()},_getMinMax:function(f){var a,g=this,b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;return p(f||[],function(h,f){a=i(e(g.options.frequencyTemplate,f)),(!d(c)||a>c)&&(c=a),(!d(b)||b>a)&&(b=a)}),[b,c]},destroy:function(){var a=this,c=a.element,d=a.options,b=d.cls;a.dataSource&&a.dataSource.off(l+a._eventNS),c.removeClass("sui-tagcloud"+(b?" "+b:"")).empty(),h.fn.destroy.call(a)}}),g.defaults=j,a.ui.plugin("TagCloud",g)}(jQuery,shield,this);