/* Shield UI 1.7.27 Trial Version | Copyright 2013-2016 Shield UI Ltd. | http://www.shieldui.com/eula */
function a(b){this.ok=!1,"#"==b.charAt(0)&&(b=b.substr(1,6)),b=b.replace(/ /g,""),b=b.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var f in e)b==f&&(b=e[f]);for(var c=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],d=0;d<c.length;d++){var h=c[d].re,i=c[d].process,g=h.exec(b);g&&(channels=i(g),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);return 1==a.length&&(a="0"+a),1==b.length&&(b="0"+b),1==c.length&&(c="0"+c),"#"+a+b+c},this.getHelpXML=function(){for(var b=new Array,d=0;d<c.length;d++)for(var k=c[d].example,g=0;g<k.length;g++)b[b.length]=k[g];for(var l in e)b[b.length]=l;var h=document.createElement("ul");h.setAttribute("id","rgbcolor-examples");for(var d=0;d<b.length;d++)try{var j=document.createElement("li"),f=new a(b[d]),i=document.createElement("div");i.style.cssText="margin: 3px; border: 1px solid black; background:"+f.toHex()+"; color:"+f.toHex(),i.appendChild(document.createTextNode("test"));var m=document.createTextNode(" "+b[d]+" -> "+f.toRGB()+" -> "+f.toHex());j.appendChild(i),j.appendChild(m),h.appendChild(j)}catch(n){}return h}}!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function f(i){var c=i||window.event,p=k.call(arguments,1),l=0,h=0,f=0,m=0,q=0,r=0;if(i=a.event.fix(c),i.type="mousewheel","detail"in c&&(f=-1*c.detail),"wheelDelta"in c&&(f=c.wheelDelta),"wheelDeltaY"in c&&(f=c.wheelDeltaY),"wheelDeltaX"in c&&(h=-1*c.wheelDeltaX),"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(h=-1*f,f=0),l=0===f?h:f,"deltaY"in c&&(f=-1*c.deltaY,l=f),"deltaX"in c&&(h=c.deltaX,0===f&&(l=-1*h)),0!==f||0!==h){if(1===c.deltaMode){var n=a.data(this,"mousewheel-line-height");l*=n,f*=n,h*=n}else if(2===c.deltaMode){var o=a.data(this,"mousewheel-page-height");l*=o,f*=o,h*=o}if(m=Math.max(Math.abs(f),Math.abs(h)),(!b||b>m)&&(b=m,g(c,m)&&(b/=40)),g(c,m)&&(l/=40,h/=40,f/=40),l=Math[l>=1?"floor":"ceil"](l/b),h=Math[h>=1?"floor":"ceil"](h/b),f=Math[f>=1?"floor":"ceil"](f/b),d.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();q=i.clientX-s.left,r=i.clientY-s.top}return i.deltaX=h,i.deltaY=f,i.deltaFactor=b,i.offsetX=q,i.offsetY=r,i.deltaMode=0,p.unshift(i,l,h,f),e&&clearTimeout(e),e=setTimeout(j,200),(a.event.dispatch||a.event.handle).apply(this,p)}}function j(){b=null}function g(a,b){return d.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,b,h=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],c="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],k=Array.prototype.slice;if(a.event.fixHooks)for(var i=h.length;i;)a.event.fixHooks[h[--i]]=a.event.mouseHooks;var d=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var b=c.length;b;)this.addEventListener(c[--b],f,!1);else this.onmousewheel=f;a.data(this,"mousewheel-line-height",d.getLineHeight(this)),a.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var b=c.length;b;)this.removeEventListener(c[--b],f,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(d){var c=a(d),b=c["offsetParent"in a.fn?"offsetParent":"parent"]();return b.length||(b=a("body")),parseInt(b.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(){function b(){var b={};return b.FRAMERATE=30,b.MAX_VIRTUAL_PIXELS=3e4,b.init=function(a){b.Definitions={},b.Styles={},b.Animations=[],b.Images=[],b.ctx=a,b.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(a,b){this.viewPorts.push({width:a,height:b})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(a){return null!=a&&"number"==typeof a?a:"x"==a?this.width():"y"==a?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},b.init(),b.ImagesLoaded=function(){for(var a=0;a<b.Images.length;a++)if(!b.Images[a].loaded)return!1;return!0},b.trim=function(a){return a.replace(/^\s+|\s+$/g,"")},b.compressSpaces=function(a){return a.replace(/[\s\r\t\n]+/gm," ")},b.ajax=function(b){var a;return a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a?(a.open("GET",b,!1),a.send(null),a.responseText):null},b.parseXml=function(a){if(window.DOMParser){var c=new DOMParser;return c.parseFromString(a,"text/xml")}a=a.replace(/<!DOCTYPE svg[^>]*>/,"");var b=new ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(a),b},b.Property=function(a,b){this.name=a,this.value=b},b.Property.prototype.getValue=function(){return this.value},b.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},b.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var a=parseFloat(this.value);return(this.value+"").match(/%$/)&&(a/=100),a},b.Property.prototype.valueOrDefault=function(a){return this.hasValue()?this.value:a},b.Property.prototype.numValueOrDefault=function(a){return this.hasValue()?this.numValue():a},b.Property.prototype.addOpacity=function(d){var e=this.value;if(null!=d&&""!=d&&"string"==typeof this.value){var c=new a(this.value);c.ok&&(e="rgba("+c.r+", "+c.g+", "+c.b+", "+d+")")}return new b.Property(this.name,e)},b.Property.prototype.getDefinition=function(){var a=this.value.match(/#([^\)']+)/);return a&&(a=a[1]),a||(a=this.value),b.Definitions[a]},b.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},b.Property.prototype.getFillStyleDefinition=function(c,d){var a=this.getDefinition();return null!=a&&a.createGradient?a.createGradient(b.ctx,c,d):null!=a&&a.createPattern?a.createPattern(b.ctx,c):null},b.Property.prototype.getDPI=function(a){return 96},b.Property.prototype.getEM=function(d){var a=12,c=new b.Property("fontSize",b.Font.Parse(b.ctx.font).fontSize);return c.hasValue()&&(a=c.toPixels(d)),a},b.Property.prototype.getUnits=function(){var a=this.value+"";return a.replace(/[0-9\.\-]/g,"")},b.Property.prototype.toPixels=function(c,e){if(!this.hasValue())return 0;var a=this.value+"";if(a.match(/em$/))return this.numValue()*this.getEM(c);if(a.match(/ex$/))return this.numValue()*this.getEM(c)/2;if(a.match(/px$/))return this.numValue();if(a.match(/pt$/))return this.numValue()*this.getDPI(c)*(1/72);if(a.match(/pc$/))return 15*this.numValue();if(a.match(/cm$/))return this.numValue()*this.getDPI(c)/2.54;if(a.match(/mm$/))return this.numValue()*this.getDPI(c)/25.4;if(a.match(/in$/))return this.numValue()*this.getDPI(c);if(a.match(/%$/))return this.numValue()*b.ViewPort.ComputeSize(c);var d=this.numValue();return e&&1>d?d*b.ViewPort.ComputeSize(c):d},b.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/s$/)?1e3*this.numValue():a.match(/ms$/)?this.numValue():this.numValue()},b.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/deg$/)?this.numValue()*(Math.PI/180):a.match(/grad$/)?this.numValue()*(Math.PI/200):a.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},b.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(d,e,f,g,h,c){var a=null!=c?this.Parse(c):this.CreateFont("","","","","",b.ctx.font);return{fontFamily:h||a.fontFamily,fontSize:g||a.fontSize,fontStyle:d||a.fontStyle,fontWeight:f||a.fontWeight,fontVariant:e||a.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var a=this;this.Parse=function(h){for(var f={},d=b.trim(b.compressSpaces(h||"")).split(" "),e={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},g="",c=0;c<d.length;c++)e.fontStyle||-1==a.Styles.indexOf(d[c])?e.fontVariant||-1==a.Variants.indexOf(d[c])?e.fontWeight||-1==a.Weights.indexOf(d[c])?e.fontSize?"inherit"!=d[c]&&(g+=d[c]):("inherit"!=d[c]&&(f.fontSize=d[c].split("/")[0]),e.fontStyle=e.fontVariant=e.fontWeight=e.fontSize=!0):("inherit"!=d[c]&&(f.fontWeight=d[c]),e.fontStyle=e.fontVariant=e.fontWeight=!0):("inherit"!=d[c]&&(f.fontVariant=d[c]),e.fontStyle=e.fontVariant=!0):("inherit"!=d[c]&&(f.fontStyle=d[c]),e.fontStyle=!0);return""!=g&&(f.fontFamily=g),f}},b.ToNumberArray=function(d){for(var a=b.trim(b.compressSpaces((d||"").replace(/,/g," "))).split(" "),c=0;c<a.length;c++)a[c]=parseFloat(a[c]);return a},b.Point=function(a,b){this.x=a,this.y=b},b.Point.prototype.angleTo=function(a){return Math.atan2(a.y-this.y,a.x-this.x)},b.Point.prototype.applyTransform=function(a){var b=this.x*a[0]+this.y*a[2]+a[4],c=this.x*a[1]+this.y*a[3]+a[5];this.x=b,this.y=c},b.CreatePoint=function(c){var a=b.ToNumberArray(c);return new b.Point(a[0],a[1])},b.CreatePath=function(e){for(var c=b.ToNumberArray(e),d=[],a=0;a<c.length;a+=2)d.push(new b.Point(c[a],c[a+1]));return d},b.BoundingBox=function(a,b,c,d){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(a,b){null!=a&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=a,this.x2=a),a<this.x1&&(this.x1=a),a>this.x2&&(this.x2=a)),null!=b&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=b,this.y2=b),b<this.y1&&(this.y1=b),b>this.y2&&(this.y2=b))},this.addX=function(a){this.addPoint(a,null)},this.addY=function(a){this.addPoint(null,a)},this.addBoundingBox=function(a){this.addPoint(a.x1,a.y1),this.addPoint(a.x2,a.y2)},this.addQuadraticCurve=function(a,b,g,h,c,d){var e=a+2/3*(g-a),f=b+2/3*(h-b),i=e+1/3*(c-a),j=f+1/3*(d-b);this.addBezierCurve(a,b,e,i,f,j,c,d)},this.addBezierCurve=function(u,n,t,s,r,q,p,o){var b=[u,n],h=[t,s],k=[r,q],j=[p,o];for(this.addPoint(b[0],b[1]),this.addPoint(j[0],j[1]),i=0;i<=1;i++){var a=function(a){return Math.pow(1-a,3)*b[i]+3*Math.pow(1-a,2)*a*h[i]+3*(1-a)*Math.pow(a,2)*k[i]+Math.pow(a,3)*j[i]},c=6*b[i]-12*h[i]+6*k[i],g=-3*b[i]+9*h[i]-9*k[i]+3*j[i],m=3*h[i]-3*b[i];if(0!=g){var l=Math.pow(c,2)-4*m*g;if(!(0>l)){var f=(-c+Math.sqrt(l))/(2*g);f>0&&1>f&&(0==i&&this.addX(a(f)),1==i&&this.addY(a(f)));var e=(-c-Math.sqrt(l))/(2*g);e>0&&1>e&&(0==i&&this.addX(a(e)),1==i&&this.addY(a(e)))}}else{if(0==c)continue;var d=-m/c;d>0&&1>d&&(0==i&&this.addX(a(d)),1==i&&this.addY(a(d)))}}},this.isPointInBox=function(a,b){return this.x1<=a&&a<=this.x2&&this.y1<=b&&b<=this.y2},this.addPoint(a,b),this.addPoint(c,d)},b.Transform=function(g){var c=this;this.Type={},this.Type.translate=function(a){this.p=b.CreatePoint(a),this.apply=function(a){a.translate(this.p.x||0,this.p.y||0)},this.applyToPoint=function(a){a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(c){var a=b.ToNumberArray(c);this.angle=new b.Property("angle",a[0]),this.cx=a[1]||0,this.cy=a[2]||0,this.apply=function(a){a.translate(this.cx,this.cy),a.rotate(this.angle.toRadians()),a.translate(-this.cx,-this.cy)},this.applyToPoint=function(b){var a=this.angle.toRadians();b.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),b.applyTransform([Math.cos(a),Math.sin(a),-Math.sin(a),Math.cos(a),0,0]),b.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(a){this.p=b.CreatePoint(a),this.apply=function(a){a.scale(this.p.x||1,this.p.y||this.p.x||1)},this.applyToPoint=function(a){a.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(a){this.m=b.ToNumberArray(a),this.apply=function(a){a.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(a){a.applyTransform(this.m)}},this.Type.SkewBase=function(a){this.base=c.Type.matrix,this.base(a),this.angle=new b.Property("angle",a)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(a){this.base=c.Type.SkewBase,this.base(a),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(a){this.base=c.Type.SkewBase,this.base(a),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(b){for(var a=0;a<this.transforms.length;a++)this.transforms[a].apply(b)},this.applyToPoint=function(b){for(var a=0;a<this.transforms.length;a++)this.transforms[a].applyToPoint(b)};for(var d=b.trim(b.compressSpaces(g)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),a=0;a<d.length;a++){var e=d[a].split("(")[0],h=d[a].split("(")[1].replace(")",""),f=new this.Type[e](h);f.type=e,this.transforms.push(f)}},b.AspectRatio=function(d,h,n,k,o,j,q,p,l,m){h=b.compressSpaces(h),h=h.replace(/^defer\s/,"");var i=h.split(" ")[0]||"xMidYMid",a=h.split(" ")[1]||"meet",g=n/k,f=o/j,c=Math.min(g,f),e=Math.max(g,f);"meet"==a&&(k*=c,j*=c),"slice"==a&&(k*=e,j*=e),l=new b.Property("refX",l),m=new b.Property("refY",m),l.hasValue()&&m.hasValue()?d.translate(-c*l.toPixels("x"),-c*m.toPixels("y")):(i.match(/^xMid/)&&("meet"==a&&c==f||"slice"==a&&e==f)&&d.translate(n/2-k/2,0),i.match(/YMid$/)&&("meet"==a&&c==g||"slice"==a&&e==g)&&d.translate(0,o/2-j/2),i.match(/^xMax/)&&("meet"==a&&c==f||"slice"==a&&e==f)&&d.translate(n-k,0),i.match(/YMax$/)&&("meet"==a&&c==g||"slice"==a&&e==g)&&d.translate(0,o-j)),"none"==i?d.scale(g,f):"meet"==a?d.scale(c,c):"slice"==a&&d.scale(e,e),d.translate(null==q?0:-q,null==p?0:-p)},b.Element={},b.EmptyProperty=new b.Property("EMPTY",""),b.Element.ElementBase=function(e){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(c,d){var a=this.attributes[c];return null!=a?a:(1==d&&(a=new b.Property(c,""),this.attributes[c]=a),a||b.EmptyProperty)},this.style=function(a,g){var c=this.styles[a];if(null!=c)return c;var d=this.attribute(a);if(null!=d&&d.hasValue())return this.styles[a]=d,d;var f=this.parent;if(null!=f){var e=f.style(a);if(null!=e&&e.hasValue())return e}return 1==g&&(c=new b.Property(a,""),this.styles[a]=c),c||b.EmptyProperty},this.render=function(a){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){if(a.save(),this.attribute("mask").hasValue()){var b=this.attribute("mask").getDefinition();null!=b&&b.apply(a,this)}else if(this.style("filter").hasValue()){var c=this.style("filter").getDefinition();null!=c&&c.apply(a,this)}else this.setContext(a),this.renderChildren(a),this.clearContext(a);a.restore()}},this.setContext=function(a){},this.clearContext=function(a){},this.renderChildren=function(b){for(var a=0;a<this.children.length;a++)this.children[a].render(b)},this.addChild=function(c,d){var a=c;d&&(a=b.CreateElement(c)),a.parent=this,this.children.push(a)},null!=e&&1==e.nodeType){for(var c=0;c<e.childNodes.length;c++){var f=e.childNodes[c];1==f.nodeType&&this.addChild(f,!0),this.captureTextNodes&&3==f.nodeType&&this.addChild(new b.Element.tspan(f),!1)}for(var c=0;c<e.attributes.length;c++){var h=e.attributes[c];this.attributes[h.nodeName]=new b.Property(h.nodeName,h.nodeValue)}var a=b.Styles[e.nodeName];if(null!=a)for(var d in a)this.styles[d]=a[d];if(this.attribute("class").hasValue())for(var i=b.compressSpaces(this.attribute("class").value).split(" "),g=0;g<i.length;g++){if(a=b.Styles["."+i[g]],null!=a)for(var d in a)this.styles[d]=a[d];if(a=b.Styles[e.nodeName+"."+i[g]],null!=a)for(var d in a)this.styles[d]=a[d]}if(this.attribute("id").hasValue()){var a=b.Styles["#"+this.attribute("id").value];if(null!=a)for(var d in a)this.styles[d]=a[d]}if(this.attribute("style").hasValue())for(var a=this.attribute("style").value.split(";"),c=0;c<a.length;c++)if(""!=b.trim(a[c])){var j=a[c].split(":"),d=b.trim(j[0]),k=b.trim(j[1]);this.styles[d]=new b.Property(d,k)}this.attribute("id").hasValue()&&null==b.Definitions[this.attribute("id").value]&&(b.Definitions[this.attribute("id").value]=this)}},b.Element.RenderedElementBase=function(a){this.base=b.Element.ElementBase,this.base(a),this.setContext=function(a){if(this.style("fill").isUrlDefinition()){var e=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=e&&(a.fillStyle=e)}else if(this.style("fill").hasValue()){var c=this.style("fill");"currentColor"==c.value&&(c.value=this.style("color").value),a.fillStyle="none"==c.value?"rgba(0,0,0,0)":c.value}if(this.style("fill-opacity").hasValue()){var c=new b.Property("fill",a.fillStyle);c=c.addOpacity(this.style("fill-opacity").value),a.fillStyle=c.value}if(this.style("stroke").isUrlDefinition()){var e=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=e&&(a.strokeStyle=e)}else if(this.style("stroke").hasValue()){var d=this.style("stroke");"currentColor"==d.value&&(d.value=this.style("color").value),a.strokeStyle="none"==d.value?"rgba(0,0,0,0)":d.value}if(this.style("stroke-opacity").hasValue()){var d=new b.Property("stroke",a.strokeStyle);d=d.addOpacity(this.style("stroke-opacity").value),a.strokeStyle=d.value}if(this.style("stroke-width").hasValue()){var f=this.style("stroke-width").toPixels();a.lineWidth=0==f?.001:f}if(this.style("stroke-linecap").hasValue()&&(a.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(a.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(a.miterLimit=this.style("stroke-miterlimit").value),"undefined"!=typeof a.font&&(a.font=b.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){var h=new b.Transform(this.attribute("transform").value);h.apply(a)}if(this.attribute("clip-path").hasValue()){var g=this.attribute("clip-path").getDefinition();null!=g&&g.apply(a)}this.style("opacity").hasValue()&&(a.globalAlpha=this.style("opacity").numValue())}},b.Element.RenderedElementBase.prototype=new b.Element.ElementBase,b.Element.PathElementBase=function(a){this.base=b.Element.RenderedElementBase,this.base(a),this.path=function(a){return null!=a&&a.beginPath(),new b.BoundingBox},this.renderChildren=function(c){this.path(c),b.Mouse.checkPath(this,c),""!=c.fillStyle&&c.fill(),""!=c.strokeStyle&&c.stroke();var a=this.getMarkers();if(null!=a){if(this.style("marker-start").isUrlDefinition()){var e=this.style("marker-start").getDefinition();e.render(c,a[0][0],a[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var e=this.style("marker-mid").getDefinition(),d=1;d<a.length-1;d++)e.render(c,a[d][0],a[d][1]);if(this.style("marker-end").isUrlDefinition()){var e=this.style("marker-end").getDefinition();e.render(c,a[a.length-1][0],a[a.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},b.Element.PathElementBase.prototype=new b.Element.RenderedElementBase,b.Element.svg=function(a){this.base=b.Element.RenderedElementBase,this.base(a),this.baseClearContext=this.clearContext,this.clearContext=function(a){this.baseClearContext(a),b.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(a){a.strokeStyle="rgba(0,0,0,0)",a.lineCap="butt",a.lineJoin="miter",a.miterLimit=4,this.baseSetContext(a),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),a.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var c=b.ViewPort.width(),d=b.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){c=this.attribute("width").toPixels("x"),d=this.attribute("height").toPixels("y");var f=0,g=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(f=-this.attribute("refX").toPixels("x"),g=-this.attribute("refY").toPixels("y")),a.beginPath(),a.moveTo(f,g),a.lineTo(c,g),a.lineTo(c,d),a.lineTo(f,d),a.closePath(),a.clip()}if(b.ViewPort.SetCurrent(c,d),this.attribute("viewBox").hasValue()){var e=b.ToNumberArray(this.attribute("viewBox").value),h=e[0],i=e[1];c=e[2],d=e[3],b.AspectRatio(a,this.attribute("preserveAspectRatio").value,b.ViewPort.width(),c,b.ViewPort.height(),d,h,i,this.attribute("refX").value,this.attribute("refY").value),b.ViewPort.RemoveCurrent(),b.ViewPort.SetCurrent(e[2],e[3])}}},b.Element.svg.prototype=new b.Element.RenderedElementBase,b.Element.rect=function(a){this.base=b.Element.PathElementBase,this.base(a),this.path=function(d){var a=this.attribute("x").toPixels("x"),c=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y"),e=this.attribute("rx").toPixels("x"),h=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(h=e),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(e=h),e=Math.min(e,f/2),h=Math.min(h,g/2),null!=d&&(d.beginPath(),d.moveTo(a+e,c),d.lineTo(a+f-e,c),d.quadraticCurveTo(a+f,c,a+f,c+h),d.lineTo(a+f,c+g-h),d.quadraticCurveTo(a+f,c+g,a+f-e,c+g),d.lineTo(a+e,c+g),d.quadraticCurveTo(a,c+g,a,c+g-h),d.lineTo(a,c+h),d.quadraticCurveTo(a,c,a+e,c),d.closePath()),new b.BoundingBox(a,c,a+f,c+g)}},b.Element.rect.prototype=new b.Element.PathElementBase,b.Element.circle=function(a){this.base=b.Element.PathElementBase,this.base(a),this.path=function(c){var d=this.attribute("cx").toPixels("x"),e=this.attribute("cy").toPixels("y"),a=this.attribute("r").toPixels();return null!=c&&(c.beginPath(),c.arc(d,e,a,0,2*Math.PI,!0),c.closePath()),new b.BoundingBox(d-a,e-a,d+a,e+a)}},b.Element.circle.prototype=new b.Element.PathElementBase,b.Element.ellipse=function(a){this.base=b.Element.PathElementBase,this.base(a),this.path=function(f){var g=4*((Math.sqrt(2)-1)/3),e=this.attribute("rx").toPixels("x"),d=this.attribute("ry").toPixels("y"),a=this.attribute("cx").toPixels("x"),c=this.attribute("cy").toPixels("y");return null!=f&&(f.beginPath(),f.moveTo(a,c-d),f.bezierCurveTo(a+g*e,c-d,a+e,c-g*d,a+e,c),f.bezierCurveTo(a+e,c+g*d,a+g*e,c+d,a,c+d),f.bezierCurveTo(a-g*e,c+d,a-e,c+g*d,a-e,c),f.bezierCurveTo(a-e,c-g*d,a-g*e,c-d,a,c-d),f.closePath()),new b.BoundingBox(a-e,c-d,a+e,c+d)}},b.Element.ellipse.prototype=new b.Element.PathElementBase,b.Element.line=function(a){this.base=b.Element.PathElementBase,this.base(a),this.getPoints=function(){return[new b.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new b.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(c){var a=this.getPoints();return null!=c&&(c.beginPath(),c.moveTo(a[0].x,a[0].y),c.lineTo(a[1].x,a[1].y)),new b.BoundingBox(a[0].x,a[0].y,a[1].x,a[1].y)},this.getMarkers=function(){var a=this.getPoints(),b=a[0].angleTo(a[1]);return[[a[0],b],[a[1],b]]}},b.Element.line.prototype=new b.Element.PathElementBase,b.Element.polyline=function(a){this.base=b.Element.PathElementBase,this.base(a),this.points=b.CreatePath(this.attribute("points").value),this.path=function(c){var d=new b.BoundingBox(this.points[0].x,this.points[0].y);null!=c&&(c.beginPath(),c.moveTo(this.points[0].x,this.points[0].y));for(var a=1;a<this.points.length;a++)d.addPoint(this.points[a].x,this.points[a].y),null!=c&&c.lineTo(this.points[a].x,this.points[a].y);return d},this.getMarkers=function(){for(var a=[],b=0;b<this.points.length-1;b++)a.push([this.points[b],this.points[b].angleTo(this.points[b+1])]);return a.push([this.points[this.points.length-1],a[a.length-1][1]]),a}},b.Element.polyline.prototype=new b.Element.PathElementBase,b.Element.polygon=function(a){this.base=b.Element.polyline,this.base(a),this.basePath=this.path,this.path=function(a){var b=this.basePath(a);return null!=a&&(a.lineTo(this.points[0].x,this.points[0].y),a.closePath()),b}},b.Element.polygon.prototype=new b.Element.polyline,b.Element.path=function(c){this.base=b.Element.PathElementBase,this.base(c);var a=this.attribute("d").value;a=a.replace(/,/gm," "),a=a.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=b.compressSpaces(a),a=b.trim(a),this.PathParser=new function(a){this.tokens=a.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new b.Point(0,0),this.control=new b.Point(0,0),this.current=new b.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var a=new b.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(a)},this.getAsControlPoint=function(){var a=this.getPoint();return this.control=a,a},this.getAsCurrentPoint=function(){var a=this.getPoint();return this.current=a,a},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase())return this.current;var a=new b.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return a},this.makeAbsolute=function(a){return this.isRelativeCommand()&&(a.x+=this.current.x,a.y+=this.current.y),a},this.addMarker=function(a,b,c){null!=c&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(c)),this.addMarkerAngle(a,null==b?null:b.angleTo(a))},this.addMarkerAngle=function(a,b){this.points.push(a),this.angles.push(b)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var a=0;a<this.angles.length;a++)if(null==this.angles[a])for(var b=a+1;b<this.angles.length;b++)if(null!=this.angles[b]){this.angles[a]=this.angles[b];break}return this.angles}}(a),this.path=function(c){var a=this.PathParser;a.reset();var k=new b.BoundingBox;for(null!=c&&c.beginPath();!a.isEnd();)switch(a.nextCommand(),a.command){case"M":case"m":var h=a.getAsCurrentPoint();for(a.addMarker(h),k.addPoint(h.x,h.y),null!=c&&c.moveTo(h.x,h.y),a.start=a.current;!a.isCommandOrEnd();){var h=a.getAsCurrentPoint();a.addMarker(h,a.start),k.addPoint(h.x,h.y),null!=c&&c.lineTo(h.x,h.y)}break;case"L":case"l":for(;!a.isCommandOrEnd();){var F=a.current,h=a.getAsCurrentPoint();a.addMarker(h,F),k.addPoint(h.x,h.y),null!=c&&c.lineTo(h.x,h.y)}break;case"H":case"h":for(;!a.isCommandOrEnd();){var r=new b.Point((a.isRelativeCommand()?a.current.x:0)+a.getScalar(),a.current.y);a.addMarker(r,a.current),a.current=r,k.addPoint(a.current.x,a.current.y),null!=c&&c.lineTo(a.current.x,a.current.y)}break;case"V":case"v":for(;!a.isCommandOrEnd();){var r=new b.Point(a.current.x,(a.isRelativeCommand()?a.current.y:0)+a.getScalar());a.addMarker(r,a.current),a.current=r,k.addPoint(a.current.x,a.current.y),null!=c&&c.lineTo(a.current.x,a.current.y)}break;case"C":case"c":for(;!a.isCommandOrEnd();){var j=a.current,n=a.getPoint(),e=a.getAsControlPoint(),d=a.getAsCurrentPoint();a.addMarker(d,e,n),k.addBezierCurve(j.x,j.y,n.x,n.y,e.x,e.y,d.x,d.y),null!=c&&c.bezierCurveTo(n.x,n.y,e.x,e.y,d.x,d.y)}break;case"S":case"s":for(;!a.isCommandOrEnd();){var j=a.current,n=a.getReflectedControlPoint(),e=a.getAsControlPoint(),d=a.getAsCurrentPoint();a.addMarker(d,e,n),k.addBezierCurve(j.x,j.y,n.x,n.y,e.x,e.y,d.x,d.y),null!=c&&c.bezierCurveTo(n.x,n.y,e.x,e.y,d.x,d.y)}break;case"Q":case"q":for(;!a.isCommandOrEnd();){
var j=a.current,e=a.getAsControlPoint(),d=a.getAsCurrentPoint();a.addMarker(d,e,e),k.addQuadraticCurve(j.x,j.y,e.x,e.y,d.x,d.y),null!=c&&c.quadraticCurveTo(e.x,e.y,d.x,d.y)}break;case"T":case"t":for(;!a.isCommandOrEnd();){var j=a.current,e=a.getReflectedControlPoint();a.control=e;var d=a.getAsCurrentPoint();a.addMarker(d,e,e),k.addQuadraticCurve(j.x,j.y,e.x,e.y,d.x,d.y),null!=c&&c.quadraticCurveTo(e.x,e.y,d.x,d.y)}break;case"A":case"a":for(;!a.isCommandOrEnd();){var j=a.current,f=a.getScalar(),g=a.getScalar(),m=a.getScalar()*(Math.PI/180),E=a.getScalar(),v=a.getScalar(),d=a.getAsCurrentPoint(),i=new b.Point(Math.cos(m)*(j.x-d.x)/2+Math.sin(m)*(j.y-d.y)/2,-Math.sin(m)*(j.x-d.x)/2+Math.cos(m)*(j.y-d.y)/2),w=Math.pow(i.x,2)/Math.pow(f,2)+Math.pow(i.y,2)/Math.pow(g,2);w>1&&(f*=Math.sqrt(w),g*=Math.sqrt(w));var q=(E==v?-1:1)*Math.sqrt((Math.pow(f,2)*Math.pow(g,2)-Math.pow(f,2)*Math.pow(i.y,2)-Math.pow(g,2)*Math.pow(i.x,2))/(Math.pow(f,2)*Math.pow(i.y,2)+Math.pow(g,2)*Math.pow(i.x,2)));isNaN(q)&&(q=0);var l=new b.Point(q*f*i.y/g,q*-g*i.x/f),o=new b.Point((j.x+d.x)/2+Math.cos(m)*l.x-Math.sin(m)*l.y,(j.y+d.y)/2+Math.sin(m)*l.x+Math.cos(m)*l.y),B=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))},t=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(B(a)*B(b))},A=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(t(a,b))},y=A([1,0],[(i.x-l.x)/f,(i.y-l.y)/g]),z=[(i.x-l.x)/f,(i.y-l.y)/g],x=[(-i.x-l.x)/f,(-i.y-l.y)/g],s=A(z,x);t(z,x)<=-1&&(s=Math.PI),t(z,x)>=1&&(s=0);var u=1-v?1:-1,p=y+u*(s/2),G=new b.Point(o.x+f*Math.cos(p),o.y+g*Math.sin(p));if(a.addMarkerAngle(G,p-u*Math.PI/2),a.addMarkerAngle(d,p-u*Math.PI),k.addPoint(d.x,d.y),null!=c){var t=f>g?f:g,C=f>g?1:f/g,D=f>g?g/f:1;c.translate(o.x,o.y),c.rotate(m),c.scale(C,D),c.arc(0,0,t,y,y+s,1-v),c.scale(1/C,1/D),c.rotate(-m),c.translate(-o.x,-o.y)}}break;case"Z":case"z":null!=c&&c.closePath(),a.current=a.start}return k},this.getMarkers=function(){for(var b=this.PathParser.getMarkerPoints(),d=this.PathParser.getMarkerAngles(),c=[],a=0;a<b.length;a++)c.push([b[a],d[a]]);return c}},b.Element.path.prototype=new b.Element.PathElementBase,b.Element.pattern=function(a){this.base=b.Element.ElementBase,this.base(a),this.createPattern=function(i,k){var g=this.attribute("width").toPixels("x",!0),h=this.attribute("height").toPixels("y",!0),a=new b.Element.svg;a.attributes.viewBox=new b.Property("viewBox",this.attribute("viewBox").value),a.attributes.width=new b.Property("width",g+"px"),a.attributes.height=new b.Property("height",h+"px"),a.attributes.transform=new b.Property("transform",this.attribute("patternTransform").value),a.children=this.children;var c=document.createElement("canvas");c.width=g,c.height=h;var d=c.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&d.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var e=-1;1>=e;e++)for(var f=-1;1>=f;f++)d.save(),d.translate(e*c.width,f*c.height),a.render(d),d.restore();var j=i.createPattern(c,"repeat");return j}},b.Element.pattern.prototype=new b.Element.ElementBase,b.Element.marker=function(a){this.base=b.Element.ElementBase,this.base(a),this.baseRender=this.render,this.render=function(a,d,e){a.translate(d.x,d.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&a.rotate(e),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&a.scale(a.lineWidth,a.lineWidth),a.save();var c=new b.Element.svg;c.attributes.viewBox=new b.Property("viewBox",this.attribute("viewBox").value),c.attributes.refX=new b.Property("refX",this.attribute("refX").value),c.attributes.refY=new b.Property("refY",this.attribute("refY").value),c.attributes.width=new b.Property("width",this.attribute("markerWidth").value),c.attributes.height=new b.Property("height",this.attribute("markerHeight").value),c.attributes.fill=new b.Property("fill",this.attribute("fill").valueOrDefault("black")),c.attributes.stroke=new b.Property("stroke",this.attribute("stroke").valueOrDefault("none")),c.children=this.children,c.render(a),a.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&a.scale(1/a.lineWidth,1/a.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&a.rotate(-e),a.translate(-d.x,-d.y)}},b.Element.marker.prototype=new b.Element.ElementBase,b.Element.defs=function(a){this.base=b.Element.ElementBase,this.base(a),this.render=function(a){}},b.Element.defs.prototype=new b.Element.ElementBase,b.Element.GradientBase=function(d){this.base=b.Element.ElementBase,this.base(d),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var a=0;a<this.children.length;a++){var c=this.children[a];"stop"==c.type&&this.stops.push(c)}this.getGradient=function(){},this.createGradient=function(n,m,l){var a=this;this.attribute("xlink:href").hasValue()&&(a=this.attribute("xlink:href").getDefinition());var k=function(a){if(l.hasValue()){var c=new b.Property("color",a);return c.addOpacity(l.value).value}return a},g=this.getGradient(n,m);if(null==g)return k(a.stops[a.stops.length-1].color);for(var e=0;e<a.stops.length;e++)g.addColorStop(a.stops[e].offset,k(a.stops[e].color));if(this.attribute("gradientTransform").hasValue()){var h=b.ViewPort.viewPorts[0],d=new b.Element.rect;d.attributes.x=new b.Property("x",-b.MAX_VIRTUAL_PIXELS/3),d.attributes.y=new b.Property("y",-b.MAX_VIRTUAL_PIXELS/3),d.attributes.width=new b.Property("width",b.MAX_VIRTUAL_PIXELS),d.attributes.height=new b.Property("height",b.MAX_VIRTUAL_PIXELS);var j=new b.Element.g;j.attributes.transform=new b.Property("transform",this.attribute("gradientTransform").value),j.children=[d];var c=new b.Element.svg;c.attributes.x=new b.Property("x",0),c.attributes.y=new b.Property("y",0),c.attributes.width=new b.Property("width",h.width),c.attributes.height=new b.Property("height",h.height),c.children=[j];var f=document.createElement("canvas");f.width=h.width,f.height=h.height;var i=f.getContext("2d");return i.fillStyle=g,c.render(i),i.createPattern(f,"no-repeat")}return g}},b.Element.GradientBase.prototype=new b.Element.ElementBase,b.Element.linearGradient=function(a){this.base=b.Element.GradientBase,this.base(a),this.getGradient=function(f,g){var a=g.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var b="objectBoundingBox"==this.gradientUnits?a.x()+a.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),c="objectBoundingBox"==this.gradientUnits?a.y()+a.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),d="objectBoundingBox"==this.gradientUnits?a.x()+a.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),e="objectBoundingBox"==this.gradientUnits?a.y()+a.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return b==d&&c==e?null:f.createLinearGradient(b,c,d,e)}},b.Element.linearGradient.prototype=new b.Element.GradientBase,b.Element.radialGradient=function(a){this.base=b.Element.GradientBase,this.base(a),this.getGradient=function(f,g){var a=g.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var b="objectBoundingBox"==this.gradientUnits?a.x()+a.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),c="objectBoundingBox"==this.gradientUnits?a.y()+a.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),d=b,e=c;this.attribute("fx").hasValue()&&(d="objectBoundingBox"==this.gradientUnits?a.x()+a.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(e="objectBoundingBox"==this.gradientUnits?a.y()+a.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var h="objectBoundingBox"==this.gradientUnits?(a.width()+a.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return f.createRadialGradient(d,e,0,b,c,h)}},b.Element.radialGradient.prototype=new b.Element.GradientBase,b.Element.stop=function(c){this.base=b.Element.ElementBase,this.base(c),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var a=this.style("stop-color");this.style("stop-opacity").hasValue()&&(a=a.addOpacity(this.style("stop-opacity").value)),this.color=a.value},b.Element.stop.prototype=new b.Element.ElementBase,b.Element.AnimateBase=function(a){this.base=b.Element.ElementBase,this.base(a),b.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var b=this.attribute("attributeType").value,a=this.attribute("attributeName").value;return"CSS"==b?this.parent.style(a,!0):this.parent.attribute(a,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(c){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"!=this.attribute("repeatCount").value&&"indefinite"!=this.attribute("repeatDur").value)return"remove"!=this.attribute("fill").valueOrDefault("remove")||this.removed?!1:(this.removed=!0,this.getProperty().value=this.initialValue,!0);this.duration=0}this.duration=this.duration+c;var b=!1;if(this.begin<this.duration){var a=this.calcValue();if(this.attribute("type").hasValue()){var d=this.attribute("type").value;a=d+"("+a+")"}this.getProperty().value=a,b=!0}return b},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var a={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var c=a.progress*(this.values.value.length-1),d=Math.floor(c),e=Math.ceil(c);a.from=new b.Property("from",parseFloat(this.values.value[d])),a.to=new b.Property("to",parseFloat(this.values.value[e])),a.progress=(c-d)/(e-d)}else a.from=this.from,a.to=this.to;return a}},b.Element.AnimateBase.prototype=new b.Element.ElementBase,b.Element.animate=function(a){this.base=b.Element.AnimateBase,this.base(a),this.calcValue=function(){var a=this.progress(),b=a.from.numValue()+(a.to.numValue()-a.from.numValue())*a.progress;return b+this.initialUnits}},b.Element.animate.prototype=new b.Element.AnimateBase,b.Element.animateColor=function(c){this.base=b.Element.AnimateBase,this.base(c),this.calcValue=function(){var c=this.progress(),b=new a(c.from.value),d=new a(c.to.value);if(b.ok&&d.ok){var e=b.r+(d.r-b.r)*c.progress,f=b.g+(d.g-b.g)*c.progress,g=b.b+(d.b-b.b)*c.progress;return"rgb("+parseInt(e,10)+","+parseInt(f,10)+","+parseInt(g,10)+")"}return this.attribute("from").value}},b.Element.animateColor.prototype=new b.Element.AnimateBase,b.Element.animateTransform=function(a){this.base=b.Element.AnimateBase,this.base(a),this.calcValue=function(){for(var c=this.progress(),d=b.ToNumberArray(c.from.value),f=b.ToNumberArray(c.to.value),e="",a=0;a<d.length;a++)e+=d[a]+(f[a]-d[a])*c.progress+" ";return e}},b.Element.animateTransform.prototype=new b.Element.animate,b.Element.font=function(d){this.base=b.Element.ElementBase,this.base(d),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var c=0;c<this.children.length;c++){var a=this.children[c];"font-face"==a.type?(this.fontFace=a,a.style("font-family").hasValue()&&(b.Definitions[a.style("font-family").value]=this)):"missing-glyph"==a.type?this.missingGlyph=a:"glyph"==a.type&&(""!=a.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[a.unicode]&&(this.glyphs[a.unicode]=[]),this.glyphs[a.unicode][a.arabicForm]=a):this.glyphs[a.unicode]=a)}},b.Element.font.prototype=new b.Element.ElementBase,b.Element.fontface=function(a){this.base=b.Element.ElementBase,this.base(a),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},b.Element.fontface.prototype=new b.Element.ElementBase,b.Element.missingglyph=function(a){this.base=b.Element.path,this.base(a),this.horizAdvX=0},b.Element.missingglyph.prototype=new b.Element.path,b.Element.glyph=function(a){this.base=b.Element.path,this.base(a),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},b.Element.glyph.prototype=new b.Element.path,b.Element.text=function(a){this.captureTextNodes=!0,this.base=b.Element.RenderedElementBase,this.base(a),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.style("dominant-baseline").hasValue()&&(a.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(a.textBaseline=this.style("alignment-baseline").value)},this.renderChildren=function(b){this.textAnchor=this.style("text-anchor").valueOrDefault("start"),this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y");for(var a=0;a<this.children.length;a++)this.renderChild(b,this,a)},this.renderChild=function(c,h,b){var a=h.children[b];a.attribute("x").hasValue()?a.x=a.attribute("x").toPixels("x"):(this.attribute("dx").hasValue()&&(this.y+=this.attribute("dx").toPixels("x")),a.attribute("dx").hasValue()&&(this.x+=a.attribute("dx").toPixels("x")),a.x=this.x);var f=a.measureText(c);if("start"!=this.textAnchor&&(0==b||a.attribute("x").hasValue())){for(var d=f,e=b+1;e<this.children.length;e++){var g=this.children[e];if(g.attribute("x").hasValue())break;d+=g.measureText(c)}a.x-="end"==this.textAnchor?d:d/2}this.x=a.x+f,a.attribute("y").hasValue()?a.y=a.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),a.attribute("dy").hasValue()&&(this.y+=a.attribute("dy").toPixels("y")),a.y=this.y),this.y=a.y,a.render(c);for(var b=0;b<a.children.length;b++)this.renderChild(c,a,b)}},b.Element.text.prototype=new b.Element.RenderedElementBase,b.Element.TextElementBase=function(a){this.base=b.Element.RenderedElementBase,this.base(a),this.getGlyph=function(c,b,a){var e=b[a],d=null;if(c.isArabic){var f="isolated";(0==a||" "==b[a-1])&&a<b.length-2&&" "!=b[a+1]&&(f="terminal"),a>0&&" "!=b[a-1]&&a<b.length-2&&" "!=b[a+1]&&(f="medial"),a>0&&" "!=b[a-1]&&(a==b.length-1||" "==b[a+1])&&(f="initial"),"undefined"!=typeof c.glyphs[e]&&(d=c.glyphs[e][f],null==d&&"glyph"==c.glyphs[e].type&&(d=c.glyphs[e]))}else d=c.glyphs[e];return null==d&&(d=c.missingGlyph),d},this.renderChildren=function(a){var c=this.parent.style("font-family").getDefinition();if(null==c)""!=a.fillStyle&&a.fillText(b.compressSpaces(this.getText()),this.x,this.y),""!=a.strokeStyle&&a.strokeText(b.compressSpaces(this.getText()),this.x,this.y);else{var g=this.parent.style("font-size").numValueOrDefault(b.Font.Parse(b.ctx.font).fontSize),i=this.parent.style("font-style").valueOrDefault(b.Font.Parse(b.ctx.font).fontStyle),e=this.getText();c.isRTL&&(e=e.split("").reverse().join(""));for(var h=b.ToNumberArray(this.parent.attribute("dx").value),d=0;d<e.length;d++){var j=this.getGlyph(c,e,d),f=g/c.fontFace.unitsPerEm;a.translate(this.x,this.y),a.scale(f,-f);var k=a.lineWidth;a.lineWidth=a.lineWidth*c.fontFace.unitsPerEm/g,"italic"==i&&a.transform(1,0,.4,1,0,0),j.render(a),"italic"==i&&a.transform(1,0,-.4,1,0,0),a.lineWidth=k,a.scale(1/f,-1/f),a.translate(-this.x,-this.y),this.x+=g*(j.horizAdvX||c.horizAdvX)/c.fontFace.unitsPerEm,"undefined"==typeof h[d]||isNaN(h[d])||(this.x+=h[d])}}},this.getText=function(){},this.measureText=function(c){var d=this.parent.style("font-family").getDefinition();if(null!=d){var i=this.parent.style("font-size").numValueOrDefault(b.Font.Parse(b.ctx.font).fontSize),f=0,e=this.getText();d.isRTL&&(e=e.split("").reverse().join(""));for(var g=b.ToNumberArray(this.parent.attribute("dx").value),a=0;a<e.length;a++){var j=this.getGlyph(d,e,a);f+=(j.horizAdvX||d.horizAdvX)*i/d.fontFace.unitsPerEm,"undefined"==typeof g[a]||isNaN(g[a])||(f+=g[a])}return f}var h=b.compressSpaces(this.getText());if(!c.measureText)return 10*h.length;c.save(),this.setContext(c);var k=c.measureText(h).width;return c.restore(),k}},b.Element.TextElementBase.prototype=new b.Element.RenderedElementBase,b.Element.tspan=function(a){this.captureTextNodes=!0,this.base=b.Element.TextElementBase,this.base(a),this.text=a.nodeValue||a.text||"",this.getText=function(){return this.text}},b.Element.tspan.prototype=new b.Element.TextElementBase,b.Element.tref=function(a){this.base=b.Element.TextElementBase,this.base(a),this.getText=function(){var a=this.attribute("xlink:href").getDefinition();return null!=a?a.children[0].getText():void 0}},b.Element.tref.prototype=new b.Element.TextElementBase,b.Element.a=function(a){this.base=b.Element.TextElementBase,this.base(a),this.hasText=!0;for(var c=0;c<a.childNodes.length;c++)3!=a.childNodes[c].nodeType&&(this.hasText=!1);this.text=this.hasText?a.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(a){if(this.hasText){this.baseRenderChildren(a);var d=new b.Property("fontSize",b.Font.Parse(b.ctx.font).fontSize);b.Mouse.checkBoundingBox(this,new b.BoundingBox(this.x,this.y-d.toPixels("y"),this.x+this.measureText(a),this.y))}else{var c=new b.Element.g;c.children=this.children,c.parent=this,c.render(a)}},this.onclick=function(){window.open(this.attribute("xlink:href").value)},this.onmousemove=function(){b.ctx.canvas.style.cursor="pointer"}},b.Element.a.prototype=new b.Element.TextElementBase,b.Element.image=function(e){this.base=b.Element.RenderedElementBase,this.base(e);var a=this.attribute("xlink:href").value,c=a.match(/\.svg$/);if(b.Images.push(this),this.loaded=!1,c)this.img=b.ajax(a),this.loaded=!0;else{this.img=document.createElement("img");var d=this;this.img.onload=function(){d.loaded=!0},this.img.onerror=function(){console&&console.log('ERROR: image "'+a+'" not found'),d.loaded=!0},this.img.src=a}this.renderChildren=function(a){var f=this.attribute("x").toPixels("x"),g=this.attribute("y").toPixels("y"),d=this.attribute("width").toPixels("x"),e=this.attribute("height").toPixels("y");0!=d&&0!=e&&(a.save(),c?a.drawSvg(this.img,f,g,d,e):(a.translate(f,g),b.AspectRatio(a,this.attribute("preserveAspectRatio").value,d,this.img.width,e,this.img.height,0,0),a.drawImage(this.img,0,0)),a.restore())},this.getBoundingBox=function(){var a=this.attribute("x").toPixels("x"),c=this.attribute("y").toPixels("y"),d=this.attribute("width").toPixels("x"),e=this.attribute("height").toPixels("y");return new b.BoundingBox(a,c,a+d,c+e)}},b.Element.image.prototype=new b.Element.RenderedElementBase,b.Element.g=function(a){this.base=b.Element.RenderedElementBase,this.base(a),this.getBoundingBox=function(){for(var c=new b.BoundingBox,a=0;a<this.children.length;a++)c.addBoundingBox(this.children[a].getBoundingBox());return c}},b.Element.g.prototype=new b.Element.RenderedElementBase,b.Element.symbol=function(a){this.base=b.Element.RenderedElementBase,this.base(a),this.baseSetContext=this.setContext,this.setContext=function(c){if(this.baseSetContext(c),this.attribute("viewBox").hasValue()){var a=b.ToNumberArray(this.attribute("viewBox").value),d=a[0],e=a[1];width=a[2],height=a[3],b.AspectRatio(c,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,d,e),b.ViewPort.SetCurrent(a[2],a[3])}}},b.Element.symbol.prototype=new b.Element.RenderedElementBase,b.Element.style=function(o){this.base=b.Element.ElementBase,this.base(o);for(var d="",a=0;a<o.childNodes.length;a++)d+=o.childNodes[a].nodeValue;d=d.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),d=b.compressSpaces(d);for(var k=d.split("}"),a=0;a<k.length;a++)if(""!=b.trim(k[a]))for(var t=k[a].split("{"),r=t[0].split(","),f=t[1].split(";"),p=0;p<r.length;p++){var j=b.trim(r[p]);if(""!=j){for(var h={},c=0;c<f.length;c++){var m=f[c].indexOf(":"),i=f[c].substr(0,m),q=f[c].substr(m+1,f[c].length-m);null!=i&&null!=q&&(h[b.trim(i)]=new b.Property(b.trim(i),b.trim(q)))}if(b.Styles[j]=h,"@font-face"==j)for(var u=h["font-family"].value.replace(/"/g,""),g=h.src.value.split(","),e=0;e<g.length;e++)if(g[e].indexOf('format("svg")')>0)for(var n=g[e].indexOf("url"),v=g[e].indexOf(")",n),w=g[e].substr(n+5,v-n-6),x=b.parseXml(b.ajax(w)),s=x.getElementsByTagName("font"),l=0;l<s.length;l++){var y=b.CreateElement(s[l]);b.Definitions[u]=y}}}},b.Element.style.prototype=new b.Element.ElementBase,b.Element.use=function(a){this.base=b.Element.RenderedElementBase,this.base(a),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.attribute("x").hasValue()&&a.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&a.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var a=this.attribute("xlink:href").getDefinition();return this.attribute("width").hasValue()&&(a.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(a.attribute("height",!0).value=this.attribute("height").value),a},this.path=function(b){var a=this.getDefinition();null!=a&&a.path(b)},this.renderChildren=function(b){var a=this.getDefinition();if(null!=a){var c=a.parent;a.parent=null,a.render(b),a.parent=c}}},b.Element.use.prototype=new b.Element.RenderedElementBase,b.Element.mask=function(a){this.base=b.Element.ElementBase,this.base(a),this.apply=function(j,f){var c=this.attribute("x").toPixels("x"),d=this.attribute("y").toPixels("y"),e=this.attribute("width").toPixels("x"),b=this.attribute("height").toPixels("y"),k=f.attribute("mask").value;f.attribute("mask").value="";var h=document.createElement("canvas");h.width=c+e,h.height=d+b;var i=h.getContext("2d");this.renderChildren(i);var g=document.createElement("canvas");g.width=c+e,g.height=d+b;var a=g.getContext("2d");f.render(a),a.globalCompositeOperation="destination-in",a.fillStyle=i.createPattern(h,"no-repeat"),a.fillRect(0,0,c+e,d+b),j.fillStyle=a.createPattern(g,"no-repeat"),j.fillRect(0,0,c+e,d+b),f.attribute("mask").value=k},this.render=function(a){}},b.Element.mask.prototype=new b.Element.ElementBase,b.Element.clipPath=function(a){this.base=b.Element.ElementBase,this.base(a),this.apply=function(b){for(var a=0;a<this.children.length;a++)this.children[a].path&&(this.children[a].path(b),b.clip())},this.render=function(a){}},b.Element.clipPath.prototype=new b.Element.ElementBase,b.Element.filter=function(a){this.base=b.Element.ElementBase,this.base(a),this.apply=function(m,a){var h=a.getBoundingBox(),f=this.attribute("x").toPixels("x"),g=this.attribute("y").toPixels("y");("image"==a.type||0==f||0==g)&&(f=h.x1,g=h.y1);var b=this.attribute("width").toPixels("x"),c=this.attribute("height").toPixels("y");("image"==a.type||0==b||0==c)&&(b=h.width(),c=h.height());var n=a.style("filter").value;a.style("filter").value="";var l="image"==a.type?0:.2,d=l*b,e=l*c,i=document.createElement("canvas");i.width=b+2*d,i.height=c+2*e;var k=i.getContext("2d");k.translate(-f+d,-g+e),a.render(k);for(var j=0;j<this.children.length;j++)this.children[j].apply(k,0,0,b+2*d,c+2*e);m.drawImage(i,0,0,b+2*d,c+2*e,f-d,g-e,b+2*d,c+2*e),a.style("filter",!0).value=n},this.render=function(a){}},b.Element.filter.prototype=new b.Element.ElementBase,b.Element.feColorMatrix=function(d){function a(a,b,c,d,f,e){return a[c*d*4+4*b+e]}function c(a,b,c,d,g,e,f){a[c*d*4+4*b+e]=f}this.base=b.Element.ElementBase,this.base(d),this.apply=function(h,e,f,b,d){for(var g=h.getImageData(0,0,b,d),f=0;d>f;f++)for(var e=0;b>e;e++){var j=a(g.data,e,f,b,d,0),k=a(g.data,e,f,b,d,1),l=a(g.data,e,f,b,d,2),i=(j+k+l)/3;c(g.data,e,f,b,d,0,i),c(g.data,e,f,b,d,1,i),c(g.data,e,f,b,d,2,i)}h.clearRect(0,0,b,d),h.putImageData(g,0,0)}},b.Element.filter.prototype=new b.Element.feColorMatrix,b.Element.feGaussianBlur=function(d){function e(a){a=Math.max(a,.01);var c=Math.ceil(4*a)+1;mask=[];for(var b=0;c>b;b++)mask[b]=Math.exp(-.5*(b/a)*(b/a));return mask}function f(a){for(var c=0,b=1;b<a.length;b++)c+=Math.abs(a[b]);c=2*c+Math.abs(a[0]);for(var b=0;b<a.length;b++)a[b]/=c;return a}function c(i,o,k,b,f){for(var d=0;f>d;d++)for(var c=0;b>c;c++)for(var j=a(i,c,d,b,f,3)/255,e=0;4>e;e++){for(var n=k[0]*(0==j?255:a(i,c,d,b,f,e))*(0==j||3==e?1:j),h=1;h<k.length;h++){var l=a(i,Math.max(c-h,0),d,b,f,3)/255,m=a(i,Math.min(c+h,b-1),d,b,f,3)/255;n+=k[h]*((0==l?255:a(i,Math.max(c-h,0),d,b,f,e))*(0==l||3==e?1:l)+(0==m?255:a(i,Math.min(c+h,b-1),d,b,f,e))*(0==m||3==e?1:m))}g(o,d,c,f,b,e,n)}}function a(a,b,c,d,f,e){return a[c*d*4+4*b+e]}function g(a,b,c,d,g,e,f){a[c*d*4+4*b+e]=f}function h(g,a,b,i){var h=g.getImageData(0,0,a,b),d=e(i);d=f(d),tmp=[],c(h.data,tmp,d,a,b),c(tmp,h.data,d,b,a),g.clearRect(0,0,a,b),g.putImageData(h,0,0)}this.base=b.Element.ElementBase,this.base(d),this.apply=function(a,d,e,b,c){h(a,b,c,this.attribute("stdDeviation").numValue())}},b.Element.filter.prototype=new b.Element.feGaussianBlur,b.Element.title=function(a){},b.Element.title.prototype=new b.Element.ElementBase,b.Element.desc=function(a){},b.Element.desc.prototype=new b.Element.ElementBase,b.Element.MISSING=function(a){console&&console.log("ERROR: Element '"+a.nodeName+"' not yet implemented.")},b.Element.MISSING.prototype=new b.Element.ElementBase,b.CreateElement=function(a){var c=a.nodeName.replace(/^[^:]+:/,"");c=c.replace(/\-/g,"");var d=null;return d="undefined"!=typeof b.Element[c]?new b.Element[c](a):new b.Element.MISSING(a),d.type=a.nodeName,d},b.load=function(a,c){b.loadXml(a,b.ajax(c))},b.loadXml=function(a,c){b.loadXmlDoc(a,b.parseXml(c))},b.loadXmlDoc=function(c,h){b.init(c);var e=function(a){for(var b=c.canvas;b;)a.x-=b.offsetLeft,a.y-=b.offsetTop,b=b.offsetParent;return window.scrollX&&(a.x+=window.scrollX),window.scrollY&&(a.y+=window.scrollY),a};1!=b.opts.ignoreMouse&&(c.canvas.onclick=function(a){var c=e(new b.Point(null!=a?a.clientX:event.clientX,null!=a?a.clientY:event.clientY));b.Mouse.onclick(c.x,c.y)},c.canvas.onmousemove=function(a){var c=e(new b.Point(null!=a?a.clientX:event.clientX,null!=a?a.clientY:event.clientY));b.Mouse.onmousemove(c.x,c.y)});var a=b.CreateElement(h.documentElement);a.root=!0;var f=!0,g=function(){b.ViewPort.Clear(),c.canvas.parentNode&&b.ViewPort.SetCurrent(c.canvas.parentNode.clientWidth,c.canvas.parentNode.clientHeight),1!=b.opts.ignoreDimensions&&(a.style("width").hasValue()&&(c.canvas.width=a.style("width").toPixels("x"),c.canvas.style.width=c.canvas.width+"px"),a.style("height").hasValue()&&(c.canvas.height=a.style("height").toPixels("y"),c.canvas.style.height=c.canvas.height+"px"));var d=c.canvas.clientWidth||c.canvas.width,e=c.canvas.clientHeight||c.canvas.height;if(1==b.opts.ignoreDimensions&&a.style("width").hasValue()&&a.style("height").hasValue()&&(d=a.style("width").toPixels("x"),e=a.style("height").toPixels("y")),b.ViewPort.SetCurrent(d,e),null!=b.opts.offsetX&&(a.attribute("x",!0).value=b.opts.offsetX),null!=b.opts.offsetY&&(a.attribute("y",!0).value=b.opts.offsetY),null!=b.opts.scaleWidth&&null!=b.opts.scaleHeight){var h=1,i=1,g=b.ToNumberArray(a.attribute("viewBox").value);a.attribute("width").hasValue()?h=a.attribute("width").toPixels("x")/b.opts.scaleWidth:isNaN(g[2])||(h=g[2]/b.opts.scaleWidth),a.attribute("height").hasValue()?i=a.attribute("height").toPixels("y")/b.opts.scaleHeight:isNaN(g[3])||(i=g[3]/b.opts.scaleHeight),a.attribute("width",!0).value=b.opts.scaleWidth,a.attribute("height",!0).value=b.opts.scaleHeight,a.attribute("viewBox",!0).value="0 0 "+d*h+" "+e*i,a.attribute("preserveAspectRatio",!0).value="none"}1!=b.opts.ignoreClear&&c.clearRect(0,0,d,e),a.render(c),f&&(f=!1,"function"==typeof b.opts.renderCallback&&b.opts.renderCallback())},d=!0;b.ImagesLoaded()&&(d=!1,g()),b.intervalID=setInterval(function(){var a=!1;if(d&&b.ImagesLoaded()&&(d=!1,a=!0),1!=b.opts.ignoreMouse&&(a|=b.Mouse.hasEvents()),1!=b.opts.ignoreAnimation)for(var c=0;c<b.Animations.length;c++)a|=b.Animations[c].update(1e3/b.FRAMERATE);"function"==typeof b.opts.forceRedraw&&1==b.opts.forceRedraw()&&(a=!0),a&&(g(),b.Mouse.runEvents())},1e3/b.FRAMERATE)},b.stop=function(){b.intervalID&&clearInterval(b.intervalID)},b.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(a,b){this.events.push({type:"onclick",x:a,y:b,run:function(a){a.onclick&&a.onclick()}})},this.onmousemove=function(a,b){this.events.push({type:"onmousemove",x:a,y:b,run:function(a){a.onmousemove&&a.onmousemove()}})},this.eventElements=[],this.checkPath=function(d,b){for(var a=0;a<this.events.length;a++){var c=this.events[a];b.isPointInPath&&b.isPointInPath(c.x,c.y)&&(this.eventElements[a]=d)}},this.checkBoundingBox=function(c,d){for(var a=0;a<this.events.length;a++){var b=this.events[a];d.isPointInBox(b.x,b.y)&&(this.eventElements[a]=c)}},this.runEvents=function(){b.ctx.canvas.style.cursor="";for(var a=0;a<this.events.length;a++)for(var d=this.events[a],c=this.eventElements[a];c;)d.run(c),c=c.parent;this.events=[],this.eventElements=[]}},b}this.canvg=function(a,d,f){if(null!=a||null!=d||null!=f){f=f||{},"string"==typeof a&&(a=document.getElementById(a)),null!=a.svg&&a.svg.stop();var e=b();(1!=a.childNodes.length||"OBJECT"!=a.childNodes[0].nodeName)&&(a.svg=e),e.opts=f;var h=a.getContext("2d");"undefined"!=typeof d.documentElement?e.loadXmlDoc(h,d):"<"==d.substr(0,1)?e.loadXml(h,d):e.load(h,d)}else for(var j=document.getElementsByTagName("svg"),i=0;i<j.length;i++){var c=j[i],g=document.createElement("canvas");g.width=c.clientWidth,g.height=c.clientHeight,c.parentNode.insertBefore(g,c),c.parentNode.removeChild(c);var k=document.createElement("div");k.appendChild(c),canvg(g,k.innerHTML)}}}(),window.CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(a,b,c,d,e){canvg(this.canvas,a,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:b,offsetY:c,scaleWidth:d,scaleHeight:e})}),function(z,y){var a,w,s,v,x,c,h,n,j,t,o,d,b,m,e,k,p,q,u,r,g,i,l,f;a=function(b){return new a.prototype.init(b)},"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=a:z.Globalize=a,a.cultures={},a.prototype={constructor:a,init:function(b){return this.cultures=a.cultures,this.cultureSelector=b,this}},a.prototype.init.prototype=a.prototype,a.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"
}}},messages:{}},a.cultures["default"].calendar=a.cultures["default"].calendars.standard,a.cultures.en=a.cultures["default"],a.cultureSelector="en",w=/^0x[a-f0-9]+$/i,s=/^[+\-]?infinity$/i,v=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,x=/^\s+|\s+$/g,c=function(a,c){if(a.indexOf)return a.indexOf(c);for(var b=0,d=a.length;d>b;b++)if(a[b]===c)return b;return-1},h=function(a,b){return a.substr(a.length-b.length)===b},n=function(){var f,d,c,b,g,h,a=arguments[0]||{},e=1,k=arguments.length,i=!1;for("boolean"==typeof a&&(i=a,a=arguments[1]||{},e=2),"object"==typeof a||t(a)||(a={});k>e;e++)if(null!=(f=arguments[e]))for(d in f)c=a[d],b=f[d],a!==b&&(i&&b&&(o(b)||(g=j(b)))?(g?(g=!1,h=c&&j(c)?c:[]):h=c&&o(c)?c:{},a[d]=n(i,h,b)):b!==y&&(a[d]=b));return a},j=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},t=function(a){return"[object Function]"===Object.prototype.toString.call(a)},o=function(a){return"[object Object]"===Object.prototype.toString.call(a)},d=function(a,b){return 0===a.indexOf(b)},b=function(a){return(a+"").replace(x,"")},m=function(a){return isNaN(a)?NaN:Math[0>a?"ceil":"floor"](a)},e=function(a,c,d){var b;for(b=a.length;c>b;b+=1)a=d?"0"+a:a+"0";return a},k=function(d,b){for(var e=0,a=!1,c=0,g=d.length;g>c;c++){var f=d.charAt(c);switch(f){case"'":a?b.push("'"):e++,a=!1;break;case"\\":a&&b.push("\\"),a=!a;break;default:b.push(f),a=!1}}return e},p=function(d,a){a=a||"F";var b,e=d.patterns,c=a.length;if(1===c){if(b=e[a],!b)throw"Invalid date format string '"+a+"'.";a=b}else 2===c&&"%"===a.charAt(0)&&(a=a.charAt(1));return a},q=function(b,f,o){function e(d,a){var b,c=d+"";return a>1&&c.length<a?(b=C[a-2]+c,b.substr(b.length-a,a)):b=c}function B(){return l||v?l:(l=E.test(f),v=!0,l)}function t(a,b){if(n)return n[b];switch(b){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate();default:throw"Invalid part value "+b}}var a,c=o.calendar,s=c.convert;if(!f||!f.length||"i"===f){if(o&&o.name.length)if(s)a=q(b,c.patterns.F,o);else{var w=new Date(b.getTime()),F=g(b,c.eras);w.setFullYear(i(b,c,F)),a=w.toLocaleString()}else a=b.toString();return a}var A=c.eras,z="s"===f;f=p(c,f),a=[];var h,l,v,n,C=["0","00","000"],E=/([^d]|^)(d|dd)([^d]|$)/g,x=0,y=r();for(!z&&s&&(n=s.fromGregorian(b));;){var H=y.lastIndex,m=y.exec(f),D=f.slice(H,m?m.index:f.length);if(x+=k(D,a),!m)break;if(x%2)a.push(m[0]);else{var u=m[0],d=u.length;switch(u){case"ddd":case"dddd":var G=3===d?c.days.namesAbbr:c.days.names;a.push(G[b.getDay()]);break;case"d":case"dd":l=!0,a.push(e(t(b,2),d));break;case"MMM":case"MMMM":var j=t(b,1);a.push(c.monthsGenitive&&B()?c.monthsGenitive[3===d?"namesAbbr":"names"][j]:c.months[3===d?"namesAbbr":"names"][j]);break;case"M":case"MM":a.push(e(t(b,1)+1,d));break;case"y":case"yy":case"yyyy":j=n?n[0]:i(b,c,g(b,A),z),4>d&&(j%=100),a.push(e(j,d));break;case"h":case"hh":h=b.getHours()%12,0===h&&(h=12),a.push(e(h,d));break;case"H":case"HH":a.push(e(b.getHours(),d));break;case"m":case"mm":a.push(e(b.getMinutes(),d));break;case"s":case"ss":a.push(e(b.getSeconds(),d));break;case"t":case"tt":j=b.getHours()<12?c.AM?c.AM[0]:" ":c.PM?c.PM[0]:" ",a.push(1===d?j.charAt(0):j);break;case"f":case"ff":case"fff":a.push(e(b.getMilliseconds(),3).substr(0,d));break;case"z":case"zz":h=b.getTimezoneOffset()/60,a.push((0>=h?"+":"-")+e(Math.floor(Math.abs(h)),d));break;case"zzz":h=b.getTimezoneOffset()/60,a.push((0>=h?"+":"-")+e(Math.floor(Math.abs(h)),2)+":"+e(Math.abs(b.getTimezoneOffset()%60),2));break;case"g":case"gg":c.eras&&a.push(c.eras[g(b,A)].name);break;case"/":a.push(c["/"]);break;default:throw"Invalid date format pattern '"+u+"'."}}}return a.join("")},function(){var a;a=function(j,i,m){var l=m.groupSizes,h=l[0],k=1,p=Math.pow(10,i),o=Math.round(j*p)/p;isFinite(o)||(o=j),j=o;var b=j+"",a="",f=b.split(/e/i),c=f.length>1?parseInt(f[1],10):0;b=f[0],f=b.split("."),b=f[0],a=f.length>1?f[1]:"";c>0?(a=e(a,c,!1),b+=a.slice(0,c),a=a.substr(c)):0>c&&(c=-c,b=e(b,c+1,!0),a=b.slice(-c,b.length)+a,b=b.slice(0,-c)),a=i>0?m["."]+(a.length>i?a.slice(0,i):e(a,i)):"";for(var d=b.length-1,n=m[","],g="";d>=0;){if(0===h||h>d)return b.slice(0,d+1)+(g.length?n+g+a:a);g=b.slice(d-h+1,d+1)+(g.length?n+g:""),d-=h,k<l.length&&(h=l[k],k++)}return b.slice(0,d+1)+n+g+a},u=function(d,f,k){if(!isFinite(d))return d===1/0?k.numberFormat.positiveInfinity:d===-(1/0)?k.numberFormat.negativeInfinity:k.numberFormat.NaN;if(!f||"i"===f)return k.name.length?d.toLocaleString():d.toString();f=f||"D";var j,g=k.numberFormat,b=Math.abs(d),i=-1;f.length>1&&(i=parseInt(f.slice(1),10));var c,n=f.charAt(0).toUpperCase();switch(n){case"D":j="n",b=m(b),-1!==i&&(b=e(""+b,i,!0)),0>d&&(b="-"+b);break;case"N":c=g;case"C":c=c||g.currency;case"P":c=c||g.percent,j=0>d?c.pattern[0]:c.pattern[1]||"n",-1===i&&(i=c.decimals),b=a(b*("P"===n?100:1),i,c);break;default:throw"Bad number format specifier: "+n}for(var o=/n|\$|-|%/g,h="";;){var p=o.lastIndex,l=o.exec(j);if(h+=j.slice(p,l?l.index:j.length),!l)break;switch(l[0]){case"n":h+=b;break;case"$":h+=g.currency.symbol;break;case"-":/[1-9]/.test(b)&&(h+=g["-"]);break;case"%":h+=g.percent.symbol}}return h}}(),r=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},g=function(d,b){if(!b)return 0;for(var c,e=d.getTime(),a=0,f=b.length;f>a;a++)if(c=b[a].start,null===c||e>=c)return a;return 0},i=function(c,a,d,e){var b=c.getFullYear();return!e&&a.eras&&(b-=a.eras[d].offset),b},function(){var h,j,m,n,a,f,e;h=function(c,a){if(100>a){var d=new Date,f=g(d),e=i(d,c,f),b=c.twoDigitYearMax;b="string"==typeof b?(new Date).getFullYear()%100+parseInt(b,10):b,a+=e-e%100,a>b&&(a-=100)}return a},j=function(g,a,i){var b,h=g.days,d=g._upperDays;return d||(g._upperDays=d=[e(h.names),e(h.namesAbbr),e(h.namesShort)]),a=f(a),i?(b=c(d[1],a),-1===b&&(b=c(d[2],a))):b=c(d[0],a),b},m=function(a,b,i){var j=a.months,k=a.monthsGenitive||a.months,d=a._upperMonths,g=a._upperMonthsGen;d||(a._upperMonths=d=[e(j.names),e(j.namesAbbr)],a._upperMonthsGen=g=[e(k.names),e(k.namesAbbr)]),b=f(b);var h=c(i?d[1]:d[0],b);return 0>h&&(h=c(i?g[1]:g[0],b)),h},n=function(h,i){var d=h._parseRegExp;if(d){var n=d[i];if(n)return n}else h._parseRegExp=d={};for(var c,f=p(h,i).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),b=["^"],m=[],e=0,j=0,l=r();null!==(c=l.exec(f));){var o=f.slice(e,c.index);if(e=l.lastIndex,j+=k(o,b),j%2)b.push(c[0]);else{var a,g=c[0],q=g.length;switch(g){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":a="(\\D+)";break;case"tt":case"t":a="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":a="(\\d{"+q+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":a="(\\d\\d?)";break;case"zzz":a="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":a="([+-]?\\d\\d?)";break;case"/":a="(\\/)";break;default:throw"Invalid date format pattern '"+g+"'."}a&&b.push(a),m.push(c[0])}}k(f.slice(e),b),b.push("$");var s=b.join("").replace(/\s+/g,"\\s+"),t={regExp:s,groups:m};return d[i]=t},a=function(a,b,c){return b>a||a>c},f=function(a){return a.split("").join(" ").toUpperCase()},e=function(b){for(var c=[],a=0,d=b.length;d>a;a++)c[a]=f(b[a]);return c},l=function(C,M,O){C=b(C);var c=O.calendar,J=n(c,M),H=new RegExp(J.regExp).exec(C);if(null===H)return null;for(var p,G=J.groups,A=null,l=null,k=null,o=null,r=null,i=0,D=0,E=0,x=0,q=null,z=!1,t=0,L=G.length;L>t;t++){var f=H[t+1];if(f){var F=G[t],w=F.length,g=parseInt(f,10);switch(F){case"dd":case"d":if(o=g,a(o,1,31))return null;break;case"MMM":case"MMMM":if(k=m(c,f,3===w),a(k,0,11))return null;break;case"M":case"MM":if(k=g-1,a(k,0,11))return null;break;case"y":case"yy":case"yyyy":if(l=4>w?h(c,g):g,a(l,0,9999))return null;break;case"h":case"hh":if(i=g,12===i&&(i=0),a(i,0,11))return null;break;case"H":case"HH":if(i=g,a(i,0,23))return null;break;case"m":case"mm":if(D=g,a(D,0,59))return null;break;case"s":case"ss":if(E=g,a(E,0,59))return null;break;case"tt":case"t":if(z=c.PM&&(f===c.PM[0]||f===c.PM[1]||f===c.PM[2]),!z&&(!c.AM||f!==c.AM[0]&&f!==c.AM[1]&&f!==c.AM[2]))return null;break;case"f":case"ff":case"fff":if(x=g*Math.pow(10,3-w),a(x,0,999))return null;break;case"ddd":case"dddd":if(r=j(c,f,3===w),a(r,0,6))return null;break;case"zzz":var B=f.split(/:/);if(2!==B.length)return null;if(p=parseInt(B[0],10),a(p,-12,13))return null;var y=parseInt(B[1],10);if(a(y,0,59))return null;q=60*p+(d(f,"-")?-y:y);break;case"z":case"zz":if(p=g,a(p,-12,13))return null;q=60*p;break;case"g":case"gg":var s=f;if(!s||!c.eras)return null;s=b(s.toLowerCase());for(var u=0,N=c.eras.length;N>u;u++)if(s===c.eras[u].name.toLowerCase()){A=u;break}if(null===A)return null}}}var I,e=new Date,v=c.convert;if(I=v?v.fromGregorian(e)[0]:e.getFullYear(),null===l?l=I:c.eras&&(l+=c.eras[A||0].offset),null===k&&(k=0),null===o&&(o=1),v){if(e=v.toGregorian(l,k,o),null===e)return null}else{if(e.setFullYear(l,k,o),e.getDate()!==o)return null;if(null!==r&&e.getDay()!==r)return null}if(z&&12>i&&(i+=12),e.setHours(i,D,E,x),null!==q){var K=e.getMinutes()-(q+e.getTimezoneOffset());e.setHours(e.getHours()+parseInt(K/60,10),K%60)}return e}}(),f=function(a,f,g){var e,b=f["-"],c=f["+"];switch(g){case"n -":b=" "+b,c=" "+c;case"n-":h(a,b)?e=["-",a.substr(0,a.length-b.length)]:h(a,c)&&(e=["+",a.substr(0,a.length-c.length)]);break;case"- n":b+=" ",c+=" ";case"-n":d(a,b)?e=["-",a.substr(b.length)]:d(a,c)&&(e=["+",a.substr(c.length)]);break;case"(n)":d(a,"(")&&h(a,")")&&(e=["-",a.substr(1,a.length-2)])}return e||["",a]},a.prototype.findClosestCulture=function(b){return a.findClosestCulture.call(this,b)},a.prototype.format=function(b,c,d){return a.format.call(this,b,c,d)},a.prototype.localize=function(b,c){return a.localize.call(this,b,c)},a.prototype.parseInt=function(b,c,d){return a.parseInt.call(this,b,c,d)},a.prototype.parseFloat=function(b,c,d){return a.parseFloat.call(this,b,c,d)},a.prototype.culture=function(b){return a.culture.call(this,b)},a.addCultureInfo=function(a,c,d){var b={},e=!1;"string"!=typeof a?(d=a,a=this.culture().name,b=this.cultures[a]):"string"!=typeof c?(d=c,e=null==this.cultures[a],b=this.cultures[a]||this.cultures["default"]):(e=!0,b=this.cultures[c]),this.cultures[a]=n(!0,{},b,d),e&&(this.cultures[a].calendar=this.cultures[a].calendars.standard)},a.findClosestCulture=function(c){var f;if(!c)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];if("string"==typeof c&&(c=c.split(",")),j(c)){var d,a,h=this.cultures,l=c,i=l.length,g=[];for(a=0;i>a;a++){c=b(l[a]);var e,k=c.split(";");d=b(k[0]),1===k.length?e=1:(c=b(k[1]),0===c.indexOf("q=")?(c=c.substr(2),e=parseFloat(c),e=isNaN(e)?0:e):e=1),g.push({lang:d,pri:e})}for(g.sort(function(a,b){return a.pri<b.pri?1:a.pri>b.pri?-1:0}),a=0;i>a;a++)if(d=g[a].lang,f=h[d])return f;for(a=0;i>a;a++)for(d=g[a].lang;;){var m=d.lastIndexOf("-");if(-1===m)break;if(d=d.substr(0,m),f=h[d])return f}for(a=0;i>a;a++){d=g[a].lang;for(var o in h){var n=h[o];if(n.language==d)return n}}}else if("object"==typeof c)return c;return f||null},a.format=function(a,b,d){var c=this.findClosestCulture(d);return a instanceof Date?a=q(a,b,c):"number"==typeof a&&(a=u(a,b,c)),a},a.localize=function(a,b){return this.findClosestCulture(b).messages[a]||this.cultures["default"].messages[a]},a.parseDate=function(f,a,b){b=this.findClosestCulture(b);var c,g,d;if(a){if("string"==typeof a&&(a=[a]),a.length)for(var e=0,i=a.length;i>e;e++){var h=a[e];if(h&&(c=l(f,h,b)))break}}else{d=b.calendar.patterns;for(g in d)if(c=l(f,d[g],b))break}return c||null},a.parseInt=function(b,c,d){return m(a.parseFloat(b,c,d))},a.parseFloat=function(a,l,r){"number"!=typeof l&&(r=l,l=10);var e=this.findClosestCulture(r),k=NaN,b=e.numberFormat;if(a.indexOf(e.numberFormat.currency.symbol)>-1&&(a=a.replace(e.numberFormat.currency.symbol,""),a=a.replace(e.numberFormat.currency["."],e.numberFormat["."])),a.indexOf(e.numberFormat.percent.symbol)>-1&&(a=a.replace(e.numberFormat.percent.symbol,"")),a=a.replace(/ /g,""),s.test(a))k=parseFloat(a);else if(!l&&w.test(a))k=parseInt(a,16);else{var c=f(a,b,b.pattern[0]),h=c[0],g=c[1];""===h&&"(n)"!==b.pattern[0]&&(c=f(a,b,"(n)"),h=c[0],g=c[1]),""===h&&"-n"!==b.pattern[0]&&(c=f(a,b,"-n"),h=c[0],g=c[1]),h=h||"+";var n,i,j=g.indexOf("e");0>j&&(j=g.indexOf("E")),0>j?(i=g,n=null):(i=g.substr(0,j),n=g.substr(j+1));var d,m,x=b["."],p=i.indexOf(x);0>p?(d=i,m=null):(d=i.substr(0,p),m=i.substr(p+x.length));var q=b[","];d=d.split(q).join("");var t=q.replace(/\u00A0/g," ");q!==t&&(d=d.split(t).join(""));var o=h+d;if(null!==m&&(o+="."+m),null!==n){var u=f(n,b,"-n");o+="e"+(u[0]||"+")+u[1]}v.test(o)&&(k=parseFloat(o))}return k},a.culture=function(a){return"undefined"!=typeof a&&(this.cultureSelector=a),this.findClosestCulture(a)||this.cultures["default"]}}(this),function(b,g,j){function R(a){var b,c="";a=Math.abs(a);do b=a%26,c=String.fromCharCode(b+97)+c,a=(a-b)/26;while(a>0);return c}function _(){return C+R(P++)}function L(){return Q++}function N(){var b=[8,9,"a","b"],a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-4"+a().substr(0,3)+"-"+b[Math.floor(4*Math.random())]+a().substr(0,3)+"-"+a()+a()+a()}function $(a,b){return typeof Globalize===f&&typeof Globalize.format===f?Globalize.parseDate(a,b):new Date(a)}function W(b){var c;return c=a.defined(b)&&typeof Globalize===f&&typeof Globalize.parseFloat===f?Globalize.parseFloat(b):Number(b),isNaN(c)?null:c}function B(c){if(!a.defined(c)||""===c)return"";var d=/\{([\.\d\w\:\-\/\' \[\]]+)\}/g,b=arguments,e=b&&b.length>1&&typeof b[1]===s,g=typeof Globalize===f&&typeof Globalize.format===f;return c.replace(d,function(i,a){var c,d,f=a.indexOf(":");if(f>0){var h=a;a=h.substring(0,f),d=h.substring(f+1)}return c=e?/^\d+$/.test(a)?b[parseInt(a,10)+1]:J(b[1],a):b[parseInt(a,10)+1],d&&g&&(c=Globalize.format(c,d)),c})}function u(b){if(a.func(b)){var c=[].slice.call(arguments);return c.shift(),b.apply(this,c)}return B.apply(this,arguments)}function T(){return typeof Globalize===f&&Globalize.cultures&&Globalize.cultures[Globalize.cultureSelector]&&Globalize.cultures[Globalize.cultureSelector].calendar?Globalize.cultures[Globalize.cultureSelector].calendar:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},firstDay:0,months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]}}}function O(){return typeof Globalize===f&&Globalize.cultures&&Globalize.cultures[Globalize.cultureSelector]&&Globalize.cultures[Globalize.cultureSelector].numberFormat?Globalize.cultures[Globalize.cultureSelector].numberFormat.currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}}function S(a,b){if(b=b!==j?b:m.dieOnError)throw new Error(a);g.console&&(g.console.error?console.error(a):console.log(a))}function e(a){var b=Object.prototype.toString.call(a);return null===a?"null":a===j?"undefined":b.substr(8,b.length-9).toLowerCase()}function t(f){var g,h,e,i,c,l=Array.apply(null,arguments),m=a.array(f)&&f.length&&!q(f,function(b){return!a.func(b)}).length,d=l[1],n=function(a,b){return a instanceof b};if(!m)return k.apply(b,l);for(a.object(d)||a.array(d)||(d={}),h=2;h<l.length;h++)if(g=l[h])for(e in g)g.hasOwnProperty(e)&&(c=g[e],i=d[e],c&&q(f,z(n,null,c)).length?d[e]=c:a.object(c)||a.array(c)?(a.object(i)||(i=d[e]=a.array(c)?[]:{}),d[e]=t(f,i,c)):a.date(c)?d[e]=new Date(c.getTime()):c!==j&&(d[e]=c));return d}function E(b){var a,c=[];for(a in b)b.hasOwnProperty(a)&&c.push(a);return c}function J(d,b){var c;if(!a.string(b))throw new Error("shield.get: parameter 'path' must be a string.");if(b=A(b),c=I[b])return c(d);try{c=new Function("a","try{return a"+b+"}catch(e){return arguments[1];}")}catch(e){throw new Error("shield.get: invalid 'path' parameter")}return I[b]=c,c(d)}function X(d,b,e){var c;if(!a.string(b))throw new Error("shield.set: parameter 'path' must be a string");if(b=A(b),c=H[b])return c(d,e);try{c=new Function("obj,val","obj"+b+"=val;")}catch(f){throw new Error("shield.set: invalid 'path' parameter")}return H[b]=c,c(d,e),d}function A(g){var d,b,f,a,e,c=g.split(".");for(b=0,f=c.length;f>b;b++)a=c[b],d=a.indexOf("["),a&&(0>d?(e=a.indexOf("'")<0?"'":'"',a=c[b]="["+e+a+e+"]"):d>0&&(a=c[b]="."+a));return c.join("")}function U(a,c){m.ui[a]=c,b.fn[C+a]=function(d){var e,g=this;return typeof d===F?(e=[].slice.call(arguments,1),this.each(function(){var c,h,i=b.data(this,n);if(!i)throw new Error(u("shield: cannot call method '{0}' on uninitialized {1}.",d,a));if(c=i[d],typeof c!==f)throw new Error(u("shield: cannot find method '{0}' of {1}",d,a));return h=c.apply(i,e),h!==j?(g=h,!1):void 0}),g):this.each(function(){var e=new c(this,d);b(this).data(n,e),b(this).data(n+"-"+a,e)})}}function i(a){a?d.onselectstart==i.handler&&(d.onselectstart=i.onselectstart,d.ondragstart=i.ondragstart):d.onselectstart!=i.handler&&(i.onselectstart=d.onselectstart,i.ondragstart=d.ondragstart,d.onselectstart=d.ondragstart=i.handler)}var m=g.shield=g.shield||{},k=b.extend,q=b.grep,z=b.proxy,c=navigator.userAgent,d=document,C="shield",n="shieldWidget",s="object",F="string",f="function",v="array",w="number",x="date",M="boolean",K="null",G="undefined",D="sui-vc-top",r=function(){},P=100,Q=1e3,h={},I={},H={},p=function(){},V={SVG_NS:"http://www.w3.org/2000/svg",XHTML_NS:"http://www.w3.org/1999/xhtml",KeyCode:{BACK:8,TAB:9,ENTER:13,CTRL:17,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:46}};p.extend=function(a){var f,b,c,h,g=this,d=a&&a.init?a.init:function(){g.apply(this,arguments)},i=function(){};i.prototype=g.prototype,f=d.fn=d.prototype=new i;for(b in a)a.hasOwnProperty(b)&&(c=a[b],h=e(c),c&&typeof c===s?f[b]=k(!0,h===v?[]:{},g.prototype[b],c):f[b]=c);return f.constructor=d,d.extend=g.extend,d},Date.prototype.toISOString||!function(){function a(b){var a=String(b);return 1===a.length&&(a="0"+a),a}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),b.fn.swidget=function(c){var a=this.map(function(a){return c?b(this).data(n+"-"+c):b(this).data(n)}).get();return a.length?a.length>1?a:a[0]:null};var l=p.extend({init:function(b){var a,d=this,c=(b||{}).events;d.events={},b=b||{};for(a in c)typeof c[a]===f&&d.on(a,c[a])},on:function(b,f,m){var h,c,e,l,i,g=this,k=g.events,d=o.array(b),j=a.func(f);if(a.object(b)){d=[];for(i in b)b.hasOwnProperty(i)&&d.push(i);j=!1,f=b}for(e=0,l=d.length;l>e;e++)b=d[e],h=g._eventType(b),c=j?f:f[b],a.func(c)&&(m&&(c=g._one(b,c)),(k[h]||(k[h]=[])).push({name:b,handler:c}));return g},_one:function(b,c){var d=this,a=function(){d.off(b,a),c.apply(this,arguments)};return a},_eventType:function(a){var b=(a+="").indexOf(".");return b>-1?a.substring(0,b):a},_eventNameMatch:function(f,g){var d,c,h,e,j=this,k=j._eventType(f),i=j._eventType(g);if(f+="",g+="",(k===i||!i)&&(d=f.split("."),d.shift(),d=q(d,function(b){return a.string(b)&&b.length>0}),c=g.split("."),i&&c.shift(),c=q(c,function(b){return a.string(b)&&b.length>0}),d&&c)){for(h=0,e=0;e<c.length;e++)b.inArray(c[e],d)>-1&&h++;return h>=c.length}return!1},one:function(a,b){this.on(a,b,!0)},off:function(c,g){var e,d,f,k,b,m,i=this,h=i.events,l=o.array(c),n=a.func(g);if(a.object(c)){l=[];for(m in c)c.hasOwnProperty(m)&&l.push(m);n=!1,g=c}if(a.string(c)&&0===c.indexOf(".")){for(e in h)if(h.hasOwnProperty(e)){for(d=h[e]||[],f=n?g:g||j,b=d.length-1;b>=0;b--)!i._eventNameMatch(d[b].name,c)||a.defined(f)&&d[b].handler!==f||d.splice(b,1);d.length||delete h[e]}}else for(k=0;k<l.length;k++){for(c=l[k],e=i._eventType(c),d=h[e]||[],f=n?g:(g||{})[c],b=d.length-1;b>=0;b--)!i._eventNameMatch(d[b].name,c)||a.defined(f)&&d[b].handler!==f||d.splice(b,1);d.length||delete h[e]}return i},trigger:function(e,f){var a,c,b=this,g=b._eventType(e),d=(b.events[g]||[]).slice();for(a=0,c=d.length;c>a;a++)d[a].handler.apply(b,[].slice.call(arguments,1));return f},destroy:function(){this.events={}}}),y=p.extend({init:function(c){var a=!1,b=!1;k(this,{timeStamp:(new Date).getTime(),isDefaultPrevented:function(){return a},isPropagationStopped:function(){return b},preventDefault:function(){a=!0},stopPropagation:function(){b=!0}},c)}}),Y=l.extend({init:function(e,a){var c=this,d=c.constructor;a=a||{},c.element=b(e),c.initialOptions=a,c.options=k(!0,{},d.defaults,(d.themes||{})[a.theme],a),c._iid=L(),l.fn.init.call(c,a)},getInstanceId:function(){return this._iid},refresh:function(a){this.refreshWithElement(this.element,a)},refreshWithElement:function(b,c){var a=this,d=t([p],a.options,c);a.destroy(),a.init(b,d)},hide:function(){b(this.element).hide()},show:function(){b(this.element).show()},isVisible:function(){return b(this.element).is(":visible")},visible:function(){var a=this,b=[].slice.call(arguments);return b.length>0?void(b[0]?a.show():a.hide()):a.isVisible()},focus:function(){b(this.element).focus()},trigger:function(g,c,h){var d,e=this;return c=a.event(c)?{domEvent:c}:c,!c||!c.domEvent||c.domEvent instanceof b.Event||(c.domEvent=b.Event(c.domEvent)),d=new y(k({type:g,target:e},c)),l.fn.trigger.call(e,g,d),typeof h!==f||d.isDefaultPrevented()||h.call(e,d),d}}),Z=l.extend({options:{total:0,pageBuffer:2,createContainer:r,getItems:r,eventNS:".shieldVirtualized",skipRender:!1},init:function(d,c){var a=this;c=a.options=k({},a.options,c),a.element=b(d),l.fn.init.call(a,c),c.skipRender||a.render()},_elements:function(){var c,e,a=this,f=a.element,d=a.options;c=a.wrapper=f.off(d.eventNS).empty().css({overflow:"auto",position:"relative"}).on("scroll"+d.eventNS,z(a.scroll,a)).append('<div class="sui-virtualized"/>').find(".sui-virtualized").css({position:"relative",overflow:"visible"}),e=a.container=b(d.createContainer(c)),c.children().css({position:"absolute",top:0}),a._positionedContainer=c.children().first()},_dimensions:function(){var c=this,d=c.options,e=d.total,a=d.itemHeight,f=Math.min(e*a,m.support.maxElementHeight),b=c.element.height(),g=Math.ceil(b/a),h=g*a,i=f-b;return{total:e,itemHeight:a,totalHeight:f,viewportHeight:b,itemsPerPage:g,pageHeight:h,totalScrollableHeight:i}},render:function(){var b,a=this,d=a.element,c=a.options;a._elements(),a.prevScroll=0,b=a.dimensions=a._dimensions(),d.find(".sui-virtualized").height(b.totalHeight),a._renderItems(0,Math.min(c.total,(c.pageBuffer+1)*b.itemsPerPage))},_renderItems:function(d,e,c){var b=this;b.options.getItems(d,e,function(f,d){var e,g=f.length;for(d=a.defined(d)?!!d:!0,d&&b.container.empty(),e=0;g>e;e++)b.container.append(f[e]);c&&c()})},scroll:function(){var e,i,j,b=this,m=b.options,d=m.pageBuffer,a=b.dimensions,f=b.element.scrollTop(),p=b.prevScroll,k=f-p,g=f/a.totalScrollableHeight,h=b._positionedContainer,l=h.data(D)||0,c=f-g*(a.pageHeight-a.viewportHeight),o=k>0&&c-l>(d/4+1)*a.pageHeight,n=0>k&&c-l<=d/4*a.pageHeight;(n||o)&&(i=Math.min(a.total,Math.floor(g*a.total-g*a.itemsPerPage)),e=Math.max(0,i-d/2*a.itemsPerPage),j=Math.min(a.total,e+(d+1)*a.itemsPerPage),c=Math.max(0,c-(i-e)*a.itemHeight),b._renderItems(e,j,function(){h.css("top",c),h.data(D,c)})),b.prevScroll=f},scrollTop:function(b){var d=this,c=d.element;return a.defined(b)?void c.scrollTop(b):c.scrollTop()},destroy:function(){var a=this,b=a.options;a.element.off(b.eventNS),a.element=null,b.createContainer=r,b.getItems=r,l.fn.destroy.call(a)}}),a={string:function(a){return e(a)===F},number:function(a){return e(a)===w},integer:function(a){return e(a)===w&&/^[\+\-]?\d+$/.test(a+"")},"float":function(a){return e(a)===w&&/^[\+\-]?\d+\.\d+$/.test(a+"")},func:function(a){return e(a)===f},object:function(a){return e(a)===s},array:function(a){return e(a)===v},date:function(a){return e(a)===x},"boolean":function(a){return e(a)===M},"null":function(a){return e(a)===K},undefined:function(a){return e(a)===G},defined:function(a){return a!==j&&null!==a},event:function(a){return typeof g.Event==f&&a instanceof g.Event||a&&a.altKey!==j}},o={"int":function(a,b){return parseInt(a,b||10)},"float":function(a){return parseFloat(a)},number:function(a){return W(a+"")},array:function(a){return a instanceof Array?a:a!==j?[a]:[]},string:function(a){return a+""},key:function(a){var g,c,d,f,h=e(a);switch(h){case K:case G:return h;case s:return g=E(a).sort(),c=[],b.each(g,function(d,b){c.push(b+":"+o.key(a[b]))}),"{"+c.join(",")+"}";case v:for(c="[",d=0,f=a.length;f>d;d++)c+=o.key(a[d]),f-1>d&&(c+=",");return c+="]";case x:return a.toISOString();default:return a+""}}};!function(){h.stableSort=function(){var a="abcdefghijklmnopqrstuvwxyz";return"xyzvwtursopqmnklhijfgdeabc"==a.split("").sort(function(b,c){return~~(a.indexOf(c)/2.3)-~~(a.indexOf(b)/2.3)}).join("")}(),h.scrollbar=function(){var b,a=d.createElement("div");return a.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both",a.innerHTML="&nbsp;",d.body.appendChild(a),b=a.offsetWidth-a.scrollWidth,d.body.removeChild(a),b},h.isRtl=function(a){return b(a).closest(".sui-rtl").length>0},h.transitions=function(){var b,c=(d.body||d.documentElement).style,e="Transition",f=["Moz","webkit","Webkit","Khtml","O","ms"];if(a.string(c[e.toLowerCase()]))return!0;for(b=0;b<f.length;b++)if(a.string(c[f[b]+e]))return!0;return!1}(),h.hasScrollbarY=function(c){var a=b(c).get(0);return a.scrollHeight>a.clientHeight},h.hasScrollbarX=function(c){var a=b(c).get(0);return a.scrollWidth>a.clientWidth}}(),function(){m.rAF=function(a){return(g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||function(a){return this.setTimeout(a,1e3/60)}).call(g,a)},m.cAF=function(a){return(g.cancelAnimationFrame||g.clearTimeout)(a)}}(),function(){var b=/MSIE/i.test(c),d=/Trident/i.test(c),e=/Firefox/i.test(c),f=/Opera/i.test(c),g=/Safari/i.test(c),a=/Chrome/i.test(c),i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(c);h.browser={ie:b||d,firefox:e,opera:f,safari:!a&&g,chrome:a,mobile:i,version:b?parseInt(c.substr(c.indexOf("MSIE ")+5),10):d?parseInt(c.substr(c.indexOf("rv:")+3),10):e?parseInt(c.substr(c.indexOf("Firefox/")+8),10):f?parseInt(c.substr(c.indexOf("Version/")+8),10):a?parseInt(c.substr(c.indexOf("Chrome/")+7),10):g?parseInt(c.substr(c.indexOf("Version/")+8),10):0}}(),b(function(){for(var a,f=1e6,g=h.browser.firefox?6e6:1e9,c=b('<div style="display:none;"/>').appendTo(d.body),e=f;;){if(a=e+f,c.css("height",a),a>g||c.height()!==a)break;e=a}c.remove(),h.maxElementHeight=e}),i.handler=function(){return!1},k(m,{Class:p,Dispatcher:l,Event:y,Constants:V,format:u,formatString:B,parseDate:$,getCalendarInfo:T,getCurrencyInfo:O,error:S,dieOnError:!0,iid:L,strid:_,guid:N,support:h,extend:t,selection:i,type:e,is:a,to:o,keys:E,get:J,set:X,ui:k({},m.ui||{},{Widget:Y,VirtualizedContainer:Z,plugin:U})})}(jQuery,this),function(d,i,W,f){function t(b,c){var a,d,e=[];if(b.map)return b.map(c);for(a=0,d=b.length;d>a;a++)e[a]=c(b[a],a,b);return e}function x(d,e,b,h){var a=g(d,e);return a===f?b&&(a=c.def(b,h,!0)):a=c.convert(a,b),a}var P,L,r,e,u,b,y,m,K,p,H,G,F,M,c,n=i.Class,o=i.Dispatcher,I=Math.min,z=Math.max,a=i.is,A=i.to,g=i.get,D=i.set,q=(i.support,i.type),E=function(){},h=d.extend,j=d.proxy,k=d.each,C=d.grep,J=d.inArray,w=d.Deferred,v="function",B="array",N="object",T="string",l="change",s="error",R="start",Q="complete",S="save",O="afterset",U="insert",V="remove";P=n.extend({init:function(a){this.data=a},read:function(c,a,d,b){return a(this.data,!1,b)},modify:function(c,a,d,b){a(b)}}),L=n.extend({init:function(a,b){this.options=a,this.cache=b},read:function(c,g,j,e){var i,l=this.options,b=l.read,k=this.cache;return a.func(b)?void b(c,g,j,e):(b=a.string(b)?{url:b}:h(!0,{},b),a.func(b.data)&&(c=b.data(c,e)),i=k.get(c),void(i!==f?g(i,!0,e):(b.data=c,b.error=j,b.success=function(a){k.set(c,a),g(a,!1,e)},d.ajax(b))))},modify:function(i,n,p,k){var c,b,m,f,e,q=this.options,l=q.modify||{},o=["create","update","remove"],r=["added","edited","removed"],g=[],s=function(a){return a.data};if(a.func(l))return void l(i,n,p,k);for(e=0;e<o.length;e++)m=o[e],f=r[e],b=l[m],i[f].length?(a.string(b)&&(b={url:b,type:"POST"}),a.func(b)?(c=g[e]=new w,b(i[f],j(c.resolve,c),j(c.reject,c),k)):a.object(b)?(b=h(!0,{},b),a.func(b.data)?b.data=b.data(i[f],k):(b.data={},b.data[f]=t(i[f],s)),c=g[e]=d.ajax(b)):(c=g[e]=new w,c.resolve())):(c=g[e]=new w,c.resolve());d.when.apply(d,g).then(n,p)}}),r=n.extend({init:function(){this.values={}},get:function(a){return this.values[A.key(a)]},set:function(b,a){return this.values[A.key(b)]=a,a},remove:function(b){var a=A.key(b),c=this.values[a];return delete this.values[a],c},clear:function(){this.values=[]}}),r.noop={get:E,set:E},u=n.extend({init:function(b,c){a.object(b)?b=A.array(b):a.string(b)&&(b=[{path:b,desc:!!c}]),this._expr=b},build:function(){var b=this._expr,c=u.cache;return a.func(b)?function(a){return function(b,c){var d=a(b.item,c.item);return 0!==d?d:b.index-c.index}}(b):a.array(b)?c.get(b)||c.set(b,function(b){return function(k,l){var i,e,f,h,m,c,d,j;for(h=0,m=b.length;m>h;h++)if(c=k.item,d=l.item,i=b[h]||{},e=i.path,f=i.desc?-1:1,a.string(e)?(c=g(c,e),d=g(d,e)):a.func(e)&&(c=e(c),d=e(d)),a.date(c)&&(c=c.getTime()),a.date(d)&&(d=d.getTime()),c!==d&&(null!=c||null!=d)){if(null==c)return-1*f;if(null==d)return 1*f;if(a.number(c)&&a.number(d)||(c=c.toString(),d=d.toString()),c.localeCompare){if(j=c.localeCompare(d),0===j)continue;return j*f}if(c>d)return 1*f;if(d>c)return-1*f}return k.index-l.index}}([].concat(b))):void 0}}),u.cache=new r,b=n.extend({init:function(a){this._expr=a||[]},build:function(){var c=this,e=b.cache,d=c._expr,a=c._func||(c._func=e.get(d));return a||(a=c._buildRecursive(d,!0),a&&e.set(d,a)),a},_single:function(c){var d;if(c){if(a.func(c.filter))return c.filter;if(d=b.filters[b.filterAliases[c.filter]])return function(a,b,c,d){return function(e){return b(g(e,a),c,d)}}(c.path,d,c.value,c.sensitive)}},_multiple:function(a,b){return function(e){var c,d=!0,f=a.length;for(c=0;f>c;c++)if(d=a[c](e),b){if(!d)break}else if(d)break;return d}},_buildRecursive:function(b,g){var c,f,d=this,e=[];if(a.array(b)){for(c=0,f=b.length;f>c;c++)e.push(d._buildRecursive(b[c]));return e.length>1?d._multiple(e,g):e[0]}return b.and||b.or?d._buildRecursive(b.and||b.or,!!b.and):d._single(b)}}),b.cache=new r,b.normalize={equatable:function(c,d,e){return a.date(c)?{a:c.getTime(),b:new Date(d).getTime()}:b.normalize.string(c,d,e)},string:function(a,b,c){return{a:c?a+"":(a+"").toLowerCase(),b:c?b+"":(b+"").toLowerCase()}},scalar:function(b,c){return a.date(b)?{a:b.getTime(),b:new Date(c).getTime()}:isNaN(parseFloat(b))?{a:b,b:c}:{a:parseFloat(b),b:parseFloat(c)}}},b.filters={eq:function(c,d,e){var a=b.normalize.equatable(c,d,e);return a.a===a.b},neq:function(c,d,e){var a=b.normalize.equatable(c,d,e);return a.a!==a.b},con:function(c,d,e){var a=b.normalize.string(c,d,e);return a.a.indexOf(a.b)>-1},notcon:function(c,d,e){var a=b.normalize.string(c,d,e);return a.a.indexOf(a.b)<0},starts:function(c,d,e){var a=b.normalize.string(c,d,e);return 0===a.a.indexOf(a.b)},ends:function(c,d,e){var a=b.normalize.string(c,d,e);return a.a.indexOf(a.b)===a.a.length-a.b.length},gt:function(c,d){var a=b.normalize.scalar(c,d);return a.a>a.b},lt:function(c,d){var a=b.normalize.scalar(c,d);return a.a<a.b},gte:function(c,d){var a=b.normalize.scalar(c,d);return a.a>=a.b},lte:function(c,d){var a=b.normalize.scalar(c,d);return a.a<=a.b},isnull:function(a){return null==a},notnull:function(a){return null!=a}},b.filterAliases={eq:"eq",equal:"eq",equals:"eq","==":"eq",neq:"neq",ne:"neq",doesnotequal:"neq",notequal:"neq",notequals:"neq","!=":"neq",con:"con",contains:"con",notcon:"notcon",doesnotcontain:"notcon",notcontains:"notcon",starts:"starts",startswith:"starts",ends:"ends",endswith:"ends",gt:"gt",greaterthan:"gt",">":"gt",lt:"lt",lessthan:"lt","<":"lt",gte:"gte",ge:"gte",greaterthanorequal:"gte",
">=":"gte",lte:"lte",le:"lte",lessthanorequal:"lte","<=":"lte",isnull:"isnull","null":"isnull",notnull:"notnull",isnotnull:"notnull"},y=n.extend({init:function(){},build:function(b){var d=this,c=y.cache,a=c.get(b);return a||(a=d._build(b),a&&c.set(b,a)),a},_build:function(e){if(!e)return null;var g=e.field,d=e.aggregate,b=e.type||Number,h=function(a){return a===f?c.def(b):c.convert(a,b)};return a.func(d)?d:"count"==d?function(a){return a.length}:"sum"==d?function(e){var c,d,f=0,i=e.length;for(c=0;i>c;c++)d=x(e[c],g,b),f+=b==Date&&a.date(d)?d.getTime():d;return h(f)}:"average"==d?function(e){var c,d,f=0,i=e.length;for(c=0;i>c;c++)d=x(e[c],g,b),f+=b==Date&&a.date(d)?d.getTime():d;return h(f/i)}:"min"==d?function(a){return h(I.apply(null,t(a,function(a){return x(a,g,b)})))}:"max"==d?function(a){return h(z.apply(null,t(a,function(a){return x(a,g,b)})))}:f}}),y.cache=new r,e=n.extend({init:function(c,d,f,g,e){var b=this;b.data=c,b.total=null!=d?d:c?c.length:0,b.aggregates=f,b.groups=g,b.indices=a.array(e)?e.slice(0):t(c||[],function(b,a){return a})},filter:function(k){var c,h,f,a=this,i=new b(k).build(),g=a.data,d=[],j=[];if(i){for(c=0,h=g.length;h>c;c++)f=g[c],i(f)&&(d.push(f),j.push(a.indices[c]));a.indices=j}else d=g.slice(0);return new e(d,d.length,a.aggregates,a.groups,a.indices)},aggregate:function(c){var d,f,g,i,b=this,k=new y,j=b.data;for(a.array(c)||(c=[c]),b.aggregates=[],d=0;d<c.length;d++)f=c[d],g=k.build(f),g&&(i=g(j,f)),b.aggregates.push(h({},f,{value:i}));return new e(j.slice(0),b.total,b.aggregates,b.groups,b.indices)},aggregateGroups:function(c){var a=this,b=a.data.slice(0),d=new e(a._getInnerMostItems(b),null,null,null,null).aggregate(c);return new e(b,a.total,d.aggregates,a.groups,a.indices)},_getInnerMostItems:function(b){var a=[];return k(this._getInnerMostGroups(b),function(c,b){a=a.concat(b.items)}),a},_getInnerMostGroups:function(c){var b=this,a=[];return k(c||[],function(d,c){a=a.concat(b._hasInnerGroups(c)?b._getInnerMostGroups(c.items):c)}),a},_hasInnerGroups:function(b){return b&&b.items&&b.items.length>0?b.items[0].field&&a.array(b.items[0].items):!1},group:function(c){var d,b=this,f=b.data.slice(0);return a.array(c)||(c=[c]),c.length>0&&(d=b._groupData(c,f,b.indices),f=d[0],b.indices=d[1]),new e(f,b.total,b.aggregates,b.groups,b.indices)},_groupData:function(B,y,q){var r,j,o,b,d,z=this,c=[],m=[],l=B.slice(0),i=l.shift(),x=i.field,t=i.aggregate,v=i.order,w={};if(k(y,function(d,b){j=g(b,x),o=w[j],a.defined(o)?c[o].items.push({item:b,index:q[d]}):(w[j]=c.length,c.push(h({},i,{value:j,items:[{item:b,index:q[d]}]})))}),v&&(r=new u("value","desc"==v).build())){for(b=0;b<c.length;b++)c[b]={item:c[b],index:b};for(c.sort(r),b=0;b<c.length;b++)c[b]=c[b].item}for(b=0;b<c.length;b++)for(d=0;d<c[b].items.length;d++)m.push(c[b].items[d].index),c[b].items[d]=c[b].items[d].item;if(t&&k(c,function(a,b){c[a].aggregate=new e(b.items).aggregate(t).aggregates}),l&&l.length>0){var p=0,n=[];for(b=0;b<c.length;b++){var f=c[b],A=m.slice(p,p+(f.items?f.items.length:0)),s=z._groupData(l,f.items,A);c[b].items=s[0],n=n.concat(s[1]),p+=f.items?f.items.length:0}m=n}return[c,m]},sort:function(h,i){var a,b=this,f=new u(h,i).build(),c=b.data.slice(0),d=[],g=c?c.length:0,j=b.indices;if(f){for(a=0;g>a;a++)d.push({index:j[a],item:c[a]});for(d.sort(f),a=0;g>a;a++)c[a]=d[a].item,b.indices[a]=d[a].index}return new e(c,b.total,b.aggregates,b.groups,b.indices)},sortGroups:function(g,h){var b,a=this,f=a.data.slice(0),c=[],d=0;return b=function(f){if(a._hasInnerGroups(f))k(f.items,function(c,a){b(a)});else{var i=new e(f.items,null,null,null,a.indices.slice(d,d+(f.items?f.items.length:0))).sort(g,h);f.items=i.data,c=c.concat(i.indices),d+=f.items?f.items.length:0}},k(f,function(c,a){b(a)}),new e(f,a.total,a.aggregates,a.groups,c)},_sliceGroups:function(f,g,b,c){var d,l=this,h=0,i=[],e=[],j=a.defined(c);return 0!==b||j?(d=function(i){if(l._hasInnerGroups(i)){var q=[],r=0;return k(i.items,function(c,a){var b=d(a);b>0&&(q.push(a),r+=b)}),i.items=q,r}var m,n,f=h,o=i.items.length,p=f+o-1;return j?c-1>=p?p>=b&&(m=z(0,b-f),n=o):c-1>=f&&p>=b&&(m=z(0,b-f),n=I(o,c-f)):f>=b?(m=0,n=o):b>=f&&p>=b&&(m=z(0,b-f),n=o),a.defined(m)&&a.defined(n)&&n>m?(i.items=i.items.slice(m,n),e=e.concat(g.slice(f+m,f+n))):i.items=[],h+=o,i.items.length},k(f,function(c,a){var b=d(a);b>0&&i.push(a)}),[i,e]):[f.slice(0),g.slice(0)]},skip:function(b){var a=this;return new e(a.data.slice(b),a.total,a.aggregates,a.groups,a.indices.slice(b))},skipGroups:function(c){var a=this,b=a._sliceGroups(a.data,a.indices,c);return new e(b[0],a.total,a.aggregates,a.groups,b[1])},take:function(b){var a=this;return new e(a.data.slice(0,b),a.total,a.aggregates,a.groups,a.indices.slice(0,b))},takeGroups:function(c){var a=this,b=a._sliceGroups(a.data,a.indices,0,c);return new e(b[0],a.total,a.aggregates,a.groups,b[1])}}),e.create=function(c,a,d,f,g){a=a||{};var b=new e(c,d,f,g),h=a.remoteOperations||[],i=h.join(" "),j=i.indexOf("group")>-1;return a.group||j?(a.group?(a.filter&&(b=b.filter(a.filter)),b=b.group(a.group)):b.data=b.groups,a.aggregate&&(b=b.aggregateGroups(a.aggregate)),a.sort&&(b=b.sortGroups(a.sort)),a.skip&&(b=b.skipGroups(a.skip)),a.take&&(b=b.takeGroups(a.take))):(a.filter&&(b=b.filter(a.filter)),a.aggregate&&(b=b.aggregate(a.aggregate)),a.sort&&(b=b.sort(a.sort)),a.skip&&(b=b.skip(a.skip)),a.take&&(b=b.take(a.take))),b},m=o.extend({init:function(d){var b=this,c=b.options=a.array(d)?{data:d}:d||{},e=c.schema||{},f=m.schemas[e.type||"json"];b.data=null,b.filter=c.filter,b.sort=c.sort,b.skip=c.skip,b.take=c.take,b.group=c.group,b.aggregate=c.aggregate,b.schema=new f(e),b.remote=c.remote,b.cache=new r,b._recursive=!!c.resursive,o.fn.init.call(b,c)},isRecursive:function(){return this._recursive},trigger:i.ui.Widget.fn.trigger,_client:function(){var b=this,c=b.remote;return a.object(c)?new L(c,c.cache?b.cache:r.noop):new P(b.options.data)},_params:function(){var a,b=this,d=["filter","aggregate","group","sort","skip","take"],e=b.remote,f=b._remoteOperations().join(" "),c={local:{},remote:{}};return k(d,function(g,d){a=b[d],null!=a&&(e&&f.indexOf(d)>-1?c.remote[d]=a:c.local[d]=a)}),c},_remoteOperations:function(){var a=this.remote;return a&&a.read?a.read.operations||a.operations||[]:[]},_success:function(d,e,f,c,g){var a=this,h=a.schema,b=h.process(f);a.data=b.data,a._pTotal=b.total,a._pAggregates=b.aggregates,a._pGroups=b.groups,a._createView(b.data,e),a.trigger(Q),a.trigger(l,{fromCache:!!c,extra:g}),d.resolve(a.view,!!c)},_createView:function(c,d){var a=this,b=e.create(c,h({},d||a._params().local,{remoteOperations:a._remoteOperations()}),a._pTotal,a._pAggregates,a._pGroups);a.view=b.data,a.total=b.total,a._indices=b.indices,a.aggregates=b.aggregates},_error:function(c,d,e,a,f){var b=this;c.reject(a),d&&b.trigger(Q),b.trigger(s,{errorType:"transport",error:a,operation:e,extra:f})},read:function(d){var a=this,b=new w,c=a._params(),e=a.trigger(R,{params:c,extra:d});return e.isDefaultPrevented()?b.resolve():(a.cancel(),a._client().read(c.remote,j(a._success,a,b,c.local),j(a._error,a,b,!0,"read"),d)),b.promise()},_ensureTracker:function(){var b=this,c=b.tracker,d=b.data;if(!c){if(!d||!a.array(d))throw new Error("shield.DataSource: cannot modify when no data array is available.");c=b.tracker=new M({data:d,model:b.schema.model,events:{change:function(a){b._createView(b.data),a&&a.afterset||b.trigger(l)},error:function(a){b.trigger(s,{errorType:"tracker",path:a?a.path:"undefined path",value:a?a.value:"undefined value",error:a?a.reason:"undefined error",model:a?a.target:"undefined target model"})}}}),b.data=c.data}},getDataIndex:function(a){return this._indices[a]},add:function(a){return this._ensureTracker(),this.tracker.add(a)},insert:function(a,b){return this._ensureTracker(),this.tracker.insert(a,b)},remove:function(a){return this._ensureTracker(),this.tracker.remove(a)},removeAt:function(a){return this._ensureTracker(),this.tracker.removeAt(a)},edit:function(a){return this._ensureTracker(),this.tracker.edit(a)},insertView:function(a,b){return this.insert(this._indices[a],b)},removeAtView:function(a){return this.removeAt(this._indices[a])},editView:function(a){return this.edit(this._indices[a])},save:function(f,m){var h,g,e,k,b=this,d=b.tracker,i=d?d.changes:{added:[],edited:[],removed:[]},n=d&&b.trigger(S,{changes:i}),c=new w;if(f=a.defined(f)?!!f:!0,n&&!n.isDefaultPrevented()){for(h=b.data=d.original,g=d.data,h.length=0,e=0;e<g.length;e++)h[e]=g[e];b.options.data&&!a.func(b.options.data)&&c.done(j(b._syncLocalData,b)),b._client().modify(i,j(c.resolve,c),j(b._error,b,c,!1,"save"),m),d.destroy(),d=b.tracker=null}else c.resolve(i);return f&&(k=function(){b._createView(b.data),b.trigger(l,{extra:m})},c.then(k,k)),c.promise()},_syncLocalData:function(){var b,c=this,d=c.schema,f=(d.options.fields,c.data),e=(c.options.data,[]),g=a.array(d.getReverseDataFirstItem(c.options.data));for(b=0;b<f.length;b++)e[b]=g?[]:{},d.reverseFields(f[b],e[b]);d.reverseData(e,c.options.data)},cancel:function(){var b=this,a=b.tracker,c=a&&(a.changes.added.length||a.changes.edited.length||a.changes.removed.length);a&&(b.data=a.original,a.destroy(),a=b.tracker=null,c&&(b._createView(b.data),b.trigger(l)))},destroy:function(){var b,a=this,c=["options","data","total","aggregates","filter","sort","aggregate","group","skip","take","schema","remote","view","cache"];for(a.cancel(),a.cache&&a.cache.clear(),b=0;b<c.length;b++)delete a[c[b]];o.fn.destroy.call(a)}}),m.create=function(b,c){return b instanceof m?b:new m(a.array(b)?h({data:b},c):h({},b,c))},p=n.extend({init:function(a){this.options=a},parse:function(b){var c=this.options.parse;if(a.func(c))return c(b);if(a.string(b))try{b=d.parseJSON(b)}catch(e){}return b},data:function(c){var b=this.options.data;return a.func(b)?b(c):a.string(b)?g(c,b):c},aggregates:function(c){var b=this.options.aggregates;return a.func(b)?b(c):a.string(b)?g(c,b):f},groups:function(c){var b=this.options.groups;return a.func(b)?b(c):a.string(b)?g(c,b):f},reverseData:function(d,b){var c,e=this.options.data;if(a.func(e))e(d,b);else if(a.string(e))D(b,e,d);else if(a.array(b))for(b.length=0,c=0;c<d.length;c++)b[c]=d[c]},getReverseDataFirstItem:function(c){var b=this.data(c);return a.array(b)&&b.length>0?b[0]:f},total:function(b,d){var c=this.options.total;return b=b||[],d=d||[],a.func(c)?c(b):a.string(c)?g(b,c):d.length},fields:function(a){var b=this,d=b.options.fields,e=b.model=c.define(d);return d?t(a,function(a){return p.mapFields(a,e.fn.fields)}):a},reverseFields:function(){var c,d,b,j=this,e=j.options.fields,f=[].slice.call(arguments),g=f[0],i=f.length<=1,h=i?g:f[1];for(b in e)e.hasOwnProperty(b)&&(c=e[b],d=g[b],a.string(c.path)?D(h,c.path,d):a.func(c.path)?c.path(g,d):h[b]=d,i&&delete h[b])},process:function(b){var a=this,c=a.parse(b),e=a.aggregates(b),f=a.groups(b),d=a.fields(a.data(c));return{data:d,aggregates:e,groups:f,total:a.total(c,d)}}}),p.mapFields=function(e,i){var h,b,d,j={};e=e||{};for(h in i)i.hasOwnProperty(h)&&(b=i[h],a.string(b.path)?(d=g(e,b.path),d===f&&(d=g(e,h))):d=a.func(b.path)?b.path(e):e[h],d===f?b.type&&(d=c.def(b.type,b.def,b.nullable)):d=c.convert(d,b.type),j[h]=d);return j},H=p.extend({parse:function(b){var c=this,e=c.options;if(a.func(e.parse))b=e.parse(b);else if(a.string(b))try{b=d.parseXML(b)}catch(f){}return b&&9===b.nodeType&&(b=c._json(c._root(b))),b},_root:function(d){var a,c,b=d.childNodes;for(a=0,c=b.length;c>a;a++)if(1===b[a].nodeType)return b[a];return null},_json:function(g){var b,d,e,h,c={},i={},f="";for(e=0,h=g.attributes.length;h>e;e++)b=g.attributes[e],c["_"+b.nodeName]=b.nodeValue;for(e=0,h=g.childNodes.length;h>e;e++)switch(b=g.childNodes[e],d=b.nodeName,b.nodeType){case 1:i[d]?(a.array(c[d])||(c[d]=[c[d]]),c[d].push(this._json(b))):(c[d]=this._json(b),i[d]=!0);break;case 3:f+=b.nodeValue;break;case 4:c._cdata=b.nodeValue}return f=f.replace(/^\s+(.*)\s+$/gim,"$1"),f&&(c._text=f),c}}),G=p.extend({parse:function(c){var e,b=this.options,h=b.parse,f=d(c),g=[],i=[];if(a.func(h))return h(c);if(b.result)return b.result;if(!f[0]||"table"!==f[0].tagName.toLowerCase())return c;f.eq(0).find("thead th").each(function(){i.push(d(this).text())}).end().find("tbody tr").each(function(){e={},d(this).children().each(function(a){e[i[a]]=d(this).text()}),g.push(e)});return b.result=g,g}}),F=p.extend({parse:function(c){var b=this.options,g=b.parse,e=d(c),f=[];return a.func(g)?g(c):b.result?b.result:e[0]&&"select"===e[0].tagName.toLowerCase()?(e.find("option").each(function(b){var a=d(this);f.push({value:a.attr("value"),text:a.text(),selected:a.is(":selected")})}),b.result=f,f):c}}),m.schemas={json:p,xml:H,table:G,select:F},M=o.extend({init:function(a){var b=this;b.original=a.data,b.data=Array.apply(null,a.data),b.model=a.model,b.changes={added:[],edited:[],removed:[]},o.fn.init.call(this,a)},_model:function(c){var a=this,b=new a.model(c);return b.on(l,j(a.trigger,a,l)),b.on(s,j(a.trigger,a,s)),b.on(O,j(a.trigger,a,l,{afterset:!0})),b},add:function(a){return this.insert(this.data.length,a)},insert:function(b,e){var a,c=this,d=c.data,f=c.changes;if(0>b||b>d.length)throw new Error("shield.DataSource: invalid item index.");return a=c._model(e),f.added.push(a),d.splice(b,0,a.data),c.trigger(l,{operation:U,index:b,model:a}),a},edit:function(a){var b,d=this,c=d.data,e=d.changes;if(isNaN(a)||0>a||a>=c.length)throw new Error("shield.DataSource: invalid item index.");return(b=C(e.added.concat(e.edited),function(b){return b.data===c[a]})[0])?b:(b=d._model(c[a]),e.edited.push(b),c[a]=b.data,b)},remove:function(d){var a=this,e=a.changes,f=C(e.added.concat(e.edited),function(a){return a===d})[0],b=-1;return d instanceof c?f&&(b=J(f.data,a.data)):b=J(d,a.data),b>-1?a.removeAt(b):void 0},removeAt:function(a){var c=this,d=c.data,e=c.changes,b=C(e.added.concat(e.edited),function(b){return b.data===d[a]})[0];if(0>a||a>d.length)throw new Error("shield.DataSource: invalid item index.");return b?b.destroy():b=new c.model(d[a]),e.removed.push(b),d.splice(a,1),c.trigger(l,{operation:V,index:a,model:b}),b},destroy:function(){var b,c=this,a=c.changes,d=a.added.concat(a.edited).concat(a.removed);for(b=0;b<d.length;b++)d[b].destroy();a.added.length=a.edited.length=a.removed.length=0,c.data=c.original=null,o.fn.destroy.call(c)}}),c=o.extend({init:function(b,c){var a=this;o.fn.init.call(a,c),a.fields=h(!0,{},a.constructor.prototype.fields),a.data=h(!0,{},b)},trigger:i.ui.Widget.fn.trigger,get:function(a){return g(this.data,a)},set:function(c,a){var b=this;a=b.validate(c,a),a!==f&&(D(b.data,c,a),b.trigger(O))},validate:function(e,a){var d,h,i=this,b=g(i.fields,e);if(!b)return a;if(q(b.validator)===v)d=b.validator;else if(q(b.type.validate)===v)d=b.type.validate;else{var j=b.type.toString().split("(")[0].split(" ")[1].toLowerCase();d=c.validators[j]}if(d){if(h=d(a),h===f)return void i.trigger(s,{errorType:"validation",path:e,value:a,error:"validation error"});a=h}return null===a&&b.nullable===!1?void i.trigger(s,{errorType:"validation",path:e,value:a,error:"null value not allowed"}):a}}),c.define=function(a){return c.extend({fields:c.normalize(h(!0,{},a))})},c.normalize=function(a){var b,c,d;a=a||{};for(b in a)a.hasOwnProperty(b)&&(c=a[b],d=q(c),d===v?a[b]={type:c}:d===B?a[b]={type:c}:d===T&&(a[b]={path:c}));return a},c.def=function(a,b,d){var c;return b!==f?q(b)===v?b():b:d?null:a===String?"":a===Number?0:a===Date?new Date:a===Boolean?!1:a===Array?[]:a===Object?{}:(c=q(a),c===B?[]:c===N?{}:c===v?a():null)},c.convert=function(b,d){var c;return null==b?b:d===String?b.toString():d===Number?(c=parseFloat(b),isNaN(c)?b:c):d===Date?(c=new Date(b),isNaN(c.getTime())?b:c):d===Boolean?a.string(b)?!/^(false|0)$/i.test(b):!!b:b},c.validators={string:function(a){return null==a?null:a.toString()},number:function(a){return null===a?null:isNaN(+a)?f:+a},date:function(a){return null===a?null:a instanceof Date?a:(a=new Date(a),isNaN(a.getTime())?f:a)},"boolean":function(a){return null===a?null:null==a?f:!!a},array:function(a){return null===a?null:q(a)===B?a:f},object:function(a){return null===a?null:q(a)===N?a:f}},K=m.extend({init:function(a){h(a,{resursive:!0}),m.fn.init.call(this,a)}}),h(i,{map:t,DataSource:m,RecursiveDataSource:K,DataQuery:e,Model:c})}(jQuery,shield,this),function(a,e,w,b){function $(){if(f(L))return L;var d,c,b=a('<div style="width:50px;position:absolute;overflow:hidden;height:50px;display:block;"><div style="width:auto;height:100px;"></div></div>'),e=b.children()[0];return a(g.body).append(b),d=e.offsetWidth,b.css(wa,I),c=e.offsetWidth,d===c&&(c=b[0].clientWidth),b.remove(),L=d-c}function Ta(a){var b=a.isWindow||a.isDocument?"":a.element.css(Ia),c=a.isWindow||a.isDocument?"":a.element.css(xa),d=b===I||b===sa&&a.width<a.element[0].scrollWidth,e=c===I||c===sa&&a.height<a.element[0].scrollHeight;return{width:e?$():0,height:d?$():0}}function ua(e){var b=a(e||w),c=la(b[0]),d=!!b[0]&&9===b[0].nodeType;return{element:b,isWindow:c,isDocument:d,offset:c?{left:0,top:0}:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),scrollTop:b.scrollTop(),width:c||d?b.width():b.outerWidth(),height:c||d?b.height():b.outerHeight()}}function U(a,b,c){return[T(a[0])*(Z.test(a[0])?b/100:1),T(a[1])*(Z.test(a[1])?c/100:1)]}function h(b,c){var a=b.css(c);return a?Ma(a)||0:0}function Sa(a){var b=a[0];return 9===b.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:la(b)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:b.preventDefault?{width:0,height:0,offset:{top:b.pageY,left:b.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}function na(c,d){var b=0,e=f(d)?a(d).find(c):a(c);return e.each(function(c){b=j(b,h(a(this),"z-index"))}),b}function qa(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+g.body.scrollLeft-g.body.clientLeft,y:a.clientY+g.body.scrollTop-g.body.clientTop}}var L,q,E,y,A,r,c,Q,Y,O,aa,N,ma,m=e.ui.Widget,Ra=(e.Class,e.Constants.KeyCode),Qa=e.error,g=document,d=Math.abs,D=Math.min,j=Math.max,ga=Math.round,ha=Math.floor,ia=a.extend,o=a.proxy,ka=a.each,la=a.isWindow,f=e.is.defined,z=e.is.func,Pa=e.is.number,M=e.is.object,Oa=(e.is["null"],e.is.string),Na=e.is.array,Ma=e.to["int"],T=e.to.number,La=e.to.string,V=/left|center|right/,W=/top|center|bottom/,X=/[\+\-]\d+(\.[\d]+)?%?/,va=/^\w+/,Z=/%$/,t="mousedown",_="mouseup",C="mousemove",Ka="keydown",ca="start",da="stop",Ja="resize",Ua="resized",Aa="drag",za="drop",ya="cancel",R="disabled",n="px",k="left",v="right",l="top",x="bottom",pa="middle",i="center",wa="overflow",sa="auto",p="position",B="absolute",ra="relative",Ia="overflow-x",xa="overflow-y",I="scroll",H="horizontal",G="vertical",Ba="my",Ca="at",Da="marginLeft",Ea="marginRight",Fa="marginTop",Ga="marginBottom",Ha="flip",fa="pointer",ea="fit",ba="intersect",J="sui-resizable",S=J+"-"+R,u="sui-draggable",ta=u+"-"+R,oa=u+"-dragging",s="sui-unselectable",F="sui-droppable",K=F+"-"+R,P=F+"-over",ja=0;y={},y.GetWithinInfo=ua,y.GetMaxZIndex=na,y.GetCoordinates=qa,e.ui.Util=y,q=function(){return ja++,E?E:(this.init(),void(E=this))},q.prototype={_pos:null,init:function(){var b=this;a(g).on(C+".suiMouseTracker",o(b._onMouseMove,b))},_onMouseMove:function(a){this._pos=this.getPosFromEvent(a)},getPosFromEvent:function(a){return qa(a)},getPosition:function(b){var a=this;return null===a._pos&&f(b)&&(a._pos=a.getPosFromEvent(b)),a._pos},isInWindow:function(g){var h=this,b=h.getPosition(g),c=b.x,d=b.y,e=a(w).scrollTop(),f=a(w).scrollLeft();return c>=f&&c<=f+a(w).width()&&d>=e&&d<=e+a(w).height()},destroy:function(){--ja>0||(a(g).off(C+".suiMouseTracker"),E=null)}},e.MouseTracker=q,A={},A.Set=function(J,C,n){if(!J||!C||!n)throw"Invalid arguments passed to Position.Set";var s,f,g,q,m,u,c={my:n.source,at:n.target,collision:n.overflow,inside:n.inside},B=a(C),E=ua(c.inside),D=Ta(E),t=(c.collision||Ha).split(" "),y={};u=Sa(B),B[0].preventDefault&&(c.at="left top"),f=u.width,g=u.height,q=u.offset,m=ia({},q),ka([Ba,Ca],function(){var b,d,e=this,a=(c[e]||"").split(" ");1===a.length&&(a=V.test(a[0])?a.concat([i]):W.test(a[0])?[i].concat(a):[i,i]),a[0]=V.test(a[0])?a[0]:i,a[1]=W.test(a[1])?a[1]:i,b=X.exec(a[0]),d=X.exec(a[1]),y[e]=[b?b[0]:0,d?d[0]:0],c[e]=[va.exec(a[0])[0],va.exec(a[1])[0]]}),1===t.length&&(t[1]=t[0]),c.at[0]===v?m.left+=f:c.at[0]===i&&(m.left+=f/2),c.at[1]===x?m.top+=g:c.at[1]===i&&(m.top+=g/2),s=U(y.at,f,g),m.left+=s[0],m.top+=s[1];var F,A,e=a(J),p=e.outerWidth(),o=e.outerHeight(),K=h(e,Da),I=h(e,Fa),M=p+K+h(e,Ea)+D.width,L=o+I+h(e,Ga)+D.height,b=ia({},m),w=U(y.my,e.outerWidth(),e.outerHeight());c.my[0]===v?b.left-=p:c.my[0]===i&&(b.left-=p/2),c.my[1]===x?b.top-=o:c.my[1]===i&&(b.top-=o/2),b.left+=w[0],b.top+=w[1],b.left=ga(b.left),b.top=ga(b.top),F={marginLeft:K,marginTop:I},ka([k,l],function(a,d){r[t[a]]&&r[t[a]][d](b,{targetWidth:f,targetHeight:g,elemWidth:p,elemHeight:o,collisionPosition:F,collisionWidth:M,collisionHeight:L,offset:[s[0]+w[0],s[1]+w[1]],my:c.my,at:c.at,within:E,elem:e})}),z(n.callback)&&(A=function(){var c=q.left-b.left,m=c+f-p,h=q.top-b.top,r=h+g-o,a={target:{element:B,left:q.left,top:q.top,width:f,height:g},element:{element:e,left:b.left,top:b.top,width:p,height:o},horizontal:0>m?k:c>0?v:i,vertical:0>r?l:h>0?x:pa};p>=f&&d(c+m)<=f&&(a.horizontal=i),o>=g&&d(h+r)<=g&&(a.vertical=pa),j(d(c),d(m))>j(d(h),d(r))?a.important=H:a.important=G,n.callback(a)}),e.offset(b),A&&A()},r={fit:{left:function(a,c){var i,f=c.within,d=f.isWindow?f.scrollLeft:f.offset.left,g=f.width,h=a.left-c.collisionPosition.marginLeft,b=d-h,e=h+c.collisionWidth-g-d;c.collisionWidth>g?b>0&&0>=e?(i=a.left+b+c.collisionWidth-g-d,a.left+=b-i):e>0&&0>=b?a.left=d:b>e?a.left=d+g-c.collisionWidth:a.left=d:b>0?a.left+=b:e>0?a.left-=e:a.left=j(a.left-h,a.left)},top:function(a,b){var i,g=b.within,d=g.isWindow?g.scrollTop:g.offset.top,f=b.within.height,h=a.top-b.collisionPosition.marginTop,c=d-h,e=h+b.collisionHeight-f-d;b.collisionHeight>f?c>0&&0>=e?(i=a.top+c+b.collisionHeight-f-d,a.top+=c-i):e>0&&0>=c?a.top=d:c>e?a.top=d+f-b.collisionHeight:a.top=d:c>0?a.top+=c:e>0?a.top-=e:a.top=j(a.top-h,a.top)}},flip:{left:function(c,a){var i,h,b=a.within,p=b.offset.left+b.scrollLeft,l=b.width,j=b.isWindow?b.scrollLeft:b.offset.left,m=c.left-a.collisionPosition.marginLeft,n=m-j,o=m+a.collisionWidth-l-j,e=a.my[0]===k?-a.elemWidth:a.my[0]===v?a.elemWidth:0,g=a.at[0]===k?a.targetWidth:a.at[0]===v?-a.targetWidth:0,f=-2*a.offset[0];0>n?(i=c.left+e+g+f+a.collisionWidth-l-p,(0>i||i<d(n))&&(c.left+=e+g+f)):o>0&&(h=c.left-a.collisionPosition.marginLeft+e+g+f-j,(h>0||d(h)<o)&&(c.left+=e+g+f))},top:function(b,a){var k,j,f=a.within,p=f.offset.top+f.scrollTop,n=f.height,m=f.isWindow?f.scrollTop:f.offset.top,o=b.top-a.collisionPosition.marginTop,h=o-m,i=o+a.collisionHeight-n-m,q=a.my[1]===l,e=q?-a.elemHeight:a.my[1]===x?a.elemHeight:0,c=a.at[1]===l?a.targetHeight:a.at[1]===x?-a.targetHeight:0,g=-2*a.offset[1];0>h?(j=b.top+e+c+g+a.collisionHeight-n-p,b.top+e+c+g>h&&(0>j||j<d(h))&&(b.top+=e+c+g)):i>0&&(k=b.top-a.collisionPosition.marginTop+e+c+g-m,b.top+e+c+g>i&&(k>0||d(k)<i)&&(b.top+=e+c+g))}},flipfit:{left:function(){r.flip.left.apply(this,arguments),r.fit.left.apply(this,arguments)},top:function(){r.flip.top.apply(this,arguments),r.fit.top.apply(this,arguments)}}},e.ui.Position=A,ma={enabled:!0,cls:b,iframeFix:!1,resizeCls:b,delta:1,handles:["e","w","n","s","se","sw","ne","nw"],handleWidth:8,handleZIndex:105,minHeight:16,minWidth:16,maxHeight:b,maxWidth:b,events:{}},N=m.extend({init:function(){m.fn.init.apply(this,arguments),f(this.initialOptions.handles)&&(this.options.handles=this.initialOptions.handles);var b=this,e=a(b.element),c=b.options,d=c.cls;b._eventNS=".shieldResizable"+b.getInstanceId(),b.mouseTracker=new q,e.addClass(J+(d?" "+d:"")),b._initHandles(),b.enabled(c.enabled)},_initHandles:function(){var h,d,e,b=this,l=a(b.element),p=(l.width(),l.height()),j=b.options,m=j.handles,k=j.handleWidth,i=k+n,f=k+2+n,c="-"+(k-2)+n,q=j.handleZIndex;for(b.handles=[],e=0;e<m.length;e++){switch(h=La(m[e]).toLowerCase(),d={},h){case"e":d={width:i,height:p+n,top:0,right:c};break;case"w":d={width:i,height:p+n,top:0,left:c};break;case"n":d={width:"100%",height:i,top:c};break;case"s":d={width:"100%",height:i,bottom:c};break;case"se":d={width:f,height:f,bottom:c,right:c};break;case"sw":d={width:f,height:f,bottom:c,left:c};break;case"ne":d={width:f,height:f,top:c,right:c};break;case"nw":d={width:f,height:f,top:c,left:c}}d.zIndex=q,b.handles[e]={type:h},b.handles[e][t]=o(b._handleMouseDown,b,e),b.handles[e].element=a('<div class="sui-resizable-handle sui-resizable-dir-'+h+'"></div>').appendTo(l).css(d).on(t,b.handles[e][t])}a(g).on(_+b._eventNS,o(b._handleMouseUp,b)).on(C+b._eventNS,o(b._handleMouseMove,b))},_destroyHandles:function(){var b,c=this,d=c.handles;for(a(g).off(c._eventNS),b=0;b<d.length;b++)a(c.handles[b].element).off(t,c.handles[b][t]).remove();c.handles=[]},_fixIframes:function(){var c,d=this,b=d.options.iframeFix;b&&(c=b===!0?"iframe":b,d._fixedFrames=a(g.body).find(c).map(function(){var b=a(this);return a("<div/>").css(p,B).appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]}))},_unfixIframes:function(){var b=this;b._fixedFrames&&(a(b._fixedFrames).remove(),delete b._fixedFrames)},_handleMouseDown:function(c,d){var b=this;b._enabled&&!b.resizing&&(b.resizing=!0,b.resizingHandle=c,b.oldPos=b.mouseTracker.getPosition(d),b.startSent=!1,a(b.element).addClass(s),b._fixIframes())},_handleMouseMove:function(G){var s,x,y,m,j,c,b,i,g,v,w,q,o,t,e=this,p=a(e.element),r=e.options,u=r.delta,z=r.minWidth,A=r.maxWidth,B=r.minHeight,C=r.maxHeight,E=r.resizeCls,F=e.resizingHandle,D=e.handles,H=e.mouseTracker,I=e.oldPos;if(H.isInWindow(G)&&e.resizing&&f(F)&&(y=H.getPosition(G),m=y.x-I.x,j=y.y-I.y,s=D[F],x=s.type,d(m)>=u||d(j)>=u)){switch(/^(se|sw|ne|nw)$/i.test(x)||(/^(e|w)$/i.test(x)?j=0:m=0),d(m)<u&&(m=0),d(j)<u&&(j=0),c=m,b=j,i=0,g=0,x){case"w":c=-m,i=-c;break;case"n":b=-j,g=-b;break;case"nw":c=-m,b=-j,i=-c,g=-b;break;case"sw":c=-m,i=-c;break;case"ne":b=-j,g=-b}if(q=p.width(),o=p.height(),v=h(p,l),w=h(p,k),c>0?(f(A)&&q+c>A&&(c=A-q,0!==i&&(i=-c)),0>w+i&&(c-=w-i,i=-c)):0>c&&f(z)&&z>q+c&&(c=z-q,0!==i&&(i=-c)),b>0?(f(C)&&o+b>C&&(b=C-o,0!==g&&(g=-b)),0>v+g&&(b-=v-g,g=-b)):0>b&&f(B)&&B>o+b&&(b=B-o,0!==g&&(g=-b)),0!==c||0!==b){e.startSent||(e.startSent=!0,e.trigger(ca),E&&p.addClass(E));var J=e.trigger(Ja,{deltaX:c,deltaY:b});if(!J.isDefaultPrevented()){if(p.width(q+c).height(o+b),(0!==i||0!==g)&&p.css({top:v+g+n,left:w+i+n}),e.oldPos.x=e.oldPos.x+m,e.oldPos.y=e.oldPos.y+j,0!==j)for(t=0;t<D.length;t++)s=D[t],/^(e|w)$/i.test(s.type)&&a(s.element).height(o+b);e.trigger(Ua)}}}},_handleMouseUp:function(f){var c=this,e=!!c.startSent,d=c.options.resizeCls;c._unfixIframes(),c.resizing&&(c.resizing=!1,c.resizingHandle=b,c.oldPos=b,c.startSent=!1,e&&c.trigger(da),a(c.element).removeClass(s+(d?" "+d:"")))},resize:function(c,d){var e=this,b=e.options;c=j(D(c,b.maxWidth),b.minWidth),d=j(D(d,b.maxHeight),b.minHeight),a(e.element).width(c).height(d)},enabled:function(){var b,c=this,d=a(c.element),e=[].slice.call(arguments);return e.length>0?(b=!!e[0],b?d.removeClass(S):d.addClass(S),c._enabled=b,void 0):c._enabled},destroy:function(){var b=this,c=b.options.cls;b.mouseTracker.destroy(),b.mouseTracker=null,a(b.element).removeClass(J+(c?" "+c:"")),b._destroyHandles(),m.fn.destroy.call(b)}}),N.defaults=ma,e.ui.plugin("Resizable",N),c={droppables:{"default":[]},Register:function(b){var a=b.options.scope;c.droppables[a]=c.droppables[a]||[],c.droppables[a].push(b)},UnRegister:function(d){var a,e=d.options.scope,b=c.droppables[e];for(a=0;a<b.length;a++)b[a]===d&&b.splice(a,1)},PrepareOffsets:function(e,i){var f,g,b,d=c.droppables[e.options.scope]||[],h=a(e.helper||e.element);for(b=0;b<d.length;b++)f=d[b].enabled(),g=d[b].visible(),!f||!g||e&&!d[b].accepts(e.element)||e&&e.element.get(0)===d[b].element.get(0)||(d[b].ddIsEnabled=f,d[b].ddIsVisible=g,d[b].ddOffset=d[b].element.offset(),d[b].proportions({width:d[b].element[0].offsetWidth,height:d[b].element[0].offsetHeight}));e.proportions({width:h[0].offsetWidth,height:h[0].offsetHeight})},DragStart:function(a,b){c.PrepareOffsets(a,b)},Drag:function(d,e){var f,a,b=c.droppables[d.options.scope]||[],g=b.length;for(a=0;g>a;a++)!b[a].ddIsEnabled||!b[a].ddIsVisible||d&&!b[a].accepts(d.element)||d&&d.element.get(0)===b[a].element.get(0)||(f=c.Intersects(d,b[a],e),f?b[a].ddIsOver||(b[a].ddIsOver=!0,b[a].over(d,e)):b[a].ddIsOver&&(b[a].ddIsOver=!1,b[a].out(d,e)))},Drop:function(d,f){var g,a,h,i,e,b=c.droppables[d.options.scope]||[],j=b.length;for(a=0;j>a;a++)!b[a].ddIsEnabled||!b[a].ddIsVisible||d&&!b[a].accepts(d.element)||d&&d.element.get(0)===b[a].element.get(0)||(b[a].stop(),g=c.Intersects(d,b[a],f),b[a].ddIsOver=!1,g&&(e=b[a].drop(d,f),e.isDefaultPrevented()&&(h=!0),e.skipAnimation&&(i=!0)));return{cancelled:h,skipAnimation:i}},Intersects:function(m,s,x){var o,u,h,i,j,k,e,f,g,l=s.options.tolerance,t=M(l)?l.x:l,r=M(l)?l.y:l,w=s.proportions(),v=s.ddOffset,n=w.width,p=w.height,d=v.left,b=v.top;if(t==fa){var y=new q;g=y.getPosition(x),y.destroy(),o=d<=g.x&&d+n>=g.x}else h=m.proportions(),i=h.width,j=h.height,k=a(m.helper||m.element).offset(),e=k.left,f=k.top,o=t==ea?c._linesOverlap(e,e+i,d,d+n,i):t==ba?c._linesOverlap(e,e+i,d,d+n,i/2):c._linesOverlap(e,e+i,d,d+n,0);if(!o)return!1;if(r==fa){if(!g){var z=new q;g=z.getPosition(x),z.destroy()}u=b<=g.y&&b+p>=g.y}else h||(h=m.proportions(),i=h.width,j=h.height,k=a(m.helper||m.element).offset(),e=k.left,f=k.top),u=r==ea?c._linesOverlap(f,f+j,b,b+p,j):r==ba?c._linesOverlap(f,f+j,b,b+p,j/2):c._linesOverlap(f,f+j,b,b+p,0);return o&&u},_linesOverlap:function(b,c,d,e,a){return f(a)||(a=0),d>b&&e>c?c-d>a:b>d&&c>e?e-b>a:!0}},e.ui.DDManager=c,Y={enabled:!0,iframeFix:!1,cls:b,dragCls:b,scope:"default",handle:b,direction:b,min:b,max:b,step:b,allowedPositions:b,stack:!0,helper:b,appendTo:"parent",animation:{enabled:!0,revertDuration:200},events:{}},Q=m.extend({init:function(){m.fn.init.apply(this,arguments);var c,b=this,d=a(b.element),e=b.options,f=e.cls;b._eventNS=".shieldDraggable"+b.getInstanceId(),b.mouseTracker=new q,d.addClass(u+(f?" "+f:"")),c=d.css(p),c!==ra&&c!==B&&(b._origPosStyle=c,d.css(p,ra)),b.enabled(e.enabled),b.startSent=!1},proportions:function(){var a=this;return arguments.length>0?void(a._proportions=arguments[0]):a._proportions?a._proportions:a._proportions={width:a.element[0].offsetWidth,height:a.element[0].offsetHeight}},_fixIframes:function(){var c,d=this,b=d.options.iframeFix;b&&(c=b===!0?"iframe":b,d._fixedFrames=a(g.body).find(c).map(function(){var b=a(this);return a("<div/>").css(p,B).appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]}))},_unfixIframes:function(){var b=this;b._fixedFrames&&(a(b._fixedFrames).remove(),delete b._fixedFrames)},_handleMouseDown:function(d){var b=this,c=b._eventNS;b._enabled&&!b._dragging&&(a(g.body).addClass(s),b._dragging=!0,b.startSent=!1,b.helper=b._isCustomHelper=null,b.stepPosition=b.mousePos=b.mouseTracker.getPosition(d),a(g).on(C+c,o(b._handleMouseMove,b)).on(_+c,o(b._handleMouseUp,b)).on(Ka+c,o(b._handleKeyDown,b)),b._fixIframes())},_initHelper:function(n){var b,c=this,e=c.element,f=c.options,d=f.helper,i=f.appendTo,j=f.cls,m=f.dragCls;c._helperInitialized||(d&&"original"!==d?(b=z(d)?d.call(c,{position:c.oriPosition,event:n}):"clone"==d?e.clone():a(d),b.parents("body").length||("parent"===i?e.after(b):i&&"body"!==i?b.appendTo(a(i)):b.appendTo(g.body)),/(fixed|absolute)/i.test(b.css(p))||b.css(p,B),A.Set(b,e,{source:"left top",target:"left top",overflow:"none"}),c._isCustomHelper=!0):(b=e,c._isCustomHelper=!1),c.helper=b,b.addClass(s+" "+u+(j?" "+j:"")+" "+oa+(m?" "+m:"")),c.oriPosition={left:h(b,k),top:h(b,l)},c._helperInitialized=!0)},_handleMouseMove:function(r){var u,q,p,C,A,n,o,i,m,g,O,N,e=this,B=e.options,E=B.step,I=B.direction,s=B.allowedPositions,U=s!==b&&s.length>0,v=B.min,w=B.max,T=e.mouseTracker,y=T.getPosition(r);if(T.isInWindow(r)&&e._dragging){if(e._initHelper(r),g=a(e.helper),O=g.width(),N=g.height(),C=h(g,l),A=h(g,k),U){var R,S,K,L,x,t,F=b,J=b,P=b,Q=b;
for(R=y.x-e.stepPosition.x,S=y.y-e.stepPosition.y,K=A+R,L=C+S,x=0;x<s.length;x++)t=s[x],t.x!==b&&(P===b||P>d(K-t.x))&&(P=d(K-t.x),F=x),t.y!==b&&(Q===b||Q>d(L-t.y))&&(Q=d(L-t.y),J=x);n=A,o=C,F!==b&&(n=s[F].x,e.stepPosition.x+=s[F].x-A),J!==b&&(o=s[J].y,e.stepPosition.y+=s[J].y-C)}else{if(i=I==G?0:y.x-e.mousePos.x,m=I==H?0:y.y-e.mousePos.y,f(E)){if(u=z(E)?E.call(this,{deltaX:i,deltaY:m,element:g,domEvent:r,helperLeft:h(g,k),helperTop:h(g,l),mouse:y}):E,Pa(u)?q=p=u:M(u)&&(q=u.x,p=u.y),f(q)&&d(i)<q&&f(p)&&d(m)<p)return;f(q)&&q>1&&i%q!==0&&(i=(i>=0?1:-1)*ha(d(i)/q)*q),f(p)&&p>1&&m%p!==0&&(m=(m>=0?1:-1)*ha(d(m)/p)*p)}n=A+i,o=j(0,C+m)}I==H&&(v!==b&&(n=j(v,n),n===v&&(i=0)),w!==b&&(n=D(w-O,n),n===w-O&&(i=0))),I==G&&(v&&(o=j(v,o),o===v&&(m=0)),w&&(o=D(w-N,o),o===w-N&&(m=0))),g.css({left:n,top:o}),e.mousePos=y,e.startSent||(e.startSent=!0,e.trigger(ca,{element:g,domEvent:r}),e._adjustZIndex(),c.DragStart(e,r)),e.trigger(Aa,{deltaX:i,deltaY:m,element:g,domEvent:r}),c.Drag(e,r)}},_handleMouseUp:function(n){var e,j,f,i,b=this,p=b.element,d=b.helper,m=b.options.animation;b._unfixIframes(),a(g.body).removeClass(s),b._dragging&&(b.startSent?(j=c.Drop(b,n),f=j.cancelled,i=j.skipAnimation,e=b.trigger(da,{left:h(d,k),top:h(d,l),element:d,domEvent:n,cancelled:f,skipAnimation:i}),i=e.skipAnimation,f=e.cancelled,f===!0||e.isDefaultPrevented()?a(d).animate({left:b.oriPosition.left,top:b.oriPosition.top},!i&&m&&m.enabled?m.revertDuration:0,o(b._endDrag,b)):(b._isCustomHelper&&(A.Set(p,d,{source:"left top",target:"left top",overflow:"none"}),b._adjustZIndex(p)),b._endDrag())):b._endDrag())},_adjustZIndex:function(b){var d=this,c=d.options.stack;c!==!1&&(f(b)||(b=d.helper),a(b).css("z-index",na(c===!0?"."+u:c)+1))},_handleKeyDown:function(b){var a=this,c=b.keyCode;switch(c){case Ra.ESC:a._dragging&&(a.helper.css({left:a.oriPosition.left+n,top:a.oriPosition.top+n}),a.trigger(ya),a._unfixIframes(),a._endDrag())}},_endDrag:function(){var b=this,c=b.options.dragCls;b._dragging=!1,b._isCustomHelper?a(b.helper).remove():a(b.helper).removeClass(s+" "+oa+(c?" "+c:"")),a(g).off(b._eventNS),b.mousePos=b.oriPosition=b.helper=b._isCustomHelper=b._helperInitialized=null},enabled:function(){var c,b=this,d=a(b.element),e=b.options,f=e.handle?a(e.handle):d,g=[].slice.call(arguments);return g.length>0?(c=!!g[0],c?(d.removeClass(ta),b._mouseDownProxy||(b._mouseDownProxy=o(b._handleMouseDown,b),f.on(t,b._mouseDownProxy))):(d.addClass(ta),b._mouseDownProxy&&(f.off(t,b._mouseDownProxy),b._mouseDownProxy=null)),b._enabled=c,void 0):b._enabled},destroy:function(){var b=this,c=b.options.cls;b.mouseTracker&&(b.mouseTracker.destroy(),b.mouseTracker=null),a(b.element).removeClass(u+(c?" "+c:"")),b._origPosStyle&&(a(b.element).css(p,b._origPosStyle),b._origPosStyle=null),m.fn.destroy.call(b)}}),Q.defaults=Y,e.ui.plugin("Draggable",Q),aa={enabled:!0,accepts:"*",cls:b,hoverCls:b,tolerance:"intersect",scope:"default",events:{}},O=m.extend({init:function(){m.fn.init.apply(this,arguments);var b=this,g=a(b.element),d=b.options,h=d.dieOnError,e=d.accepts,f=d.cls;return Oa(e)||Na(e)||e instanceof a||z(e)?(b._eventNS=".shieldDroppable"+b.getInstanceId(),g.addClass(F+(f?" "+f:"")),c.Register(b),void b.enabled(d.enabled)):void Qa("shieldDroppable: The accepts option must be a string, array, function or jQuery object.",h)},accepts:function(c){var b=this.options.accepts;return z(b)?b.call(this,c):a(c).is(b)},proportions:function(){var a=this;return arguments.length>0?void(a._proportions=arguments[0]):a._proportions?a._proportions:a._proportions={width:a.element[0].offsetWidth,height:a.element[0].offsetHeight}},over:function(d,e){var b=this,c=b.options.hoverCls,f=b.trigger("over",{draggable:d.element,droppable:this.element,domEvent:e});f.isDefaultPrevented()||a(b.element).addClass(P+(c?" "+c:""))},out:function(d,e){var b=this,c=b.options.hoverCls;b.trigger("out",{draggable:d.element,droppable:this.element,domEvent:e}),a(b.element).removeClass(P+(c?" "+c:""))},stop:function(){var b=this.options.hoverCls;a(this.element).removeClass(P+(b?" "+b:""))},drop:function(b,a){return this.trigger(za,{draggable:b.element,droppable:this.element,cancelled:a.cancelled,skipAnimation:a.skipAnimation,domEvent:a})},enabled:function(){var c,b=this,d=[].slice.call(arguments);return d.length>0?(c=!!d[0],c?a(b.element).removeClass(K):a(b.element).addClass(K),b._enabled=c,void 0):b._enabled},destroy:function(){var d=this,e=d.options.cls;c.UnRegister(d),a(d.element).removeClass(F+K+s+(e?" "+e:"")),d._enabled=d._proportions=b,m.fn.destroy.call(d)}}),O.defaults=aa,e.ui.plugin("Droppable",O)}(jQuery,shield,this),function(l,e,b,c){var L,q,P,$,ba,v,f=e.exp=e.exp||{},Ba=e.Class,Q=(e.DataSource,e.support.browser),pa=e.iid,n=document,w=l.extend,j=l.map,za=l.each,i=e.is,d=i.string,t=i.array,o=i.number,M=i["boolean"],z=i.date,a=i.defined,p=i["null"],V=i.func,Y=i.object,K=e.to["int"],wa=e.to.key,h=e.error,A=e.keys,N=(e.get,e.Constants.XHTML_NS),ca="application/octet-stream",C="download",G="Untitled",Aa=function(){},R="author",U="creator",ia="l",ja="p",ka="mm",la="in",B="pt",qa="cm",va="px",La="pc",xa="em",ya="ex",Z="RG",u="helvetica",k="times",Ca="sans-serif",Da="arial",Ga="verdana",Ha="fixed",Ia="monospace",da="serif",ea="terminal",fa="cursive",ga="fantasy",s="courier",r="normal",y="bold",D="italic",E="bolditalic",ma="center",na="both",oa="S",F="F",S="FD",ra="DF",sa="B",ta="f*",ua="B*",T=19.049976/25.4,m=function(a){return l("<div/>").text(a).html().replace('"',"&quot;").replace(/(?:[\x00-\x08]|[\x0B-\x0C]|[\x0E-\x1F])/g,"")},H=function(a){return l("<div/>").html(a).text()},W=function(a){z(a)||(d(a)&&(a=a.replace(/\s+/g,"")),a=new Date(a));var b=25569+a.getTime()/864e5;return b.toString()},X=function(b){return a(b)?z(b)?b:new Date(d(b)?b.replace(/\s+/g,""):b):new Date},I=function(a){return X(a).toISOString().replace(/\.\d+/,"")},J=function(b){return a(b)&&d(b)&&b.length>0?b.charAt(0).toUpperCase()+b.substr(1):b},x=function(a){return a?1:0},_=function(a){return("FF"+a).replace("#","").toUpperCase()},Ea=function(d){for(var b,a=K(d),c="";a>0;)b=(a-1)%26,c=String.fromCharCode(65+b)+c,a=K((a-b)/26);return c},Fa=function(a,b){return Ea(b)+a},aa=function(a,b){return'<?xml version="1.0"'+(a?' encoding="UTF-8"':"")+(b?' standalone="yes"':"")+"?>\n"},g=function(){return aa(1,1)},O=function(a){return a},Ja=function(c,b){return b=a(b)?b:7,O(((c-5)/7*100+.5)/100)},Ka=function(c,b){return b=a(b)?b:7,O((c*b+5)/b*256/256)},ha=function(a,b){if(a&&b){var c=a.indexOf(b);return c>=0&&c===a.length-b.length}return!1};!function(c){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a(c.btoa)||(c.btoa=function(a){var i,l,k,j,g,h,n,c,d=0,o=0,f="",m=[];if(!a)return a;do i=a.charCodeAt(d++),l=a.charCodeAt(d++),k=a.charCodeAt(d++),c=i<<16|l<<8|k,j=c>>18&63,g=c>>12&63,h=c>>6&63,n=63&c,m[o++]=b.charAt(j)+b.charAt(g)+b.charAt(h)+b.charAt(n);while(d<a.length);f=m.join("");var e=a.length%3;return(e?f.slice(0,e-3):f)+"===".slice(e||3)}),a(c.atob)||(c.atob=function(a){var f,h,m,l,k,j,g,e,c=0,i=0,n="",d=[];if(!a)return a;a+="";do l=b.indexOf(a.charAt(c++)),k=b.indexOf(a.charAt(c++)),j=b.indexOf(a.charAt(c++)),g=b.indexOf(a.charAt(c++)),e=l<<18|k<<12|j<<6|g,f=e>>16&255,h=e>>8&255,m=255&e,64==j?d[i++]=String.fromCharCode(f):64==g?d[i++]=String.fromCharCode(f,h):d[i++]=String.fromCharCode(f,h,m);while(c<a.length);return n=d.join("")})}(b),function(){if(b.URL=b.URL||b.webkitURL,b.Blob&&b.URL)try{new b.Blob;return void(f.Blob=b.Blob)}catch(e){}var c=b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||function(){var k=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},l=function(){this.data=[]},d=function(b,c,d){var a=this;a.data=b,a.size=b.length,a.type=c,a.encoding=d},f=l.prototype,e=d.prototype,q=b.FileReaderSync,t=function(b){var a=this;a.code=a[a.name=b]},j="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),g=j.length,c=b.URL||b.webkitURL||b,m=c.createObjectURL,o=c.revokeObjectURL,h=c,r=b.btoa,s=b.atob,u=b.ArrayBuffer,i=b.Uint8Array,v=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(d.fake=e.fake=!0;g--;)t.prototype[j[g]]=g+1;return c.createObjectURL||(h=b.URL=function(c){var b,a=n.createElementNS(N,"a");return a.href=c,"origin"in a||("data:"===a.protocol.toLowerCase()?a.origin=null:(b=c.match(v),a.origin=b&&b[1])),a}),h.createObjectURL=function(a){var b,e=a.type;return p(e)&&(e=ca),a instanceof d?(b="data:"+e,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):r?b+";base64,"+r(a.data):b+","+encodeURIComponent(a.data)):m?m.call(c,a):void 0},h.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&o&&o.call(c,a)},f.append=function(c){var e=this.data;if(a(i)&&(c instanceof u||c instanceof i)){var f,g="",h=new i(c),j=h.length;for(f=0;j>f;f++)g+=String.fromCharCode(h[f]);e.push(g)}else if("Blob"===k(c)||"File"===k(c)){if(!q)throw new t("NOT_READABLE_ERR");var l=new q;e.push(l.readAsBinaryString(c))}else c instanceof d?"base64"===c.encoding&&s?e.push(s(c.data)):"URI"===c.encoding?e.push(decodeURIComponent(c.data)):"raw"===c.encoding&&e.push(c.data):(c+="",e.push(b.unescape(encodeURIComponent(c))))},f.getBlob=function(a){return arguments.length||(a=null),new d(this.data.join(""),a,"raw")},f.toString=function(){return"[object BlobBuilder]"},e.slice=function(e,f,b){var a=this,c=arguments.length;return 3>c&&(b=null),new d(a.data.slice(e,c>1?f:a.data.length),b,a.encoding)},e.toString=function(){return"[object Blob]"},e.close=function(){this.size=0,delete this.data},l}();f.Blob=function(f,i){var d,j,e,k=i?i.type||"":"",g=new c,h=b.Uint8Array;if(f)for(d=0,j=f.length;j>d;d++)a(h)&&h&&f[d]instanceof h?g.append(f[d].buffer):g.append(f[d]);return e=g.getBlob(k),!e.slice&&e.webkitSlice&&(e.slice=e.webkitSlice),e};var d=Object.getPrototypeOf||function(a){return a.__proto__};f.Blob.prototype=d(new f.Blob)}(),function(){var e=b.saveAs||function(){if(Q.ie&&Q.version<10)return c;var g=function(){return b.URL||b.webkitURL||b},f=n.createElementNS(N,"a"),t=C in f,s=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},h=b.webkitRequestFileSystem,o=b.requestFileSystem||h||b.mozRequestFileSystem,r=function(a){(b.setImmediate||b.setTimeout)(function(){throw a},0)},i=ca,m=0,q=500,k=function(a){var c=function(){d(a)?g().revokeObjectURL(a):a.remove()};b.chrome?c():setTimeout(c,q)},j=function(b,a,e){var c,d;for(a=[].concat(a),c=a.length;c--;)if(d=b["on"+a[c]],V(d))try{d.call(b,e||b)}catch(f){r(f)}},p=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\ufeff",a],{type:a.type}):a},l=function(d,l,z){z||(d=p(d));var e,r,y,c=this,u=d.type,v=!1,w=function(){j(c,"writestart progress write writeend".split(" "))},n=function(){var f;(v||!e)&&(e=g().createObjectURL(d)),r?r.location.href=e:(f=b.open(e,"_blank"),a(f)||"undefined"==typeof safari||(b.location.href=e)),c.readyState=c.DONE,w(),k(e)},q=function(a){return function(){return c.readyState!==c.DONE?a.apply(this,arguments):void 0}},x={create:!0,exclusive:!1};return c.readyState=c.INIT,l||(l=G),t?(e=g().createObjectURL(d),f.href=e,f.download=l,void setTimeout(function(){s(f),w(),k(e),c.readyState=c.DONE})):(b.chrome&&u&&u!==i&&(y=d.slice||d.webkitSlice,d=y.call(d,0,d.size,i),v=!0),h&&l!==C&&(l+="."+C),(u===i||h)&&(r=b),o?(m+=d.size,void o(b.TEMPORARY,m,q(function(a){a.root.getDirectory("saved",x,q(function(a){var b=function(){a.getFile(l,x,q(function(a){a.createWriter(q(function(b){b.onwriteend=function(b){r.location.href=a.toURL(),c.readyState=c.DONE,j(c,"writeend",b),k(a)},b.onerror=function(){var a=b.error;a.code!==a.ABORT_ERR&&n()},"writestart progress write abort".split(" ").forEach(function(a){b["on"+a]=c["on"+a]}),b.write(d),c.abort=function(){b.abort(),c.readyState=c.DONE},c.readyState=c.WRITING}),n)}),n)};a.getFile(l,{create:!1},q(function(a){a.remove(),b()}),q(function(a){a.code===a.NOT_FOUND_ERR?b():n()}))}),n)}),n)):void n())},e=l.prototype,u=function(a,b,c){return new l(a,b,c)};return a(navigator)&&navigator.msSaveOrOpenBlob?function(a,b,c){return c||(a=p(a)),navigator.msSaveOrOpenBlob(a,b||G)}:(e.abort=function(){var a=this;a.readyState=a.DONE,j(a,"abort")},e.readyState=e.INIT=0,e.WRITING=1,e.DONE=2,e.error=e.onwritestart=e.onprogress=e.onwrite=e.onabort=e.onerror=e.onwriteend=null,u)}();f.saveAs=function(c){var d=c.content,g=c.contentType,i=c.name,m=c.noAutoBom,j=c.proxy,k="suidlifrm"+pa();a(e)&&!c.forceProxy?e(new f.Blob([d],{type:g}),i,m):j?(l(L).remove(),L=l('<div style="display:none;"><iframe name="'+k+'"></iframe></div>').appendTo(n.body),l('<form action="'+j+'" target="'+k+'" method="POST"><input type="hidden" name="fileName" value="'+i+'"/><input type="hidden" name="contentType" value="'+g+'"/><input type="hidden" name="base64content" value="'+b.btoa(d)+'"/></form>').appendTo(L).submit()):h("shield.export.saveAs: No proxy url set for older browser support",c.dieOnError)},f.saveAsNative=a(e)}(),q=Ba.extend({init:function(a){this.options=w(!0,{},a)},getExt:null,getContentType:null,getContent:null,saveAs:function(b){var d=this,c=b.fileName,i=a(b.forceExt)?!!b.forceExt:!0,e=d.getExt(),j=!f.saveAsNative||b.forceProxy?{type:"string"}:{},g=d.getContent(j);return a(g)?(c||(c=G),c+="",!ha(c,e)&&i&&(c+=e),void f.saveAs({content:g,contentType:d.getContentType(),name:c,proxy:b.proxy,forceProxy:b.forceProxy,noAutoBom:b.noAutoBom,dieOnError:b.dieOnError})):void h("shield.export.ExportBase.saveAs: Error generating content",d.options.dieOnError)},destroy:Aa}),v=q.extend({getExt:function(){return".xml"},getContentType:function(){return"text/xml;charset=utf-8"},getContent:function(L){var j,k,K=this,t=K.options,G=I(t.created||new Date),s=t.author,B=t.worksheets||[],F=20,D=[],v=[];for(s=H("&#x53;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x20;&#x55;&#x49;&#x20;&#x46;&#x72;&#x61;&#x6D;&#x65;&#x77;&#x6F;&#x72;&#x6B;"),k=aa()+'<?mso-application progid="Excel.Sheet"?><Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40"><DocumentProperties xmlns="urn:schemas-microsoft-com:office:office"><Created>'+G+"</Created>"+(s?"<Author>"+s+"</Author>":"")+'</DocumentProperties><ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"><ProtectStructure>False</ProtectStructure><ProtectWindows>False</ProtectWindows></ExcelWorkbook>',j=0;j<B.length;j++){var q,e,n,f,g,l,c,h,r,i,d,b,u=B[j],E=u.name,C=u.columns||[],y=[],A=u.rows||[],w=[];for(e=0;e<C.length;e++)f=C[e],y.push("<Column"+(a(f.autoWidth)?' ss:AutoFitWidth="'+x(f.autoWidth)+'"':"")+(a(f.width)?' ss:Width="'+f.width+'"':"")+(a(f.index)?' ss:Index="'+f.index+'"':"")+"/>");for(e=0;e<A.length;e++){for(g=A[e],q=g.cells||[],l="<Row"+(a(g.height)?' ss:Height="'+g.height+'"':"")+(a(g.index)?' ss:Index="'+g.index+'"':"")+">",n=0;n<q.length;n++)c=q[n],h=c.type,d=c.value,b=c.style,i=null,r=a(h)&&!p(h)?h===Date?"DateTime":h===Number?"Number":h===Boolean?"Boolean":"String":z(d)?"DateTime":o(d)?"Number":M(d)?"Boolean":"String","DateTime"==r&&(d=I(d)),Y(b)&&(i="s"+F++,D.push('<Style ss:ID="'+i+'"><Alignment'+(b.textAlign?' ss:Horizontal="'+J(b.textAlign)+'"':"")+(b.verticalAlign?' ss:Vertical="'+J(b.verticalAlign)+'"':"")+(a(b.wrap)?' ss:WrapText="'+x(b.wrap)+'"':"")+"/>"+(a(b.format)?'<NumberFormat ss:Format="'+m(b.format)+'"/>':"")+"<Font"+(a(b.bold)?' ss:Bold="'+x(b.bold)+'"':"")+(a(b.italic)?' ss:Italic="'+x(b.italic)+'"':"")+(a(b.color)?' ss:Color="'+b.color+'"':"")+(a(b.fontName)?' ss:FontName="'+b.fontName+'"':"")+(a(b.fontSize)?' ss:Size="'+b.fontSize+'"':"")+"/><Interior"+(a(b.background)?' ss:Color="'+b.background+'" ss:Pattern="Solid"':"")+"/></Style>")),l+="<Cell"+(i?' ss:StyleID="'+i+'"':"")+(a(c.index)?' ss:Index="'+c.index+'"':"")+(a(c.colSpan)?' ss:MergeAcross="'+c.colSpan+'"':"")+(a(c.rowSpan)?' ss:MergeDown="'+c.rowSpan+'"':"")+'><Data ss:Type="'+r+'">'+(a(d)?m(d):"")+"</Data></Cell>";l+="</Row>",w.push(l)}v.push('<Worksheet ss:Name="'+(E?m(E):"Sheet1")+'"><Table>'+y.join("")+w.join("")+"</Table></Worksheet>")}return k+='<Styles><Style ss:ID="Default" ss:Name="Normal"><Alignment ss:Vertical="Bottom"/><Borders/><Font/><Interior/><NumberFormat/><Protection/></Style>'+D.join("")+"</Styles>",k+=v.join(""),k+="</Workbook>"}}),ba=q.extend({getExt:function(){return".xlsx"},getContentType:function(){return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},getContent:function(R){var oa=this,r=oa.options,na=r.dieOnError;if(!a(b.JSZip))return r.noLegacyFallback?void h("shield.export.OOXMLWorkbook.getContent: No ZIP library found",na):new v(r).getContent();var S,T,$,ga,ia,ha,da,ba,aa,s,k,t,d,ma=I(r.created||new Date),P=r.author,n=r.worksheets||[],ca=n.length,e=new b.JSZip,L=[],N={},O=[],G=100,C=['<font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font>'],D=['<fill><patternFill patternType="none"/></fill>','<fill><patternFill patternType="gray125"/></fill>'],x=['<xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/>'],la=function(b){var e,f,g,d="";return!b||A(b).length<=0?c:(e=wa(b),N[e]?N[e].cellXfsIndex:(a(b.format)&&(G++,O.push('<numFmt numFmtId="'+G+'" formatCode="'+m(b.format).replace(" ","\\ ")+'"/>'),d+=' numFmtId="'+G+'" applyNumberFormat="1"'),b.background&&(D.push('<fill><patternFill patternType="solid"><fgColor rgb="'+_(b.background)+'"/></patternFill></fill>'),d+=' fillId="'+(D.length-1)+'" applyFill="1"'),(a(b.bold)||a(b.color)||a(b.fontName)||a(b.fontSize)||a(b.italic))&&(C.push("<font>"+(a(b.bold)?'<b val="'+!!b.bold+'"/>':"")+(a(b.color)?'<color rgb="'+_(b.color)+'"/>':"")+(a(b.fontName)?'<name val="'+b.fontName+'"/>':"")+(a(b.fontSize)?'<sz val="'+b.fontSize+'"/>':"")+(a(b.italic)?'<i val="'+!!b.italic+'"/>':"")+"</font>"),d+=' fontId="'+(C.length-1)+'" applyFont="1"'),(a(b.textAlign)||a(b.verticalAlign)||a(b.wrap))&&(f="<alignment"+(a(b.textAlign)?' horizontal="'+b.textAlign+'"':"")+(a(b.verticalAlign)?' vertical="'+b.verticalAlign+'"':"")+(a(b.wrap)?' wrapText="'+!!b.wrap+'"':"")+"/>"),d||f?(g="<xf"+(d?d:"")+(f?">"+f+"</xf>":"/>"),x.push(g),N[e]={cellXfsIndex:x.length-1},x.length-1):c))};for(S=g()+'<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/>'+j(n,function(b,a){return'<Override PartName="/xl/worksheets/sheet'+(a+1)+'.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>'}).join("")+'<Override PartName="/xl/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/></Types>',T=g()+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',$=g()+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>'+ca+'</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="'+ca+'" baseType="lpstr">'+j(n,function(a,b){return"<vt:lpstr>"+(a.name?m(a.name):"Sheet"+(b+1))+"</vt:lpstr>"}).join("")+"</vt:vector></TitlesOfParts><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>15.0300</AppVersion></Properties>",P=H("&#x53;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x20;&#x55;&#x49;&#x20;&#x46;&#x72;&#x61;&#x6D;&#x65;&#x77;&#x6F;&#x72;&#x6B;"),ga=g()+'<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>'+(P?P:"")+'</dc:creator><dcterms:created xsi:type="dcterms:W3CDTF">'+ma+"</dcterms:created></cp:coreProperties>",ia=g()+'<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x15" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><fileVersion appName="xl" lastEdited="6" lowestEdited="4" rupBuild="14420"/><workbookPr filterPrivacy="1" defaultThemeVersion="124226"/><sheets>'+j(n,function(b,a){return'<sheet name="'+(b.name?m(b.name):"Sheet"+(a+1))+'" sheetId="'+(a+1)+'" r:id="rId'+(a+1)+'"/>'}).join("")+"</sheets></workbook>",da=g()+'<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"/>',s=1,ba=g()+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">'+j(n,function(b,c){var a=s++;return'<Relationship Id="rId'+a+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet'+a+'.xml"/>'}).join("")+'<Relationship Id="rId'+s++ +'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml"/><Relationship Id="rId'+s++ +'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId'+s++ +'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/></Relationships>',aa=g()+'<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"><a:themeElements><a:clrScheme name="Office"><a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1><a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1><a:dk2><a:srgbClr val="1F497D"/></a:dk2><a:lt2><a:srgbClr val="EEECE1"/></a:lt2><a:accent1><a:srgbClr val="4F81BD"/></a:accent1><a:accent2><a:srgbClr val="C0504D"/></a:accent2><a:accent3><a:srgbClr val="9BBB59"/></a:accent3><a:accent4><a:srgbClr val="8064A2"/></a:accent4><a:accent5><a:srgbClr val="4BACC6"/></a:accent5><a:accent6><a:srgbClr val="F79646"/></a:accent6><a:hlink><a:srgbClr val="0000FF"/></a:hlink><a:folHlink><a:srgbClr val="800080"/></a:folHlink></a:clrScheme><a:fontScheme name="Office"><a:majorFont><a:latin typeface="Cambria" panose="020F0302020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface=" "/><a:font script="Hang" typeface=" "/><a:font script="Hans" typeface=""/><a:font script="Hant" typeface=""/><a:font script="Arab" typeface="Times New Roman"/><a:font script="Hebr" typeface="Times New Roman"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="MoolBoran"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Times New Roman"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/></a:majorFont><a:minorFont><a:latin typeface="Calibri" panose="020F0502020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface=" "/><a:font script="Hang" typeface=" "/><a:font script="Hans" typeface=""/><a:font script="Hant" typeface=""/><a:font script="Arab" typeface="Arial"/><a:font script="Hebr" typeface="Arial"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="DaunPenh"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Arial"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/></a:minorFont></a:fontScheme><a:fmtScheme name="Office"><a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="16200000" scaled="1"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:shade val="51000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="80000"><a:schemeClr val="phClr"><a:shade val="93000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="94000"/><a:satMod val="135000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="16200000" scaled="0"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst><a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d><a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/></a:theme>',k=0;k<n.length;k++){var U,V=n[k],X=V.columns||[],Y=X.length,Z=V.rows||[],ka=Z.length,F="",E=[],Q=[];for(t=0;ka>t;t++){var l=Z[t],ea=[],fa=l.cells||[],ja=fa.length;for(d=0;ja>d;d++){var q,K,J,B=fa[d],u=B.type,f=B.value,y=w({},B.style||{});a(u)&&!p(u)?u===Date?(q=c,f=W(f),y.format||(y.format="m/d/yyyy hh:mm")):q=u===Number?c:u===Boolean?"b":"inlineStr":z(f)?(q=c,f=W(f),y.format||(y.format="m/d/yyyy hh:mm")):q=o(f)?c:M(f)?"b":"inlineStr",K=la(y),J=(f+"").length,(!a(E[d])||E[d]<J)&&(E[d]=J),ea.push("<c"+(a(B.index)?' r="'+Fa(a(l.index)?l.index:t+1,B.index)+'"':"")+(a(q)?' t="'+q+'"':"")+(a(K)?' s="'+K+'"':"")+">"+("inlineStr"==q?"<is><t>"+m(f)+"</t></is>":"<v>"+f+"</v>")+"</c>")}Q.push("<row"+(a(l.index)?' r="'+l.index+'"':"")+(a(l.height)?' ht="'+l.height+'" customHeight="1"':"")+">"+ea.join("")+"</row>")}if(Y>0){for(F="<cols>",d=0;Y>d;d++){var i=X[d];F+="<col"+(a(i.index)?' min="'+i.index+'" max="'+i.index+'"':' min="'+(d+1)+'" max="'+(d+1)+'"')+(a(i.width)?' width="'+Ja(i.width)+'"':"")+(i.autoWidth!==!0&&a(i.width)?"":' width="'+Ka(E[d])+'"')+(i.autoWidth===!0?' bestFit="1"':"")+(a(i.autoWidth)||a(i.width)?' customWidth="1"':"")+"/>"}F+="</cols>"}U=g()+'<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><dimension ref="A1"/><sheetViews><sheetView tabSelected="1" workbookViewId="0"/></sheetViews><sheetFormatPr defaultRowHeight="15" x14ac:dyDescent="0.25"/>'+F+"<sheetData>"+Q.join("")+'</sheetData><pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3"/></worksheet>',L.push(U)}for(ha=g()+'<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="'+O.length+'">'+O.join("")+'</numFmts><fonts count="'+C.length+'" x14ac:knownFonts="1">'+C.join("")+'</fonts><fills count="'+D.length+'">'+D.join("")+'</fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="'+x.length+'">'+x.join("")+'</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles><dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>',
e.file("[Content_Types].xml",S),e.file("_rels/.rels",T),e.file("docProps/app.xml",$),e.file("docProps/core.xml",ga),e.file("xl/workbook.xml",ia),e.file("xl/styles.xml",ha),e.file("xl/sharedStrings.xml",da),e.file("xl/_rels/workbook.xml.rels",ba),e.file("xl/theme/theme1.xml",aa),k=0;k<L.length;k++)e.file("xl/worksheets/sheet"+(k+1)+".xml",L[k]);return R&&"string"!=R.type&&b.JSZip.support.uint8array?e.generate({type:"uint8array"}):e.generate({type:"string"})},saveAs:function(d){var e=this,c=e.options;return a(b.JSZip)?q.fn.saveAs.call(this,d):c.noLegacyFallback?void h("shield.export.OOXMLWorkbook.saveAs: No ZIP library found",c.dieOnError):new v(c).saveAs(d)}}),$={unit:B,textColor:"0 g",drawColor:"0 G",fontSize:12,lineHeight:1.15,lineWidth:.200025,producer:"ShieldUI PDF Builder",created:new Date},P=q.extend({_version:"1.3",_formats:{a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"credit-card":[153,243]},_documentProps:["title","subject",R,"keywords",U],_capJoinStyles:{0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_noMargins:{left:0,top:0,bottom:0},init:function(d){this.options=w(!0,$,d,{});var a=this,b=a.options;b.dieOnError;a._scaleFactor=a._getScaleFactor(),a._fontSize=b.fontSize,a._textColor=b.textColor,a._objectNumber=2,a._printToDoc=!0,a._offsets=[],a._fonts={},a._fontmap={},a._pages=[],a._pagesContext=[],a._pageDim=[],a._content=[],a._additionalObjects=[],a._page=a._lineCapID=a._lineJoinID=a._contentLength=0,a._fontKey=a._tmp=a._currentPage=a._pageWidth=a._pageHeight=a._pageMode=a._zoomMode=a._layoutMode=c,a._cellPadding=3,a._cellMargin=13,a._lastCellPos={x:c,y:c,w:c,h:c,ln:c},a._cellHeaderFunction=a._tablePrintHeader=a._cellMargins=a._cellTableHeaderRow=a._cellPrintingHeaderRow=a._tableFontSize=c,a._cellPages=1,a.addFonts(),a._fontKey="F1"},getExt:function(){return".pdf"},getContentType:function(){return"application/pdf"},getContent:function(a){var b=this;return a&&"string"!=a.type?b._getArrayBuffer():b._build()},_toString:function(a){return(""+a).toLowerCase()},_getScaleFactor:function(){var a=this,b=a.options.unit;switch(b){case B:return 1;case ka:return 72/25.4000508;case qa:return 72/2.54000508;case la:return 72;case va:return 96/72;case La:return 12;case xa:return 12;case ya:return 6;default:return void h("shieldExport: Invalid measurement unit: "+b,a.options.dieOnError)}},_setNumberPrecision:function(a,b){return a.toFixed(b)},_setPadding:function(a,b,c){return("0"+parseInt(a,b)).slice(-c)},_write:function(b){var a=this;a._printToDoc?(a._contentLength+=b.length+1,a._content.push(b)):a._pages[a._currentPage].push(b)},_createObject:function(){var a=this;return a._objectNumber++,a._offsets[a._objectNumber]=a._contentLength,a._write(a._objectNumber+" 0 obj"),a._objectNumber},_createAdditionalObject:function(){var a=this,c=2*a._pages.length+1+a._additionalObjects.length,b={objId:c,content:""};return a._additionalObjects.push(b),b},_createObjectDeferred:function(){var a=this;return a._objectNumber++,a._offsets[a._objectNumber]=function(){return a._contentLength},a._objectNumber},_createObjectDeferredBegin:function(b){var a=this;a._offsets[b]=a._contentLength},_writeStream:function(b){var a=this;a._write("stream"),a._write(b),a._write("endstream")},_writePages:function(){var b,d,i,c,f,g,e,a=this,j=(a.options,!1),h=(a._pages,a._pageDim);for(b=1;b<=a._page;b++)a._createObject(),f=(a._pageWidth=h[b].width)*a._scaleFactor,g=(a._pageHeight=h[b].height)*a._scaleFactor,a._write("<</Type /Page"),a._write("/Parent 1 0 R"),a._write("/Resources 2 0 R"),a._write("/MediaBox [0 0 "+a._setNumberPrecision(f,2)+" "+a._setNumberPrecision(g,2)+"]"),a._write("/Contents "+(a._objectNumber+1)+" 0 R"),a._write(">>"),a._write("endobj"),d=a._pages[b].join("\n"),a._createObject(),j?(i=[],c=d.length):a._write("<</Length "+d.length+">>"),a._writeStream(d),a._write("endobj");for(a._offsets[1]=a._contentLength,a._write("1 0 obj"),a._write("<</Type /Pages"),e="/Kids [",c=0;c<a._page;c++)e+=3+2*c+" 0 R ";a._write(e+"]"),a._write("/Count "+a._page),a._write(">>"),a._write("endobj")},_writeFont:function(b){var a=this;b.objectNumber=a._createObject(),a._write("<</BaseFont/"+b.PostScriptName+"/Type/Font"),"string"==typeof b.encoding&&a._write("/Encoding/"+b.encoding),a._write("/Subtype/Type1>>"),a._write("endobj")},_writeFonts:function(){var b=this,a=b._fonts;for(var c in a)a.hasOwnProperty(c)&&b._writeFont(a[c])},_writeXObjectDictionary:function(){},_writeResourceDictionary:function(){var b,a=this,c=a._fonts;a._write("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),a._write("/Font <<");for(b in c)c.hasOwnProperty(b)&&a._write("/"+b+" "+c[b].objectNumber+" 0 R");a._write(">>"),a._write("/XObject <<"),a._writeXObjectDictionary(),a._write(">>")},_writeResources:function(){var a=this,b=a._offsets;a._writeFonts(),b[2]=a._contentLength,a._write("2 0 obj"),a._write("<<"),a._writeResourceDictionary(),a._write(">>"),a._write("endobj")},_writeAdditionalObjects:function(){var b,c,a=this,e=a._offsets,d=a._additionalObjects;for(c=0;c<d.length;c++)b=d[c],e[b.objId]=a._contentLength,a._write(b.objId+" 0 obj"),a._write(b.content),a._write("endobj");a._objectNumber+=d.length},_writeToFontDictionary:function(c,a,d){var b=this;b._fontmap.hasOwnProperty(a)||(b._fontmap[a]={}),b._fontmap[a][d]=c},_to8bitStream:function(e,k){var o,b,n,f,l,p,j,m,a,q=this,g=q._fonts,i=q._fontKey;if(k=k||{},o=k.sourceEncoding||"Unicode",b=k.outputEncoding,(k.autoencode||b)&&g[i].metadata&&g[i].metadata[o]&&g[i].metadata[o].encoding&&(n=g[i].metadata[o].encoding,!b&&g[i].encoding&&(b=g[i].encoding),!b&&n.codePages&&(b=n.codePages[0]),d(b)&&(b=n[b]),b)){for(l=!1,f=[],a=0,m=e.length;m>a;a++)j=b[e.charCodeAt(a)],j?f.push(String.fromCharCode(j)):f.push(e[a]),f[a].charCodeAt(0)>>8&&(l=!0);e=f.join("")}for(a=e.length;void 0===l&&0!==a;)e.charCodeAt(a-1)>>8&&(l=!0),a--;if(!l)return e;for(f=k.noBOM?[]:[254,255],a=0,m=e.length;m>a;a++){if(j=e.charCodeAt(a),p=j>>8,p>>8)return void h("shieldExport: Character at position "+a+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE",q.options.dieOnError);f.push(p),f.push(j-(p<<8))}return String.fromCharCode.apply(c,f)},_escape:function(a,b){return this._to8bitStream(a,b).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_writeInfo:function(){var c,f,l,k,j,i,d,g,e,b=this,h=b.options,m=h.producer,o=h.created,n=b._documentProps;for(a(m)&&b._write("/Producer ("+m+")"),e=0;e<n.length;e++)d=n[e],g=h[d],(d===R||d===U)&&(g=H("&#x53;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x20;&#x55;&#x49;&#x20;&#x46;&#x72;&#x61;&#x6D;&#x65;&#x77;&#x6F;&#x72;&#x6B;")),g&&b._write("/"+J(d)+" ("+b._escape(g)+")");c=X(o),f=c.getTimezoneOffset(),l=0>f?"+":"-",k=Math.floor(Math.abs(f/60)),j=Math.abs(f%60),i=[l,b._setPadding(k,10,2),"'",b._setPadding(j,10,2),"'"].join(""),b._write(["/CreationDate (D:",c.getFullYear(),b._setPadding(c.getMonth()+1,10,2),b._setPadding(c.getDate(),10,2),b._setPadding(c.getHours(),10,2),b._setPadding(c.getMinutes(),10,2),b._setPadding(c.getSeconds(),10,2),i,")"].join(""))},_writeCatalog:function(){var b,a=this;switch(a._write("/Type /Catalog"),a._write("/Pages 1 0 R"),a._zoomMode||(a._zoomMode="fullwidth"),a._zoomMode){case"fullwidth":a._write("/OpenAction [3 0 R /FitH null]");break;case"fullheight":a._write("/OpenAction [3 0 R /FitV null]");break;case"fullpage":a._write("/OpenAction [3 0 R /Fit]");break;case"original":a._write("/OpenAction [3 0 R /XYZ null null 1]");break;default:b=""+a._zoomMode,"%"===b.substr(b.length-1)&&(a._zoomMode=parseInt(a._zoomMode,10)/100),o(a._zoomMode)&&a._write("/OpenAction [3 0 R /XYZ null null "+a._setNumberPrecision(a._zoomMode,2)+"]")}switch(a._layoutMode||(a._layoutMode="continuous"),a._layoutMode){case"continuous":a._write("/PageLayout /OneColumn");break;case"single":a._write("/PageLayout /SinglePage");break;case"two":case"twoleft":a._write("/PageLayout /TwoColumnLeft");break;case"tworight":a._write("/PageLayout /TwoColumnRight")}a._pageMode&&a._write("/PageMode /"+a._pageMode)},_writeTrailer:function(){var a=this,b=a._objectNumber;a._write("/Size "+(b+1)),a._write("/Root "+b+" 0 R"),a._write("/Info "+(b-1)+" 0 R")},addFont:function(e,c,d,f){var g,b=this,a="F"+(A(b._fonts).length+1).toString(10);return g=b._fonts[a]={id:a,PostScriptName:e,fontName:c,fontStyle:d,encoding:f,metadata:{}},b._writeToFontDictionary(a,c,d),a},addFonts:function(){var d,c,a,e,f=this,g="StandardEncoding",b=[["Helvetica",u,r],["Helvetica-Bold",u,y],["Helvetica-Oblique",u,D],["Helvetica-BoldOblique",u,E],["Courier",s,r],["Courier-Bold",s,y],["Courier-Oblique",s,D],["Courier-BoldOblique",s,E],["Times-Roman",k,r],["Times-Bold",k,y],["Times-Italic",k,D],["Times-BoldItalic",k,E]];for(a=0,e=b.length;e>a;a++)d=f.addFont(b[a][0],b[a][1],b[a][2],g),c=b[a][0].split("-"),f._writeToFontDictionary(d,c[0],c[1]||"")},getActiveFontObj:function(){var d=this,a=d._fonts,b=d._fontKey;return a&&b&&a[b]?a[b]:c},getFontObj:function(e,f){var d=this,a=d._fonts,b=d.getFont(e,f);return a&&b&&a[b]?a[b]:c},getFont:function(b,d){var e,f=this,h=f._fonts,g=f._fontmap;switch(b=a(b)?b:h[f._fontKey].fontName,d=a(d)?d:f._fontKey?h[f._fontKey].fontStyle:c,a(b)&&(b=b.toLowerCase()),d){case Ca:case Ga:case Da:b=u;break;case Ha:case Ia:case ea:b=s;break;case da:case fa:case ga:b=k;break;default:b=k}try{e=g[b][d]}catch(i){}return e||(e=g[k][d],null==e&&(e=g[k][r])),e},_setPage:function(a){var b=this,c=b._pageDim;a>0&&a<=b._page&&(b._currentPage=a,b._pageWidth=c[a].width,b._pageHeight=c[a].height)},_beginPage:function(b,c){var f,a=this,g=a._formats,h=a._pages,i=a._pageDim,j=a._pagesContext,e=d(c)&&c.toLowerCase();if(d(b)&&(f=b.toLowerCase(),g.hasOwnProperty(f)&&(b=g[f][0]/a._scaleFactor,c=g[f][1]/a._scaleFactor)),t(b)&&(c=b[1],b=b[0]),e){switch(e.substr(0,1)){case ia:c>b&&(e="s");break;case ja:b>c&&(e="s")}"s"===e&&(a._tmp=b,b=c,c=a._tmp)}a._printToDoc=!1,a._page++,h[a._page]=[],i[a._page]={width:Number(b)||a._pageWidth,height:Number(c)||a._pageHeight},j[a._page]={},a._setPage(a._page)},addPage:function(){var a=this,b=a.options,c=b.drawColor,d=b.lineWidth;a._beginPage.apply(a,arguments),a._write(a._setNumberPrecision(d*a._scaleFactor,2)+" w"),a._write(c),0!==a._lineCapID&&a._write(a._lineCapID+" J"),0!==a._lineJoinID&&a._write(a._lineJoinID+" j")},deletePage:function(b){var a=this,c=a._pages,d=a._pageDim;b>0&&b<=a._page&&(c.splice(b,1),d.splice(b,1),a._page--,a._currentPage>a._page&&(a._currentPage=a._page),a._setPage(a._currentPage))},getFontSize:function(){var a=this;return a._fontSize},getLineHeight:function(){var a=this;return a.getFontSize()*a.options.lineHeight},getCoordinateString:function(b){var a=this;return a._setNumberPrecision(b*a._scaleFactor,2)},getVerticalCoordinateString:function(b){var a=this;return a._setNumberPrecision((a._pageHeight-b)*a._scaleFactor,2)},getPageSize:function(){var a=this;return{width:a._pageWidth,height:a._pageHeight}},getNumberOfPages:function(){var a=this;return a._pages.length-1},getPages:function(){var a=this;return a._pages},getPageInfo:function(a){var b=this,c=2*(a-1)+3;return{objId:c,pageNumber:a,pageContext:b._pagesContext[a]}},getCurrentPageInfo:function(){return this.getPageInfo(this._currentPage)},movePage:function(c,b){var h,i,j,a,g=this,d=g._pages,e=g._pageDim,f=g._pagesContext;if(c>b){for(h=d[c],i=e[c],j=f[c],a=c;a>b;a--)d[a]=d[a-1],e[a]=e[a-1],f[a]=f[a-1];d[b]=h,e[b]=i,f[b]=j,g._setPage(b)}else if(b>c){for(h=d[c],i=e[c],j=f[c],a=c;b>a;a++)d[a]=d[a+1],e[a]=e[a+1],f[a]=f[a+1];d[b]=h,e[b]=i,f[b]=j,g._setPage(b)}return g},insertPage:function(){var a=this,b=[].slice.call(arguments),c=b.shift();return a.addPage.apply(a,b),a.movePage(a._currentPage,c),a},setDisplayMode:function(b,c,d){var a=this;return a._zoomMode=b,a._layoutMode=c,a._pageMode=d,a},_ESC:function(a,c){var b=this,d=b.options;return a=a.split("	").join(new Array(d.TabLen||9).join(" ")),b._escape(a,c)},text:function(c,g,x,e,f,l){var y,t,u,w,i,k,m,E,q,z,r,C,s,n,b=this,A="",B="Td",v="",p=b.getCurrentPageInfo().pageContext,D=b.getLineHeight();if(d(c)&&(c=c.match(/[\n\r]/)?c.split(/\r\n|\r|\n/g):[c]),d(f)&&(l=f,f=null),d(e)&&(l=e,e=null),o(e)&&(f=e,e=null),f&&(f*=Math.PI/180,t=Math.cos(f),u=Math.sin(f),A=[b._setNumberPrecision(t,2),b._setNumberPrecision(u,2),b._setNumberPrecision(-1*u,2),b._setNumberPrecision(t,2),""].join(" "),B="Tm"),e=e||{},"noBOM"in e||(e.noBOM=!0),"autoencode"in e||(e.autoencode=!0),e.stroke===!0?p.lastTextWasStroke!==!0&&(v="1 Tr\n",p.lastTextWasStroke=!0):(p.lastTextWasStroke&&(v="0 Tr\n"),p.lastTextWasStroke=!1),a(b._runningPageHeight)||(b._runningPageHeight=0),d(c))c=b._ESC(c,e);else{if(!(c instanceof Array))return void h('Type of text must be string or Array. "'+c+'" is not recognized.',b.options.dieOnError);for(w=c.concat(),i=[],m=w.length;m--;)i.push(b._ESC(w.shift(),e));if(E=Math.ceil((b._pageHeight-x-b._runningPageHeight)*b._scaleFactor/b.getLineHeight()),l){if(n=j(c,function(a){return b._getStringWidth(a)*b.getFontSize()/b._scaleFactor}),s=Math.max.apply(Math,n),l===ma)q=g-s/2,g-=n[0]/2;else{if("right"!==l)return void h('Unrecognized alignment option, use "center" or "right".',b.options.dieOnError);q=g-s,g-=n[0]}for(z=g,c=i[0]+") Tj\n",k=1,m=i.length;m>k;k++)r=s-n[k],"center"===l&&(r/=2),c+=q-z+r+" -"+D+" Td ("+i[k],z=q+r,m-1>k&&(c+=") Tj\n")}else c=i.join(") Tj\nT* (")}return y||(C=b._setNumberPrecision((b._pageHeight-x)*b._scaleFactor,2)),b._write("BT\n/"+b._fontKey+" "+b.getFontSize()+" Tf\n"+b.getLineHeight()+" TL\n"+v+b._textColor+"\n"+A+b._setNumberPrecision(g*b._scaleFactor,2)+" "+C+" "+B+"\n("+c+") Tj\nET"),y&&b.text(y,g,x),b},lstext:function(b,c,e,f){var a,d,g=this;for(a=0,d=b.length;d>a;a++,c+=f)g.text(b[a],c,e)},line:function(a,b,c,d){return this.lines([[c-a,d-b]],a,b)},clip:function(){var a=this;a._write("W"),a._write("S")},lines:function(e,h,k,j,q,s){var g,f,i,m,b,r,l,n,p,d,c,a=this;for(o(e)&&(a._tmp=k,k=h,h=e,e=a._tmp),j=j||[1,1],a._write(a._setNumberPrecision(h*a._scaleFactor,3)+" "+a._setNumberPrecision((a._pageHeight-k)*a._scaleFactor,3)+" m "),g=j[0],f=j[1],m=e.length,d=h,c=k,i=0;m>i;i++)b=e[i],2===b.length?(d=b[0]*g+d,c=b[1]*f+c,a._write(a._setNumberPrecision(d*a._scaleFactor,3)+" "+a._setNumberPrecision((a._pageHeight-c)*a._scaleFactor,3)+" l")):(r=b[0]*g+d,l=b[1]*f+c,n=b[2]*g+d,p=b[3]*f+c,d=b[4]*g+d,c=b[5]*f+c,a._write(a._setNumberPrecision(r*a._scaleFactor,3)+" "+a._setNumberPrecision((a._pageHeight-l)*a._scaleFactor,3)+" "+a._setNumberPrecision(n*a._scaleFactor,3)+" "+a._setNumberPrecision((a._pageHeight-p)*a._scaleFactor)+" "+a._setNumberPrecision(d*a._scaleFactor)+" "+a._setNumberPrecision((a._pageHeight-c)*a._scaleFactor)+" c"));return s&&a._write(" h"),null!==q&&a._write(a.getStyle(q)),a},rect:function(c,d,e,f,b){var a=this;a.getStyle(b);return a._write([a._setNumberPrecision(c*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-d)*a._scaleFactor,2),a._setNumberPrecision(e*a._scaleFactor,2),a._setNumberPrecision(-f*a._scaleFactor,2),"re"].join(" ")),null!==b&&a._write(a.getStyle(b)),a},triangle:function(a,b,c,d,e,f,h){var g=this;return g.lines([[c-a,d-b],[e-c,f-d],[a-e,b-f]],a,b,[1,1],h,!0),g},roundedRect:function(g,h,d,e,a,b,i){var f=this,c=4/3*(Math.SQRT2-1);return f.lines([[d-2*a,0],[a*c,0,a,b-b*c,a,b],[0,e-2*b],[0,b*c,-(a*c),b,-a,b],[-d+2*a,0],[-(a*c),0,-a,-(b*c),-a,-b],[0,-e+2*b],[0,-(b*c),a*c,-b,a,-b]],g+a,h,[1,1],i),f},ellipse:function(b,c,d,e,h){var a=this,f=4/3*(Math.SQRT2-1)*d,g=4/3*(Math.SQRT2-1)*e;return a._write([a._setNumberPrecision((b+d)*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-c)*a._scaleFactor,2),"m",a._setNumberPrecision((b+d)*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-(c-g))*a._scaleFactor,2),a._setNumberPrecision((b+f)*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-(c-e))*a._scaleFactor,2),a._setNumberPrecision(b*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-(c-e))*a._scaleFactor,2),"c"].join(" ")),a._write([a._setNumberPrecision((b-f)*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-(c-e))*a._scaleFactor,2),a._setNumberPrecision((b-d)*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-(c-g))*a._scaleFactor,2),a._setNumberPrecision((b-d)*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-c)*a._scaleFactor,2),"c"].join(" ")),a._write([a._setNumberPrecision((b-d)*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-(c+g))*a._scaleFactor,2),a._setNumberPrecision((b-f)*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-(c+e))*a._scaleFactor,2),a._setNumberPrecision(b*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-(c+e))*a._scaleFactor,2),"c"].join(" ")),a._write([a._setNumberPrecision((b+f)*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-(c+e))*a._scaleFactor,2),a._setNumberPrecision((b+d)*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-(c+g))*a._scaleFactor,2),a._setNumberPrecision((b+d)*a._scaleFactor,2),a._setNumberPrecision((a._pageHeight-c)*a._scaleFactor,2),"c"].join(" ")),null!==h&&a._write(a.getStyle(h)),a},circle:function(b,c,a,d){var e=this;return e.ellipse(b,c,a,a,d)},setFontSize:function(b){var a=this;return a._fontSize=b,a},setFont:function(b,c){var a=this;return a._fontKey=a.getFont(b,c),a},setFontStyle:function(b){var a=this;return a._fontKey=a.getFont(c,b),a},getFontList:function(){var a,c,d,f=this,e={},b=f._fontmap;for(a in b)if(b.hasOwnProperty(a)){e[a]=d=[];for(c in b[a])b[a].hasOwnProperty(c)&&d.push(c)}return e},addFontScriptName:function(a,b,c){var d=this;d.addFont(a,b,c,"StandardEncoding")},setLineWidth:function(b){var a=this;return a._write((b*a._scaleFactor).toFixed(2)+" w"),a},setDrawColor:function(b,e,f,g){var h,c=this;return h=!a(e)||!a(g)&&b===e===f?d(b)?b+" G":c._setNumberPrecision(b/255,2)+" G":a(g)?d(b)?[b,e,f,g,"K"].join(" "):[c._setNumberPrecision(b,2),c._setNumberPrecision(e,2),c._setNumberPrecision(f,2),c._setNumberPrecision(g,2),"K"].join(" "):d(b)?[b,e,f,Z].join(" "):[c._setNumberPrecision(b/255,2),c._setNumberPrecision(e/255,2),c._setNumberPrecision(f/255,2),Z].join(" "),c._write(h),c},setFillColor:function(b,f,g,e){var h,c=this;return!a(f)||!a(e)&&b===f===g?h=d(b)?b+" g":c._setNumberPrecision(b/255,2)+" g":!a(e)||Y(e)?(h=d(b)?[b,f,g,"rg"].join(" "):[c._setNumberPrecision(b/255,2),c._setNumberPrecision(f/255,2),c._setNumberPrecision(g/255,2),"rg"].join(" "),e&&0===e.a&&(h=["255","255","255","rg"].join(" "))):h=d(b)?[b,f,g,e,"k"].join(" "):[c._setNumberPrecision(b,2),c._setNumberPrecision(f,2),c._setNumberPrecision(g,2),c._setNumberPrecision(e,2),"k"].join(" "),c._write(h),c},setTextColor:function(b,e,g){var f,c=this;return d(b)&&/^#[0-9A-Fa-f]{6}$/.test(b)&&(f=parseInt(b.substr(1),16),b=f>>16&255,e=f>>8&255,g=255&f),0===b&&0===e&&0===g||!a(e)?c._textColor=c._setNumberPrecision(b/255,3)+" g":c._textColor=[c._setNumberPrecision(b/255,3),c._setNumberPrecision(e/255,3),c._setNumberPrecision(g/255,3),"rg"].join(" "),c},_build:function(){var d,c,e,b,a=this;for(a._printToDoc=!0,a._objectNumber=2,a._write("%PDF-"+a._version),a._writePages(),a._writeAdditionalObjects(),a._writeResources(),a._createObject(),a._write("<<"),a._writeInfo(),a._write(">>"),a._write("endobj"),a._createObject(),a._write("<<"),a._writeCatalog(),a._write(">>"),a._write("endobj"),d=a._contentLength,c="0000000000",a._write("xref"),a._write("0 "+(a._objectNumber+1)),a._write(c+" 65535 f "),b=1;b<=a._objectNumber;b++)e=a._offsets[b],V(e)?a._write((c+a._offsets[b]()).slice(-10)+" 00000 n "):a._write((c+a._offsets[b]).slice(-10)+" 00000 n ");return a._write("trailer"),a._write("<<"),a._writeTrailer(),a._write(">>"),a._write("startxref"),a._write(d),a._write("%%EOF"),a._printToDoc=!1,a._content.join("\n")},getStyle:function(a){var b=oa;return a===F?b=F.toLowerCase():a===S||a===ra?b=sa:(a===F.toLowerCase()||a===ta||a===na||a===ua)&&(b=a),b},_getArrayBuffer:function(){for(var d=this,b=d._build(),a=b.length,c=new ArrayBuffer(a),e=new Uint8Array(c);a--;)e[a]=b.charCodeAt(a);return c},_getCharWidths:function(h,l){var b,g,a,n=this,c=l||{},f=n.getActiveFontObj(),e=c.widths?c.widths:f.metadata.Unicode.widths,j=e.fof?e.fof:1,d=c.kerning?c.kerning:f.metadata.Unicode.kerning,m=d.fof?d.fof:1,i=0,o=e[0]||j,k=[];for(b=0,g=h.length;g>b;b++)a=h.charCodeAt(b),k.push((e[a]||o)/j+(d[a]&&d[a][i]||0)/m),i=a;return k},_sum:function(b){for(var a=b.length,c=0;a;)a--,c+=b[a];return c},_getStringWidth:function(b,c){var a=this;return a._sum(a._getCharWidths.call(a,b,c))},_getTextDimensions:function(c){var d,a,b=this,e=b.getActiveFontObj(),g=e.fontName,h=b._tableFontSize||b.getFontSize(),f=e.fontStyle;a=n.createElement("font");try{a.style.fontStyle=f}catch(i){a.style.fontWeight=f}a.style.fontName=g,a.style.fontSize=h+B;try{a.textContent=c}catch(i){a.innerText=c}return n.body.appendChild(a),d={w:(a.offsetWidth+1)*T,h:(a.offsetHeight+1)*T},n.body.removeChild(a),d},_setLastCellPosition:function(a,b,c,d,e){this._lastCellPos={x:a,y:b,w:c,h:d,ln:e}},_getLastCellPosition:function(){return this._lastCellPos},_cellAddPage:function(){var a=this,b=a._cellMargins||a._noMargins;a.addPage(),a._setLastCellPosition(b.left,b.top),a._cellPages++},_setTableHeaderConfig:function(a){this._cellTableHeaderRow=a},_splitWord:function(d,e,h,i){for(var c,f=[],a=0,g=d.length,b=0;a!==g&&b+e[a]<h;)b+=e[a],a++;for(f.push(d.slice(0,a)),c=a,b=0;a!==g;)b+e[a]>i&&(f.push(d.slice(c,a)),b=0,c=a),b+=e[a],a++;return c!==a&&f.push(d.slice(c,a)),f},_splitParagraph:function(u,o,v){var a,k,n,s,g,f=this,e=v||{},b=[],p=[b],m=e.textIndent||0,h=0,c=0,i=u.split(" "),q=f._getCharWidths(" ",e)[0],d=-1===e.lineIndent?i[0].length+2:e.lineIndent||0;if(d){var r=new Array(d).join(" "),l=[];za(i,function(b,a){a=a.split(/\s*\n/),a.length>1?l=l.concat(j(a,function(a,b){return(b&&a.length?"\n":"")+a})):l.push(a[0])}),i=l,d=f._getStringWidth(r,e)}for(n=0,s=i.length;s>n;n++){var t=0;if(a=i[n],d&&"\n"==a[0]&&(a=a.substr(1),t=1),k=f._getCharWidths(a,e),c=f._sum(k),m+h+c>o||t){if(c>o){for(g=f._splitWord(a,k,o-(m+h),o),b.push(g.shift()),b=[g.pop()];g.length;)p.push([g.shift()]);c=f._sum(k.slice(a.length-b[0].length))}else b=[a];p.push(b),m=c+d,h=q}else b.push(a),m+=h+c,h=q}var w=d?function(a,b){return(b?r:"")+a.join(" ")}:function(a){return a.join(" ")};return j(p,w)},_splitText:function(b,l,m){var g,h,d,k,a=this,c=m||{},i=t(b)?b.join(" "):b,j=a._getTextDimensions(i).w/i.length,f=[],e=function(b){var c,d,e={0:1},f={};return b.widths&&b.kerning?{widths:b.widths,kerning:b.kerning}:(c=a.getFontObj(b.fontName,b.fontStyle)||a.getActiveFontObj(),d="Unicode",c.metadata[d]?{widths:c.metadata[d].widths||e,kerning:c.metadata[d].kerning||f}:{widths:e,kerning:f})}.call(a,c);for(g=t(b)?b:b.split(/\r?\n/),h=1*a._scaleFactor*l/j,e.textIndent=c.textIndent?1*c.textIndent*a._scaleFactor/j:0,e.lineIndent=c.lineIndent,d=0,k=g.length;k>d;d++)f=f.concat(a._splitParagraph(g[d],h,e));return f},_getLineHeight:function(i,k,e){var c,b,d,f,g=this,h=0,j=g._cellPadding;for(d=0;d<i.length;d++)c=i[d],b=e[c],t(b)||(!a(b)||p(b)?b="":b+=""),e[c]=g._splitText(b,k[c]-j),f=g.getLineHeight()*e[c].length+1.6*j,f>h&&(h=f);return h},_cell:function(f,e,h,i,c,l,o){var k,j,m,g,b=this,d=b._getLastCellPosition(),p=b._cellMargins||b._noMargins,n=b._cellPadding;if(a(d.ln)&&(d.ln===l?(f=d.x+d.w,e=d.y):(d.y+d.h+i+b._cellMargin>=b._pageHeight-p.bottom&&(b._cellAddPage(),b._tablePrintHeader&&b._cellTableHeaderRow&&b._renderHeader(l,!0)),k=b._getLastCellPosition(),e=k.y+(k.h||0))),a(c[0]))if(b._cellPrintingHeaderRow?b.rect(f,e,h,i,S):b.rect(f,e,h,i),"right"===o)for(t(c)||(c=[c]),g=0;g<c.length;g++)j=c[g],m=b._getStringWidth(j)*b.getFontSize(),b.text(j,f+h-m-n,e+b.getLineHeight()*(g+1));else b.text(c,f+n,e+b.getLineHeight());return b._setLastCellPosition(f,e,h,i,l),b},_renderHeader:function(j,k){var d,g,e,i,c,b=this,f=[];if(!b._cellTableHeaderRow)return void h("shieldExport: No table header configuration",b.options.dieOnError);for(b._cellPrintingHeaderRow=!0,a(b._cellHeaderFunction)&&(c=b._cellHeaderFunction.call(b,b._cellPages),b._setLastCellPosition(c[0],c[1],c[2],c[3],-1)),b.setFontStyle(y),e=0,i=b._cellTableHeaderRow.length;i>e;e++)b.setFillColor(236,237,238),d=b._cellTableHeaderRow[e],k&&(d[1]=b._cellMargins&&b._cellMargins.top||0,f.push(d)),g=[].concat(d),b._cell.apply(b,g.concat(j));f.length>0&&b._setTableHeaderConfig(f),b.setFontStyle(r),b._cellPrintingHeaderRow=!1},table:function(x,B,F,k,n){var f,b,l,z,E,u,s,i,t,C,r,q,e=this,y=e._cellPadding,g=[],o=[],m={},D=[],H=function(a){return a[f]},w=!0,v=e.getFontSize(),G=e._noMargins;if(!F)return void h("shieldExport: No data specified for PDF table",e.options.dieOnError);if(q=F.slice(0),n&&(n.printHeader===!1&&(w=!1),n.fontSize&&(v=n.fontSize),n.margins&&(G=n.margins)),e._lastCellPos={x:c,y:c,w:c,h:c,ln:c},e._cellPages=1,e._tablePrintHeader=w,e._cellMargins=G,e.setFontSize(v),e._tableFontSize=v,!a(k)||p(k))g=A(q[0]);else if(k[0]&&!d(k[0]))for(b=0,l=k.length;l>b;b++)f=k[b],g.push(f.field),o.push(f.title),m[f.field]=a(f.width)?K(f.width)*e._getScaleFactor():c;else g=k;for(b=0,l=g.length;l>b;b++)if(f=g[b],!a(m[f])){for(s=[],s.push(e._getTextDimensions(o[b]||f).w+2*y),u=j(q,H),i=0,z=u.length;z>i;i++)E=u[i],s.push(e._getTextDimensions(E).w+2*y);m[f]=Math.max.apply(Math,s)}if(w){for(r=e._getLineHeight(g,m,o.length?o:g),b=0,l=g.length;l>b;b++)f=g[b],D.push([x,B,m[f],r,(o.length?o[b]:f)+""]);e._setTableHeaderConfig(D),e._renderHeader(1,!1)}for(b=0,l=q.length;l>b;b++)for(t=q[b],r=e._getLineHeight(g,m,t),i=0,C=g.length;C>i;i++)f=g[i],e._cell(x,B,m[f],r,t[f],b+2,k[i].align);return e}}),w(f,{PDFDocument:P,OOXMLWorkbook:ba,ExcelXMLSpreadsheet:v})}(jQuery,shield,this);
shield.version='1.7.27';